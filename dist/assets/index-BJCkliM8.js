function ow(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),r}var ig={exports:{}},el={},og={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ci=Symbol.for("react.element"),dw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),mw=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),gw=Symbol.for("react.context"),pw=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),vw=Symbol.for("react.lazy"),a0=Symbol.iterator;function ww(e){return e===null||typeof e!="object"?null:(e=a0&&e[a0]||e["@@iterator"],typeof e=="function"?e:null)}var lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cg=Object.assign,dg={};function Fa(e,t,r){this.props=e,this.context=t,this.refs=dg,this.updater=r||lg}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ug(){}ug.prototype=Fa.prototype;function tu(e,t,r){this.props=e,this.context=t,this.refs=dg,this.updater=r||lg}var ru=tu.prototype=new ug;ru.constructor=tu;cg(ru,Fa.prototype);ru.isPureReactComponent=!0;var n0=Array.isArray,hg=Object.prototype.hasOwnProperty,su={current:null},mg={key:!0,ref:!0,__self:!0,__source:!0};function fg(e,t,r){var a,n={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)hg.call(t,a)&&!mg.hasOwnProperty(a)&&(n[a]=t[a]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)n[a]===void 0&&(n[a]=l[a]);return{$$typeof:ci,type:e,key:i,ref:o,props:n,_owner:su.current}}function bw(e,t){return{$$typeof:ci,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function au(e){return typeof e=="object"&&e!==null&&e.$$typeof===ci}function kw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var i0=/\/+/g;function Ll(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kw(""+e.key):t.toString(36)}function eo(e,t,r,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ci:case dw:o=!0}}if(o)return o=e,n=n(o),e=a===""?"."+Ll(o,0):a,n0(n)?(r="",e!=null&&(r=e.replace(i0,"$&/")+"/"),eo(n,t,r,"",function(d){return d})):n!=null&&(au(n)&&(n=bw(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(i0,"$&/")+"/")+e)),t.push(n)),1;if(o=0,a=a===""?".":a+":",n0(e))for(var l=0;l<e.length;l++){i=e[l];var c=a+Ll(i,l);o+=eo(i,t,r,c,n)}else if(c=ww(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=a+Ll(i,l++),o+=eo(i,t,r,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ei(e,t,r){if(e==null)return e;var a=[],n=0;return eo(e,a,"","",function(i){return t.call(r,i,n++)}),a}function jw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},to={transition:null},Nw={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:to,ReactCurrentOwner:su};function gg(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Ei,forEach:function(e,t,r){Ei(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ei(e,function(){t++}),t},toArray:function(e){return Ei(e,function(t){return t})||[]},only:function(e){if(!au(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Fa;Ne.Fragment=uw;Ne.Profiler=mw;Ne.PureComponent=tu;Ne.StrictMode=hw;Ne.Suspense=xw;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw;Ne.act=gg;Ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=cg({},e.props),n=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=su.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)hg.call(t,c)&&!mg.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:ci,type:e.type,key:n,ref:i,props:a,_owner:o}};Ne.createContext=function(e){return e={$$typeof:gw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fw,_context:e},e.Consumer=e};Ne.createElement=fg;Ne.createFactory=function(e){var t=fg.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:pw,render:e}};Ne.isValidElement=au;Ne.lazy=function(e){return{$$typeof:vw,_payload:{_status:-1,_result:e},_init:jw}};Ne.memo=function(e,t){return{$$typeof:yw,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=to.transition;to.transition={};try{e()}finally{to.transition=t}};Ne.unstable_act=gg;Ne.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ne.useContext=function(e){return kt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ne.useId=function(){return kt.current.useId()};Ne.useImperativeHandle=function(e,t,r){return kt.current.useImperativeHandle(e,t,r)};Ne.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ne.useReducer=function(e,t,r){return kt.current.useReducer(e,t,r)};Ne.useRef=function(e){return kt.current.useRef(e)};Ne.useState=function(e){return kt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,r){return kt.current.useSyncExternalStore(e,t,r)};Ne.useTransition=function(){return kt.current.useTransition()};Ne.version="18.3.1";og.exports=Ne;var f=og.exports;const Pc=lw(f),_w=ow({__proto__:null,default:Pc},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=f,Cw=Symbol.for("react.element"),Ew=Symbol.for("react.fragment"),Tw=Object.prototype.hasOwnProperty,Pw=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Aw={key:!0,ref:!0,__self:!0,__source:!0};function pg(e,t,r){var a,n={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)Tw.call(t,a)&&!Aw.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Cw,type:e,key:i,ref:o,props:n,_owner:Pw.current}}el.Fragment=Ew;el.jsx=pg;el.jsxs=pg;ig.exports=el;var s=ig.exports,xg={exports:{}},$t={},yg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,O){var H=$.length;$.push(O);e:for(;0<H;){var U=H-1>>>1,X=$[U];if(0<n(X,O))$[U]=O,$[H]=X,H=U;else break e}}function r($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var O=$[0],H=$.pop();if(H!==O){$[0]=H;e:for(var U=0,X=$.length,ue=X>>>1;U<ue;){var ge=2*(U+1)-1,de=$[ge],me=ge+1,_e=$[me];if(0>n(de,H))me<X&&0>n(_e,de)?($[U]=_e,$[me]=H,U=me):($[U]=de,$[ge]=H,U=ge);else if(me<X&&0>n(_e,H))$[U]=_e,$[me]=H,U=me;else break e}}return O}function n($,O){var H=$.sortIndex-O.sortIndex;return H!==0?H:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,x=!1,k=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var O=r(d);O!==null;){if(O.callback===null)a(d);else if(O.startTime<=$)a(d),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(d)}}function S($){if(j=!1,v($),!k)if(r(c)!==null)k=!0,te(y);else{var O=r(d);O!==null&&J(S,O.startTime-$)}}function y($,O){k=!1,j&&(j=!1,g(M),M=-1),x=!0;var H=m;try{for(v(O),h=r(c);h!==null&&(!(h.expirationTime>O)||$&&!Z());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var X=U(h.expirationTime<=O);O=e.unstable_now(),typeof X=="function"?h.callback=X:h===r(c)&&a(c),v(O)}else a(c);h=r(c)}if(h!==null)var ue=!0;else{var ge=r(d);ge!==null&&J(S,ge.startTime-O),ue=!1}return ue}finally{h=null,m=H,x=!1}}var _=!1,C=null,M=-1,W=5,q=-1;function Z(){return!(e.unstable_now()-q<W)}function se(){if(C!==null){var $=e.unstable_now();q=$;var O=!0;try{O=C(!0,$)}finally{O?B():(_=!1,C=null)}}else _=!1}var B;if(typeof p=="function")B=function(){p(se)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Y=ye.port2;ye.port1.onmessage=se,B=function(){Y.postMessage(null)}}else B=function(){N(se,0)};function te($){C=$,_||(_=!0,B())}function J($,O){M=N(function(){$(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){k||x||(k=!0,te(y))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var H=m;m=O;try{return $()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=m;m=$;try{return O()}finally{m=H}},e.unstable_scheduleCallback=function($,O,H){var U=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,$={id:u++,callback:O,priorityLevel:$,startTime:H,expirationTime:X,sortIndex:-1},H>U?($.sortIndex=H,t(d,$),r(c)===null&&$===r(d)&&(j?(g(M),M=-1):j=!0,J(S,H-U))):($.sortIndex=X,t(c,$),k||x||(k=!0,te(y))),$},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function($){var O=m;return function(){var H=m;m=O;try{return $.apply(this,arguments)}finally{m=H}}}})(vg);yg.exports=vg;var Dw=yg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw=f,Ot=Dw;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wg=new Set,Rn={};function Ks(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(Rn[e]=t,e=0;e<t.length;e++)wg.add(t[e])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ac=Object.prototype.hasOwnProperty,Lw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o0={},l0={};function Rw(e){return Ac.call(l0,e)?!0:Ac.call(o0,e)?!1:Lw.test(e)?l0[e]=!0:(o0[e]=!0,!1)}function Ow(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $w(e,t,r,a){if(t===null||typeof t>"u"||Ow(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,r,a,n,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var nu=/[\-:]([a-z])/g;function iu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nu,iu);lt[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nu,iu);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nu,iu);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ou(e,t,r,a){var n=lt.hasOwnProperty(t)?lt[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($w(t,r,n,a)&&(r=null),a||n===null?Rw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Vr=Mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ti=Symbol.for("react.element"),aa=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),lu=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),bg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),cu=Symbol.for("react.forward_ref"),Mc=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),du=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),jg=Symbol.for("react.offscreen"),c0=Symbol.iterator;function Qa(e){return e===null||typeof e!="object"?null:(e=c0&&e[c0]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Rl;function cn(e){if(Rl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Rl=t&&t[1]||""}return`
`+Rl+e}var Ol=!1;function $l(e,t){if(!e||Ol)return"";Ol=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=a.stack.split(`
`),o=n.length-1,l=i.length-1;1<=o&&0<=l&&n[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==i[l]){var c=`
`+n[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ol=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?cn(e):""}function Iw(e){switch(e.tag){case 5:return cn(e.type);case 16:return cn("Lazy");case 13:return cn("Suspense");case 19:return cn("SuspenseList");case 0:case 2:case 15:return e=$l(e.type,!1),e;case 11:return e=$l(e.type.render,!1),e;case 1:return e=$l(e.type,!0),e;default:return""}}function Rc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case na:return"Fragment";case aa:return"Portal";case Dc:return"Profiler";case lu:return"StrictMode";case Mc:return"Suspense";case Lc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kg:return(e.displayName||"Context")+".Consumer";case bg:return(e._context.displayName||"Context")+".Provider";case cu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case du:return t=e.displayName||null,t!==null?t:Rc(e.type)||"Memo";case Gr:t=e._payload,e=e._init;try{return Rc(e(t))}catch{}}return null}function Fw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rc(t);case 8:return t===lu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ng(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uw(e){var t=Ng(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pi(e){e._valueTracker||(e._valueTracker=Uw(e))}function _g(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Ng(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oc(e,t){var r=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function d0(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=us(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sg(e,t){t=t.checked,t!=null&&ou(e,"checked",t,!1)}function $c(e,t){Sg(e,t);var r=us(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ic(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ic(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function u0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ic(e,t,r){(t!=="number"||vo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dn=Array.isArray;function ka(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Fc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(dn(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:us(r)}}function Cg(e,t){var r=us(t.value),a=us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function m0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Eg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Eg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ai,Tg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function On(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vw=["Webkit","ms","Moz","O"];Object.keys(pn).forEach(function(e){Vw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pn[t]=pn[e]})});function Pg(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pn.hasOwnProperty(e)&&pn[e]?(""+t).trim():t+"px"}function Ag(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Pg(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}var zw=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vc(e,t){if(t){if(zw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function zc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function uu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hc=null,ja=null,Na=null;function f0(e){if(e=hi(e)){if(typeof Hc!="function")throw Error(G(280));var t=e.stateNode;t&&(t=nl(t),Hc(e.stateNode,e.type,t))}}function Dg(e){ja?Na?Na.push(e):Na=[e]:ja=e}function Mg(){if(ja){var e=ja,t=Na;if(Na=ja=null,f0(e),t)for(e=0;e<t.length;e++)f0(t[e])}}function Lg(e,t){return e(t)}function Rg(){}var Il=!1;function Og(e,t,r){if(Il)return e(t,r);Il=!0;try{return Lg(e,t,r)}finally{Il=!1,(ja!==null||Na!==null)&&(Rg(),Mg())}}function $n(e,t){var r=e.stateNode;if(r===null)return null;var a=nl(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Wc=!1;if(Lr)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Wc=!1}function Bw(e,t,r,a,n,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var xn=!1,wo=null,bo=!1,qc=null,Hw={onError:function(e){xn=!0,wo=e}};function Ww(e,t,r,a,n,i,o,l,c){xn=!1,wo=null,Bw.apply(Hw,arguments)}function qw(e,t,r,a,n,i,o,l,c){if(Ww.apply(this,arguments),xn){if(xn){var d=wo;xn=!1,wo=null}else throw Error(G(198));bo||(bo=!0,qc=d)}}function Ys(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g0(e){if(Ys(e)!==e)throw Error(G(188))}function Gw(e){var t=e.alternate;if(!t){if(t=Ys(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return g0(n),e;if(i===a)return g0(n),t;i=i.sibling}throw Error(G(188))}if(r.return!==a.return)r=n,a=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,a=i;break}if(l===a){o=!0,a=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,a=n;break}if(l===a){o=!0,a=i,r=n;break}l=l.sibling}if(!o)throw Error(G(189))}}if(r.alternate!==a)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function Ig(e){return e=Gw(e),e!==null?Fg(e):null}function Fg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fg(e);if(t!==null)return t;e=e.sibling}return null}var Ug=Ot.unstable_scheduleCallback,p0=Ot.unstable_cancelCallback,Kw=Ot.unstable_shouldYield,Yw=Ot.unstable_requestPaint,Ke=Ot.unstable_now,Xw=Ot.unstable_getCurrentPriorityLevel,hu=Ot.unstable_ImmediatePriority,Vg=Ot.unstable_UserBlockingPriority,ko=Ot.unstable_NormalPriority,Jw=Ot.unstable_LowPriority,zg=Ot.unstable_IdlePriority,tl=null,vr=null;function Qw(e){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(tl,e,void 0,(e.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:tb,Zw=Math.log,eb=Math.LN2;function tb(e){return e>>>=0,e===0?32:31-(Zw(e)/eb|0)|0}var Di=64,Mi=4194304;function un(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jo(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~n;l!==0?a=un(l):(i&=o,i!==0&&(a=un(i)))}else o=r&~n,o!==0?a=un(o):i!==0&&(a=un(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-dr(t),n=1<<r,a|=e[r],t&=~n;return a}function rb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sb(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-dr(i),l=1<<o,c=n[o];c===-1?(!(l&r)||l&a)&&(n[o]=rb(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Gc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bg(){var e=Di;return Di<<=1,!(Di&4194240)&&(Di=64),e}function Fl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function di(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dr(t),e[t]=r}function ab(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-dr(r),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~i}}function mu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-dr(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var Te=0;function Hg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wg,fu,qg,Gg,Kg,Kc=!1,Li=[],rs=null,ss=null,as=null,In=new Map,Fn=new Map,Xr=[],nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x0(e,t){switch(e){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":In.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function en(e,t,r,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=hi(t),t!==null&&fu(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function ib(e,t,r,a,n){switch(t){case"focusin":return rs=en(rs,e,t,r,a,n),!0;case"dragenter":return ss=en(ss,e,t,r,a,n),!0;case"mouseover":return as=en(as,e,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return In.set(i,en(In.get(i)||null,e,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Fn.set(i,en(Fn.get(i)||null,e,t,r,a,n)),!0}return!1}function Yg(e){var t=Ms(e.target);if(t!==null){var r=Ys(t);if(r!==null){if(t=r.tag,t===13){if(t=$g(r),t!==null){e.blockedOn=t,Kg(e.priority,function(){qg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ro(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Bc=a,r.target.dispatchEvent(a),Bc=null}else return t=hi(r),t!==null&&fu(t),e.blockedOn=r,!1;t.shift()}return!0}function y0(e,t,r){ro(e)&&r.delete(t)}function ob(){Kc=!1,rs!==null&&ro(rs)&&(rs=null),ss!==null&&ro(ss)&&(ss=null),as!==null&&ro(as)&&(as=null),In.forEach(y0),Fn.forEach(y0)}function tn(e,t){e.blockedOn===t&&(e.blockedOn=null,Kc||(Kc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,ob)))}function Un(e){function t(n){return tn(n,e)}if(0<Li.length){tn(Li[0],e);for(var r=1;r<Li.length;r++){var a=Li[r];a.blockedOn===e&&(a.blockedOn=null)}}for(rs!==null&&tn(rs,e),ss!==null&&tn(ss,e),as!==null&&tn(as,e),In.forEach(t),Fn.forEach(t),r=0;r<Xr.length;r++)a=Xr[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Xr.length&&(r=Xr[0],r.blockedOn===null);)Yg(r),r.blockedOn===null&&Xr.shift()}var _a=Vr.ReactCurrentBatchConfig,No=!0;function lb(e,t,r,a){var n=Te,i=_a.transition;_a.transition=null;try{Te=1,gu(e,t,r,a)}finally{Te=n,_a.transition=i}}function cb(e,t,r,a){var n=Te,i=_a.transition;_a.transition=null;try{Te=4,gu(e,t,r,a)}finally{Te=n,_a.transition=i}}function gu(e,t,r,a){if(No){var n=Yc(e,t,r,a);if(n===null)Yl(e,t,a,_o,r),x0(e,a);else if(ib(n,e,t,r,a))a.stopPropagation();else if(x0(e,a),t&4&&-1<nb.indexOf(e)){for(;n!==null;){var i=hi(n);if(i!==null&&Wg(i),i=Yc(e,t,r,a),i===null&&Yl(e,t,a,_o,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else Yl(e,t,a,null,r)}}var _o=null;function Yc(e,t,r,a){if(_o=null,e=uu(a),e=Ms(e),e!==null)if(t=Ys(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$g(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _o=e,null}function Xg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xw()){case hu:return 1;case Vg:return 4;case ko:case Jw:return 16;case zg:return 536870912;default:return 16}default:return 16}}var Zr=null,pu=null,so=null;function Jg(){if(so)return so;var e,t=pu,r=t.length,a,n="value"in Zr?Zr.value:Zr.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(a=1;a<=o&&t[r-a]===n[i-a];a++);return so=n.slice(e,1<a?1-a:void 0)}function ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function v0(){return!1}function It(e){function t(r,a,n,i,o){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ri:v0,this.isPropagationStopped=v0,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=It(Ua),ui=Be({},Ua,{view:0,detail:0}),db=It(ui),Ul,Vl,rn,rl=Be({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rn&&(rn&&e.type==="mousemove"?(Ul=e.screenX-rn.screenX,Vl=e.screenY-rn.screenY):Vl=Ul=0,rn=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),w0=It(rl),ub=Be({},rl,{dataTransfer:0}),hb=It(ub),mb=Be({},ui,{relatedTarget:0}),zl=It(mb),fb=Be({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),gb=It(fb),pb=Be({},Ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xb=It(pb),yb=Be({},Ua,{data:0}),b0=It(yb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bb[e])?!!t[e]:!1}function yu(){return kb}var jb=Be({},ui,{key:function(e){if(e.key){var t=vb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nb=It(jb),_b=Be({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k0=It(_b),Sb=Be({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),Cb=It(Sb),Eb=Be({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tb=It(Eb),Pb=Be({},rl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ab=It(Pb),Db=[9,13,27,32],vu=Lr&&"CompositionEvent"in window,yn=null;Lr&&"documentMode"in document&&(yn=document.documentMode);var Mb=Lr&&"TextEvent"in window&&!yn,Qg=Lr&&(!vu||yn&&8<yn&&11>=yn),j0=" ",N0=!1;function Zg(e,t){switch(e){case"keyup":return Db.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function Lb(e,t){switch(e){case"compositionend":return ep(t);case"keypress":return t.which!==32?null:(N0=!0,j0);case"textInput":return e=t.data,e===j0&&N0?null:e;default:return null}}function Rb(e,t){if(ia)return e==="compositionend"||!vu&&Zg(e,t)?(e=Jg(),so=pu=Zr=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qg&&t.locale!=="ko"?null:t.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ob[e.type]:t==="textarea"}function tp(e,t,r,a){Dg(a),t=So(t,"onChange"),0<t.length&&(r=new xu("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var vn=null,Vn=null;function $b(e){hp(e,0)}function sl(e){var t=ca(e);if(_g(t))return e}function Ib(e,t){if(e==="change")return t}var rp=!1;if(Lr){var Bl;if(Lr){var Hl="oninput"in document;if(!Hl){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Hl=typeof S0.oninput=="function"}Bl=Hl}else Bl=!1;rp=Bl&&(!document.documentMode||9<document.documentMode)}function C0(){vn&&(vn.detachEvent("onpropertychange",sp),Vn=vn=null)}function sp(e){if(e.propertyName==="value"&&sl(Vn)){var t=[];tp(t,Vn,e,uu(e)),Og($b,t)}}function Fb(e,t,r){e==="focusin"?(C0(),vn=t,Vn=r,vn.attachEvent("onpropertychange",sp)):e==="focusout"&&C0()}function Ub(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sl(Vn)}function Vb(e,t){if(e==="click")return sl(t)}function zb(e,t){if(e==="input"||e==="change")return sl(t)}function Bb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:Bb;function zn(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Ac.call(t,n)||!hr(e[n],t[n]))return!1}return!0}function E0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function T0(e,t){var r=E0(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=E0(r)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function np(){for(var e=window,t=vo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vo(e.document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hb(e){var t=np(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ap(r.ownerDocument.documentElement,r)){if(a!==null&&wu(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=T0(r,i);var o=T0(r,a);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wb=Lr&&"documentMode"in document&&11>=document.documentMode,oa=null,Xc=null,wn=null,Jc=!1;function P0(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jc||oa==null||oa!==vo(a)||(a=oa,"selectionStart"in a&&wu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),wn&&zn(wn,a)||(wn=a,a=So(Xc,"onSelect"),0<a.length&&(t=new xu("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=oa)))}function Oi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var la={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Wl={},ip={};Lr&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function al(e){if(Wl[e])return Wl[e];if(!la[e])return e;var t=la[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ip)return Wl[e]=t[r];return e}var op=al("animationend"),lp=al("animationiteration"),cp=al("animationstart"),dp=al("transitionend"),up=new Map,A0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(e,t){up.set(e,t),Ks(t,[e])}for(var ql=0;ql<A0.length;ql++){var Gl=A0[ql],qb=Gl.toLowerCase(),Gb=Gl[0].toUpperCase()+Gl.slice(1);ps(qb,"on"+Gb)}ps(op,"onAnimationEnd");ps(lp,"onAnimationIteration");ps(cp,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(dp,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kb=new Set("cancel close invalid load scroll toggle".split(" ").concat(hn));function D0(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,qw(a,t,void 0,e),e.currentTarget=null}function hp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var l=a[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;D0(n,l,d),i=c}else for(o=0;o<a.length;o++){if(l=a[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;D0(n,l,d),i=c}}}if(bo)throw e=qc,bo=!1,qc=null,e}function Re(e,t){var r=t[rd];r===void 0&&(r=t[rd]=new Set);var a=e+"__bubble";r.has(a)||(mp(t,e,2,!1),r.add(a))}function Kl(e,t,r){var a=0;t&&(a|=4),mp(r,e,a,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function Bn(e){if(!e[$i]){e[$i]=!0,wg.forEach(function(r){r!=="selectionchange"&&(Kb.has(r)||Kl(r,!1,e),Kl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$i]||(t[$i]=!0,Kl("selectionchange",!1,t))}}function mp(e,t,r,a){switch(Xg(t)){case 1:var n=lb;break;case 4:n=cb;break;default:n=gu}r=n.bind(null,t,r,e),n=void 0,!Wc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Yl(e,t,r,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var l=a.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;o=o.return}for(;l!==null;){if(o=Ms(l),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}l=l.parentNode}}a=a.return}Og(function(){var d=i,u=uu(r),h=[];e:{var m=up.get(e);if(m!==void 0){var x=xu,k=e;switch(e){case"keypress":if(ao(r)===0)break e;case"keydown":case"keyup":x=Nb;break;case"focusin":k="focus",x=zl;break;case"focusout":k="blur",x=zl;break;case"beforeblur":case"afterblur":x=zl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=w0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Cb;break;case op:case lp:case cp:x=gb;break;case dp:x=Tb;break;case"scroll":x=db;break;case"wheel":x=Ab;break;case"copy":case"cut":case"paste":x=xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=k0}var j=(t&4)!==0,N=!j&&e==="scroll",g=j?m!==null?m+"Capture":null:m;j=[];for(var p=d,v;p!==null;){v=p;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,g!==null&&(S=$n(p,g),S!=null&&j.push(Hn(p,S,v)))),N)break;p=p.return}0<j.length&&(m=new x(m,k,null,r,u),h.push({event:m,listeners:j}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&r!==Bc&&(k=r.relatedTarget||r.fromElement)&&(Ms(k)||k[Rr]))break e;if((x||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,x?(k=r.relatedTarget||r.toElement,x=d,k=k?Ms(k):null,k!==null&&(N=Ys(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(x=null,k=d),x!==k)){if(j=w0,S="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(j=k0,S="onPointerLeave",g="onPointerEnter",p="pointer"),N=x==null?m:ca(x),v=k==null?m:ca(k),m=new j(S,p+"leave",x,r,u),m.target=N,m.relatedTarget=v,S=null,Ms(u)===d&&(j=new j(g,p+"enter",k,r,u),j.target=v,j.relatedTarget=N,S=j),N=S,x&&k)t:{for(j=x,g=k,p=0,v=j;v;v=Js(v))p++;for(v=0,S=g;S;S=Js(S))v++;for(;0<p-v;)j=Js(j),p--;for(;0<v-p;)g=Js(g),v--;for(;p--;){if(j===g||g!==null&&j===g.alternate)break t;j=Js(j),g=Js(g)}j=null}else j=null;x!==null&&M0(h,m,x,j,!1),k!==null&&N!==null&&M0(h,N,k,j,!0)}}e:{if(m=d?ca(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var y=Ib;else if(_0(m))if(rp)y=zb;else{y=Ub;var _=Fb}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(y=Vb);if(y&&(y=y(e,d))){tp(h,y,r,u);break e}_&&_(e,m,d),e==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&Ic(m,"number",m.value)}switch(_=d?ca(d):window,e){case"focusin":(_0(_)||_.contentEditable==="true")&&(oa=_,Xc=d,wn=null);break;case"focusout":wn=Xc=oa=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,P0(h,r,u);break;case"selectionchange":if(Wb)break;case"keydown":case"keyup":P0(h,r,u)}var C;if(vu)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ia?Zg(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(Qg&&r.locale!=="ko"&&(ia||M!=="onCompositionStart"?M==="onCompositionEnd"&&ia&&(C=Jg()):(Zr=u,pu="value"in Zr?Zr.value:Zr.textContent,ia=!0)),_=So(d,M),0<_.length&&(M=new b0(M,e,null,r,u),h.push({event:M,listeners:_}),C?M.data=C:(C=ep(r),C!==null&&(M.data=C)))),(C=Mb?Lb(e,r):Rb(e,r))&&(d=So(d,"onBeforeInput"),0<d.length&&(u=new b0("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}hp(h,t)})}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function So(e,t){for(var r=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=$n(e,r),i!=null&&a.unshift(Hn(e,i,n)),i=$n(e,t),i!=null&&a.push(Hn(e,i,n))),e=e.return}return a}function Js(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function M0(e,t,r,a,n){for(var i=t._reactName,o=[];r!==null&&r!==a;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&d!==null&&(l=d,n?(c=$n(r,i),c!=null&&o.unshift(Hn(r,c,l))):n||(c=$n(r,i),c!=null&&o.push(Hn(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Yb=/\r\n?/g,Xb=/\u0000|\uFFFD/g;function L0(e){return(typeof e=="string"?e:""+e).replace(Yb,`
`).replace(Xb,"")}function Ii(e,t,r){if(t=L0(t),L0(e)!==t&&r)throw Error(G(425))}function Co(){}var Qc=null,Zc=null;function ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var td=typeof setTimeout=="function"?setTimeout:void 0,Jb=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,Qb=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(e){return R0.resolve(null).then(e).catch(Zb)}:td;function Zb(e){setTimeout(function(){throw e})}function Xl(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){e.removeChild(n),Un(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Un(t)}function ns(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function O0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Va=Math.random().toString(36).slice(2),yr="__reactFiber$"+Va,Wn="__reactProps$"+Va,Rr="__reactContainer$"+Va,rd="__reactEvents$"+Va,e1="__reactListeners$"+Va,t1="__reactHandles$"+Va;function Ms(e){var t=e[yr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rr]||r[yr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=O0(e);e!==null;){if(r=e[yr])return r;e=O0(e)}return t}e=r,r=e.parentNode}return null}function hi(e){return e=e[yr]||e[Rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ca(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function nl(e){return e[Wn]||null}var sd=[],da=-1;function xs(e){return{current:e}}function Oe(e){0>da||(e.current=sd[da],sd[da]=null,da--)}function Me(e,t){da++,sd[da]=e.current,e.current=t}var hs={},xt=xs(hs),Pt=xs(!1),Bs=hs;function Pa(e,t){var r=e.type.contextTypes;if(!r)return hs;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function At(e){return e=e.childContextTypes,e!=null}function Eo(){Oe(Pt),Oe(xt)}function $0(e,t,r){if(xt.current!==hs)throw Error(G(168));Me(xt,t),Me(Pt,r)}function fp(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(G(108,Fw(e)||"Unknown",n));return Be({},r,a)}function To(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,Bs=xt.current,Me(xt,e),Me(Pt,Pt.current),!0}function I0(e,t,r){var a=e.stateNode;if(!a)throw Error(G(169));r?(e=fp(e,t,Bs),a.__reactInternalMemoizedMergedChildContext=e,Oe(Pt),Oe(xt),Me(xt,e)):Oe(Pt),Me(Pt,r)}var Tr=null,il=!1,Jl=!1;function gp(e){Tr===null?Tr=[e]:Tr.push(e)}function r1(e){il=!0,gp(e)}function ys(){if(!Jl&&Tr!==null){Jl=!0;var e=0,t=Te;try{var r=Tr;for(Te=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Tr=null,il=!1}catch(n){throw Tr!==null&&(Tr=Tr.slice(e+1)),Ug(hu,ys),n}finally{Te=t,Jl=!1}}return null}var ua=[],ha=0,Po=null,Ao=0,Vt=[],zt=0,Hs=null,Ar=1,Dr="";function Ss(e,t){ua[ha++]=Ao,ua[ha++]=Po,Po=e,Ao=t}function pp(e,t,r){Vt[zt++]=Ar,Vt[zt++]=Dr,Vt[zt++]=Hs,Hs=e;var a=Ar;e=Dr;var n=32-dr(a)-1;a&=~(1<<n),r+=1;var i=32-dr(t)+n;if(30<i){var o=n-n%5;i=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Ar=1<<32-dr(t)+n|r<<n|a,Dr=i+e}else Ar=1<<i|r<<n|a,Dr=e}function bu(e){e.return!==null&&(Ss(e,1),pp(e,1,0))}function ku(e){for(;e===Po;)Po=ua[--ha],ua[ha]=null,Ao=ua[--ha],ua[ha]=null;for(;e===Hs;)Hs=Vt[--zt],Vt[zt]=null,Dr=Vt[--zt],Vt[zt]=null,Ar=Vt[--zt],Vt[zt]=null}var Rt=null,Lt=null,Ie=!1,or=null;function xp(e,t){var r=Ht(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function F0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Lt=ns(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Hs!==null?{id:Ar,overflow:Dr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ht(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Rt=e,Lt=null,!0):!1;default:return!1}}function ad(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nd(e){if(Ie){var t=Lt;if(t){var r=t;if(!F0(e,t)){if(ad(e))throw Error(G(418));t=ns(r.nextSibling);var a=Rt;t&&F0(e,t)?xp(a,r):(e.flags=e.flags&-4097|2,Ie=!1,Rt=e)}}else{if(ad(e))throw Error(G(418));e.flags=e.flags&-4097|2,Ie=!1,Rt=e}}}function U0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function Fi(e){if(e!==Rt)return!1;if(!Ie)return U0(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ed(e.type,e.memoizedProps)),t&&(t=Lt)){if(ad(e))throw yp(),Error(G(418));for(;t;)xp(e,t),t=ns(t.nextSibling)}if(U0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Lt=ns(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=Rt?ns(e.stateNode.nextSibling):null;return!0}function yp(){for(var e=Lt;e;)e=ns(e.nextSibling)}function Aa(){Lt=Rt=null,Ie=!1}function ju(e){or===null?or=[e]:or.push(e)}var s1=Vr.ReactCurrentBatchConfig;function sn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var a=r.stateNode}if(!a)throw Error(G(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=n.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function Ui(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function V0(e){var t=e._init;return t(e._payload)}function vp(e){function t(g,p){if(e){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function a(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function n(g,p){return g=cs(g,p),g.index=0,g.sibling=null,g}function i(g,p,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,v,S){return p===null||p.tag!==6?(p=ac(v,g.mode,S),p.return=g,p):(p=n(p,v),p.return=g,p)}function c(g,p,v,S){var y=v.type;return y===na?u(g,p,v.props.children,S,v.key):p!==null&&(p.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Gr&&V0(y)===p.type)?(S=n(p,v.props),S.ref=sn(g,p,v),S.return=g,S):(S=ho(v.type,v.key,v.props,null,g.mode,S),S.ref=sn(g,p,v),S.return=g,S)}function d(g,p,v,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=nc(v,g.mode,S),p.return=g,p):(p=n(p,v.children||[]),p.return=g,p)}function u(g,p,v,S,y){return p===null||p.tag!==7?(p=Fs(v,g.mode,S,y),p.return=g,p):(p=n(p,v),p.return=g,p)}function h(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ac(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ti:return v=ho(p.type,p.key,p.props,null,g.mode,v),v.ref=sn(g,null,p),v.return=g,v;case aa:return p=nc(p,g.mode,v),p.return=g,p;case Gr:var S=p._init;return h(g,S(p._payload),v)}if(dn(p)||Qa(p))return p=Fs(p,g.mode,v,null),p.return=g,p;Ui(g,p)}return null}function m(g,p,v,S){var y=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return y!==null?null:l(g,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ti:return v.key===y?c(g,p,v,S):null;case aa:return v.key===y?d(g,p,v,S):null;case Gr:return y=v._init,m(g,p,y(v._payload),S)}if(dn(v)||Qa(v))return y!==null?null:u(g,p,v,S,null);Ui(g,v)}return null}function x(g,p,v,S,y){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(v)||null,l(p,g,""+S,y);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ti:return g=g.get(S.key===null?v:S.key)||null,c(p,g,S,y);case aa:return g=g.get(S.key===null?v:S.key)||null,d(p,g,S,y);case Gr:var _=S._init;return x(g,p,v,_(S._payload),y)}if(dn(S)||Qa(S))return g=g.get(v)||null,u(p,g,S,y,null);Ui(p,S)}return null}function k(g,p,v,S){for(var y=null,_=null,C=p,M=p=0,W=null;C!==null&&M<v.length;M++){C.index>M?(W=C,C=null):W=C.sibling;var q=m(g,C,v[M],S);if(q===null){C===null&&(C=W);break}e&&C&&q.alternate===null&&t(g,C),p=i(q,p,M),_===null?y=q:_.sibling=q,_=q,C=W}if(M===v.length)return r(g,C),Ie&&Ss(g,M),y;if(C===null){for(;M<v.length;M++)C=h(g,v[M],S),C!==null&&(p=i(C,p,M),_===null?y=C:_.sibling=C,_=C);return Ie&&Ss(g,M),y}for(C=a(g,C);M<v.length;M++)W=x(C,g,M,v[M],S),W!==null&&(e&&W.alternate!==null&&C.delete(W.key===null?M:W.key),p=i(W,p,M),_===null?y=W:_.sibling=W,_=W);return e&&C.forEach(function(Z){return t(g,Z)}),Ie&&Ss(g,M),y}function j(g,p,v,S){var y=Qa(v);if(typeof y!="function")throw Error(G(150));if(v=y.call(v),v==null)throw Error(G(151));for(var _=y=null,C=p,M=p=0,W=null,q=v.next();C!==null&&!q.done;M++,q=v.next()){C.index>M?(W=C,C=null):W=C.sibling;var Z=m(g,C,q.value,S);if(Z===null){C===null&&(C=W);break}e&&C&&Z.alternate===null&&t(g,C),p=i(Z,p,M),_===null?y=Z:_.sibling=Z,_=Z,C=W}if(q.done)return r(g,C),Ie&&Ss(g,M),y;if(C===null){for(;!q.done;M++,q=v.next())q=h(g,q.value,S),q!==null&&(p=i(q,p,M),_===null?y=q:_.sibling=q,_=q);return Ie&&Ss(g,M),y}for(C=a(g,C);!q.done;M++,q=v.next())q=x(C,g,M,q.value,S),q!==null&&(e&&q.alternate!==null&&C.delete(q.key===null?M:q.key),p=i(q,p,M),_===null?y=q:_.sibling=q,_=q);return e&&C.forEach(function(se){return t(g,se)}),Ie&&Ss(g,M),y}function N(g,p,v,S){if(typeof v=="object"&&v!==null&&v.type===na&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ti:e:{for(var y=v.key,_=p;_!==null;){if(_.key===y){if(y=v.type,y===na){if(_.tag===7){r(g,_.sibling),p=n(_,v.props.children),p.return=g,g=p;break e}}else if(_.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Gr&&V0(y)===_.type){r(g,_.sibling),p=n(_,v.props),p.ref=sn(g,_,v),p.return=g,g=p;break e}r(g,_);break}else t(g,_);_=_.sibling}v.type===na?(p=Fs(v.props.children,g.mode,S,v.key),p.return=g,g=p):(S=ho(v.type,v.key,v.props,null,g.mode,S),S.ref=sn(g,p,v),S.return=g,g=S)}return o(g);case aa:e:{for(_=v.key;p!==null;){if(p.key===_)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){r(g,p.sibling),p=n(p,v.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=nc(v,g.mode,S),p.return=g,g=p}return o(g);case Gr:return _=v._init,N(g,p,_(v._payload),S)}if(dn(v))return k(g,p,v,S);if(Qa(v))return j(g,p,v,S);Ui(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(r(g,p.sibling),p=n(p,v),p.return=g,g=p):(r(g,p),p=ac(v,g.mode,S),p.return=g,g=p),o(g)):r(g,p)}return N}var Da=vp(!0),wp=vp(!1),Do=xs(null),Mo=null,ma=null,Nu=null;function _u(){Nu=ma=Mo=null}function Su(e){var t=Do.current;Oe(Do),e._currentValue=t}function id(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Sa(e,t){Mo=e,Nu=ma=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Et=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Nu!==e)if(e={context:e,memoizedValue:t,next:null},ma===null){if(Mo===null)throw Error(G(308));ma=e,Mo.dependencies={lanes:0,firstContext:e}}else ma=ma.next=e;return t}var Ls=null;function Cu(e){Ls===null?Ls=[e]:Ls.push(e)}function bp(e,t,r,a){var n=t.interleaved;return n===null?(r.next=r,Cu(t)):(r.next=n.next,n.next=r),t.interleaved=r,Or(e,a)}function Or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Kr=!1;function Eu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function is(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ce&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Or(e,r)}return n=a.interleaved,n===null?(t.next=t,Cu(a)):(t.next=n.next,n.next=t),a.interleaved=t,Or(e,r)}function no(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,mu(e,r)}}function z0(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Lo(e,t,r,a){var n=e.updateQueue;Kr=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((a&m)===m){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=e,j=l;switch(m=t,x=r,j.tag){case 1:if(k=j.payload,typeof k=="function"){h=k.call(x,h,m);break e}h=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=j.payload,m=typeof k=="function"?k.call(x,h,m):k,m==null)break e;h=Be({},h,m);break e;case 2:Kr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=h):u=u.next=x,o|=m;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);qs|=o,e.lanes=o,e.memoizedState=h}}function B0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(G(191,n));n.call(a)}}}var mi={},wr=xs(mi),qn=xs(mi),Gn=xs(mi);function Rs(e){if(e===mi)throw Error(G(174));return e}function Tu(e,t){switch(Me(Gn,t),Me(qn,e),Me(wr,mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uc(t,e)}Oe(wr),Me(wr,t)}function Ma(){Oe(wr),Oe(qn),Oe(Gn)}function jp(e){Rs(Gn.current);var t=Rs(wr.current),r=Uc(t,e.type);t!==r&&(Me(qn,e),Me(wr,r))}function Pu(e){qn.current===e&&(Oe(wr),Oe(qn))}var Ue=xs(0);function Ro(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ql=[];function Au(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var io=Vr.ReactCurrentDispatcher,Zl=Vr.ReactCurrentBatchConfig,Ws=0,ze=null,Ze=null,st=null,Oo=!1,bn=!1,Kn=0,a1=0;function dt(){throw Error(G(321))}function Du(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!hr(e[r],t[r]))return!1;return!0}function Mu(e,t,r,a,n,i){if(Ws=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=e===null||e.memoizedState===null?l1:c1,e=r(a,n),bn){i=0;do{if(bn=!1,Kn=0,25<=i)throw Error(G(301));i+=1,st=Ze=null,t.updateQueue=null,io.current=d1,e=r(a,n)}while(bn)}if(io.current=$o,t=Ze!==null&&Ze.next!==null,Ws=0,st=Ze=ze=null,Oo=!1,t)throw Error(G(300));return e}function Lu(){var e=Kn!==0;return Kn=0,e}function pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?ze.memoizedState=st=e:st=st.next=e,st}function Jt(){if(Ze===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=st===null?ze.memoizedState:st.next;if(t!==null)st=t,Ze=e;else{if(e===null)throw Error(G(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?ze.memoizedState=st=e:st=st.next=e}return st}function Yn(e,t){return typeof t=="function"?t(e):t}function ec(e){var t=Jt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var a=Ze,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ws&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=a):c=c.next=h,ze.lanes|=u,qs|=u}d=d.next}while(d!==null&&d!==i);c===null?o=a:c.next=l,hr(a,t.memoizedState)||(Et=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){n=e;do i=n.lane,ze.lanes|=i,qs|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tc(e){var t=Jt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do i=e(i,o.action),o=o.next;while(o!==n);hr(i,t.memoizedState)||(Et=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function Np(){}function _p(e,t){var r=ze,a=Jt(),n=t(),i=!hr(a.memoizedState,n);if(i&&(a.memoizedState=n,Et=!0),a=a.queue,Ru(Ep.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||st!==null&&st.memoizedState.tag&1){if(r.flags|=2048,Xn(9,Cp.bind(null,r,a,n,t),void 0,null),at===null)throw Error(G(349));Ws&30||Sp(r,t,n)}return n}function Sp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cp(e,t,r,a){t.value=r,t.getSnapshot=a,Tp(t)&&Pp(e)}function Ep(e,t,r){return r(function(){Tp(t)&&Pp(e)})}function Tp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hr(e,r)}catch{return!0}}function Pp(e){var t=Or(e,1);t!==null&&ur(t,e,1,-1)}function H0(e){var t=pr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:e},t.queue=e,e=e.dispatch=o1.bind(null,ze,e),[t.memoizedState,e]}function Xn(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Ap(){return Jt().memoizedState}function oo(e,t,r,a){var n=pr();ze.flags|=e,n.memoizedState=Xn(1|t,r,void 0,a===void 0?null:a)}function ol(e,t,r,a){var n=Jt();a=a===void 0?null:a;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,a!==null&&Du(a,o.deps)){n.memoizedState=Xn(t,r,i,a);return}}ze.flags|=e,n.memoizedState=Xn(1|t,r,i,a)}function W0(e,t){return oo(8390656,8,e,t)}function Ru(e,t){return ol(2048,8,e,t)}function Dp(e,t){return ol(4,2,e,t)}function Mp(e,t){return ol(4,4,e,t)}function Lp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,r){return r=r!=null?r.concat([e]):null,ol(4,4,Lp.bind(null,t,e),r)}function Ou(){}function Op(e,t){var r=Jt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Du(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function $p(e,t){var r=Jt();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Du(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Ip(e,t,r){return Ws&21?(hr(r,t)||(r=Bg(),ze.lanes|=r,qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Et=!0),e.memoizedState=r)}function n1(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var a=Zl.transition;Zl.transition={};try{e(!1),t()}finally{Te=r,Zl.transition=a}}function Fp(){return Jt().memoizedState}function i1(e,t,r){var a=ls(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Up(e))Vp(t,r);else if(r=bp(e,t,r,a),r!==null){var n=bt();ur(r,e,a,n),zp(r,t,a)}}function o1(e,t,r){var a=ls(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Up(e))Vp(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(n.hasEagerState=!0,n.eagerState=l,hr(l,o)){var c=t.interleaved;c===null?(n.next=n,Cu(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=bp(e,t,n,a),r!==null&&(n=bt(),ur(r,e,a,n),zp(r,t,a))}}function Up(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Vp(e,t){bn=Oo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zp(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,mu(e,r)}}var $o={readContext:Xt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},l1={readContext:Xt,useCallback:function(e,t){return pr().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:W0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,oo(4194308,4,Lp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var r=pr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=pr();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=i1.bind(null,ze,e),[a.memoizedState,e]},useRef:function(e){var t=pr();return e={current:e},t.memoizedState=e},useState:H0,useDebugValue:Ou,useDeferredValue:function(e){return pr().memoizedState=e},useTransition:function(){var e=H0(!1),t=e[0];return e=n1.bind(null,e[1]),pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=ze,n=pr();if(Ie){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),at===null)throw Error(G(349));Ws&30||Sp(a,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,W0(Ep.bind(null,a,i,e),[e]),a.flags|=2048,Xn(9,Cp.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=pr(),t=at.identifierPrefix;if(Ie){var r=Dr,a=Ar;r=(a&~(1<<32-dr(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Kn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=a1++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c1={readContext:Xt,useCallback:Op,useContext:Xt,useEffect:Ru,useImperativeHandle:Rp,useInsertionEffect:Dp,useLayoutEffect:Mp,useMemo:$p,useReducer:ec,useRef:Ap,useState:function(){return ec(Yn)},useDebugValue:Ou,useDeferredValue:function(e){var t=Jt();return Ip(t,Ze.memoizedState,e)},useTransition:function(){var e=ec(Yn)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Np,useSyncExternalStore:_p,useId:Fp,unstable_isNewReconciler:!1},d1={readContext:Xt,useCallback:Op,useContext:Xt,useEffect:Ru,useImperativeHandle:Rp,useInsertionEffect:Dp,useLayoutEffect:Mp,useMemo:$p,useReducer:tc,useRef:Ap,useState:function(){return tc(Yn)},useDebugValue:Ou,useDeferredValue:function(e){var t=Jt();return Ze===null?t.memoizedState=e:Ip(t,Ze.memoizedState,e)},useTransition:function(){var e=tc(Yn)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Np,useSyncExternalStore:_p,useId:Fp,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function od(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Be({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ll={isMounted:function(e){return(e=e._reactInternals)?Ys(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=bt(),n=ls(e),i=Mr(a,n);i.payload=t,r!=null&&(i.callback=r),t=is(e,i,n),t!==null&&(ur(t,e,n,a),no(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=bt(),n=ls(e),i=Mr(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=is(e,i,n),t!==null&&(ur(t,e,n,a),no(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bt(),a=ls(e),n=Mr(r,a);n.tag=2,t!=null&&(n.callback=t),t=is(e,n,a),t!==null&&(ur(t,e,a,r),no(t,e,a))}};function q0(e,t,r,a,n,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!zn(r,a)||!zn(n,i):!0}function Bp(e,t,r){var a=!1,n=hs,i=t.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(n=At(t)?Bs:xt.current,a=t.contextTypes,i=(a=a!=null)?Pa(e,n):hs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ll,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function G0(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&ll.enqueueReplaceState(t,t.state,null)}function ld(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Eu(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Xt(i):(i=At(t)?Bs:xt.current,n.context=Pa(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(od(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&ll.enqueueReplaceState(n,n.state,null),Lo(e,r,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function La(e,t){try{var r="",a=t;do r+=Iw(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function rc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function cd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var u1=typeof WeakMap=="function"?WeakMap:Map;function Hp(e,t,r){r=Mr(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Fo||(Fo=!0,vd=a),cd(e,t)},r}function Wp(e,t,r){r=Mr(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){cd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){cd(e,t),typeof a!="function"&&(os===null?os=new Set([this]):os.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function K0(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new u1;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=_1.bind(null,e,t,r),t.then(e,e))}function Y0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function X0(e,t,r,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mr(-1,1),t.tag=2,is(r,t,1))),r.lanes|=1),e)}var h1=Vr.ReactCurrentOwner,Et=!1;function vt(e,t,r,a){t.child=e===null?wp(t,null,r,a):Da(t,e.child,r,a)}function J0(e,t,r,a,n){r=r.render;var i=t.ref;return Sa(t,n),a=Mu(e,t,r,a,i,n),r=Lu(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,$r(e,t,n)):(Ie&&r&&bu(t),t.flags|=1,vt(e,t,a,n),t.child)}function Q0(e,t,r,a,n){if(e===null){var i=r.type;return typeof i=="function"&&!Hu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,qp(e,t,i,a,n)):(e=ho(r.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:zn,r(o,a)&&e.ref===t.ref)return $r(e,t,n)}return t.flags|=1,e=cs(i,a),e.ref=t.ref,e.return=t,t.child=e}function qp(e,t,r,a,n){if(e!==null){var i=e.memoizedProps;if(zn(i,a)&&e.ref===t.ref)if(Et=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(Et=!0);else return t.lanes=e.lanes,$r(e,t,n)}return dd(e,t,r,a,n)}function Gp(e,t,r){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(ga,Mt),Mt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(ga,Mt),Mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Me(ga,Mt),Mt|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,Me(ga,Mt),Mt|=a;return vt(e,t,n,r),t.child}function Kp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dd(e,t,r,a,n){var i=At(r)?Bs:xt.current;return i=Pa(t,i),Sa(t,n),r=Mu(e,t,r,a,i,n),a=Lu(),e!==null&&!Et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,$r(e,t,n)):(Ie&&a&&bu(t),t.flags|=1,vt(e,t,r,n),t.child)}function Z0(e,t,r,a,n){if(At(r)){var i=!0;To(t)}else i=!1;if(Sa(t,n),t.stateNode===null)lo(e,t),Bp(t,r,a),ld(t,r,a,n),a=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Xt(d):(d=At(r)?Bs:xt.current,d=Pa(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==d)&&G0(t,o,a,d),Kr=!1;var m=t.memoizedState;o.state=m,Lo(t,a,o,n),c=t.memoizedState,l!==a||m!==c||Pt.current||Kr?(typeof u=="function"&&(od(t,r,u,a),c=t.memoizedState),(l=Kr||q0(t,r,l,a,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=d,a=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,kp(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ar(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Xt(c):(c=At(r)?Bs:xt.current,c=Pa(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&G0(t,o,a,c),Kr=!1,m=t.memoizedState,o.state=m,Lo(t,a,o,n);var k=t.memoizedState;l!==h||m!==k||Pt.current||Kr?(typeof x=="function"&&(od(t,r,x,a),k=t.memoizedState),(d=Kr||q0(t,r,d,a,m,k,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,k,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=k),o.props=a,o.state=k,o.context=c,a=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return ud(e,t,r,a,i,n)}function ud(e,t,r,a,n,i){Kp(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return n&&I0(t,r,!1),$r(e,t,i);a=t.stateNode,h1.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Da(t,e.child,null,i),t.child=Da(t,null,l,i)):vt(e,t,l,i),t.memoizedState=a.state,n&&I0(t,r,!0),t.child}function Yp(e){var t=e.stateNode;t.pendingContext?$0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$0(e,t.context,!1),Tu(e,t.containerInfo)}function em(e,t,r,a,n){return Aa(),ju(n),t.flags|=256,vt(e,t,r,a),t.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function md(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xp(e,t,r){var a=t.pendingProps,n=Ue.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Me(Ue,n&1),e===null)return nd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ul(o,a,0,null),e=Fs(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=md(r),t.memoizedState=hd,e):$u(t,o));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return m1(e,t,o,a,l,n,r);if(i){i=a.fallback,o=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=cs(n,c),a.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=cs(l,i):(i=Fs(i,o,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?md(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=hd,a}return i=e.child,e=i.sibling,a=cs(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function $u(e,t){return t=ul({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vi(e,t,r,a){return a!==null&&ju(a),Da(t,e.child,null,r),e=$u(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function m1(e,t,r,a,n,i,o){if(r)return t.flags&256?(t.flags&=-257,a=rc(Error(G(422))),Vi(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=ul({mode:"visible",children:a.children},n,0,null),i=Fs(i,n,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Da(t,e.child,null,o),t.child.memoizedState=md(o),t.memoizedState=hd,i);if(!(t.mode&1))return Vi(e,t,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var l=a.dgst;return a=l,i=Error(G(419)),a=rc(i,a,void 0),Vi(e,t,o,a)}if(l=(o&e.childLanes)!==0,Et||l){if(a=at,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Or(e,n),ur(a,e,n,-1))}return Bu(),a=rc(Error(G(421))),Vi(e,t,o,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=S1.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,Lt=ns(n.nextSibling),Rt=t,Ie=!0,or=null,e!==null&&(Vt[zt++]=Ar,Vt[zt++]=Dr,Vt[zt++]=Hs,Ar=e.id,Dr=e.overflow,Hs=t),t=$u(t,a.children),t.flags|=4096,t)}function tm(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),id(e.return,t,r)}function sc(e,t,r,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function Jp(e,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(vt(e,t,a.children,r),a=Ue.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tm(e,r,t);else if(e.tag===19)tm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Me(Ue,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ro(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),sc(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ro(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}sc(t,!0,r,null,i);break;case"together":sc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $r(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=cs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function f1(e,t,r){switch(t.tag){case 3:Yp(t),Aa();break;case 5:jp(t);break;case 1:At(t.type)&&To(t);break;case 4:Tu(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Me(Do,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Me(Ue,Ue.current&1),t.flags|=128,null):r&t.child.childLanes?Xp(e,t,r):(Me(Ue,Ue.current&1),e=$r(e,t,r),e!==null?e.sibling:null);Me(Ue,Ue.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return Jp(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Me(Ue,Ue.current),a)break;return null;case 22:case 23:return t.lanes=0,Gp(e,t,r)}return $r(e,t,r)}var Qp,fd,Zp,ex;Qp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fd=function(){};Zp=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Rs(wr.current);var i=null;switch(r){case"input":n=Oc(e,n),a=Oc(e,a),i=[];break;case"select":n=Be({},n,{value:void 0}),a=Be({},a,{value:void 0}),i=[];break;case"textarea":n=Fc(e,n),a=Fc(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Co)}Vc(r,a);var o;r=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Rn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Rn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};ex=function(e,t,r,a){r!==a&&(t.flags|=4)};function an(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function g1(e,t,r){var a=t.pendingProps;switch(ku(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return At(t.type)&&Eo(),ut(t),null;case 3:return a=t.stateNode,Ma(),Oe(Pt),Oe(xt),Au(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,or!==null&&(kd(or),or=null))),fd(e,t),ut(t),null;case 5:Pu(t);var n=Rs(Gn.current);if(r=t.type,e!==null&&t.stateNode!=null)Zp(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(G(166));return ut(t),null}if(e=Rs(wr.current),Fi(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[yr]=t,a[Wn]=i,e=(t.mode&1)!==0,r){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(n=0;n<hn.length;n++)Re(hn[n],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":d0(a,i),Re("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Re("invalid",a);break;case"textarea":h0(a,i),Re("invalid",a)}Vc(r,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?a.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ii(a.textContent,l,e),n=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ii(a.textContent,l,e),n=["children",""+l]):Rn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",a)}switch(r){case"input":Pi(a),u0(a,i,!0);break;case"textarea":Pi(a),m0(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Co)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Eg(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),r==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[yr]=t,e[Wn]=a,Qp(e,t,!1,!1),t.stateNode=e;e:{switch(o=zc(r,a),r){case"dialog":Re("cancel",e),Re("close",e),n=a;break;case"iframe":case"object":case"embed":Re("load",e),n=a;break;case"video":case"audio":for(n=0;n<hn.length;n++)Re(hn[n],e);n=a;break;case"source":Re("error",e),n=a;break;case"img":case"image":case"link":Re("error",e),Re("load",e),n=a;break;case"details":Re("toggle",e),n=a;break;case"input":d0(e,a),n=Oc(e,a),Re("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Be({},a,{value:void 0}),Re("invalid",e);break;case"textarea":h0(e,a),n=Fc(e,a),Re("invalid",e);break;default:n=a}Vc(r,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ag(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tg(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&On(e,c):typeof c=="number"&&On(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",e):c!=null&&ou(e,i,c,o))}switch(r){case"input":Pi(e),u0(e,a,!1);break;case"textarea":Pi(e),m0(e);break;case"option":a.value!=null&&e.setAttribute("value",""+us(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?ka(e,!!a.multiple,i,!1):a.defaultValue!=null&&ka(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Co)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)ex(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(G(166));if(r=Rs(Gn.current),Rs(wr.current),Fi(t)){if(a=t.stateNode,r=t.memoizedProps,a[yr]=t,(i=a.nodeValue!==r)&&(e=Rt,e!==null))switch(e.tag){case 3:Ii(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ii(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[yr]=t,t.stateNode=a}return ut(t),null;case 13:if(Oe(Ue),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Lt!==null&&t.mode&1&&!(t.flags&128))yp(),Aa(),t.flags|=98560,i=!1;else if(i=Fi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[yr]=t}else Aa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),i=!1}else or!==null&&(kd(or),or=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?et===0&&(et=3):Bu())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Ma(),fd(e,t),e===null&&Bn(t.stateNode.containerInfo),ut(t),null;case 10:return Su(t.type._context),ut(t),null;case 17:return At(t.type)&&Eo(),ut(t),null;case 19:if(Oe(Ue),i=t.memoizedState,i===null)return ut(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)an(i,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ro(e),o!==null){for(t.flags|=128,an(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Me(Ue,Ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ke()>Ra&&(t.flags|=128,a=!0,an(i,!1),t.lanes=4194304)}else{if(!a)if(e=Ro(o),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),an(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return ut(t),null}else 2*Ke()-i.renderingStartTime>Ra&&r!==1073741824&&(t.flags|=128,a=!0,an(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,r=Ue.current,Me(Ue,a?r&1|2:r&1),t):(ut(t),null);case 22:case 23:return zu(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Mt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function p1(e,t){switch(ku(t),t.tag){case 1:return At(t.type)&&Eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ma(),Oe(Pt),Oe(xt),Au(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pu(t),null;case 13:if(Oe(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Ue),null;case 4:return Ma(),null;case 10:return Su(t.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var zi=!1,gt=!1,x1=typeof WeakSet=="function"?WeakSet:Set,ie=null;function fa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){qe(e,t,a)}else r.current=null}function gd(e,t,r){try{r()}catch(a){qe(e,t,a)}}var rm=!1;function y1(e,t){if(Qc=No,e=np(),wu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var x;h!==r||n!==0&&h.nodeType!==3||(l=o+n),h!==i||a!==0&&h.nodeType!==3||(c=o+a),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===e)break t;if(m===r&&++d===n&&(l=o),m===i&&++u===a&&(c=o),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zc={focusedElem:e,selectionRange:r},No=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var j=k.memoizedProps,N=k.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?j:ar(t.type,j),N);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(S){qe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return k=rm,rm=!1,k}function kn(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&gd(t,r,i)}n=n.next}while(n!==a)}}function cl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function pd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function tx(e){var t=e.alternate;t!==null&&(e.alternate=null,tx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yr],delete t[Wn],delete t[rd],delete t[e1],delete t[t1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rx(e){return e.tag===5||e.tag===3||e.tag===4}function sm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xd(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Co));else if(a!==4&&(e=e.child,e!==null))for(xd(e,t,r),e=e.sibling;e!==null;)xd(e,t,r),e=e.sibling}function yd(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(yd(e,t,r),e=e.sibling;e!==null;)yd(e,t,r),e=e.sibling}var nt=null,nr=!1;function Hr(e,t,r){for(r=r.child;r!==null;)sx(e,t,r),r=r.sibling}function sx(e,t,r){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(tl,r)}catch{}switch(r.tag){case 5:gt||fa(r,t);case 6:var a=nt,n=nr;nt=null,Hr(e,t,r),nt=a,nr=n,nt!==null&&(nr?(e=nt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(nr?(e=nt,r=r.stateNode,e.nodeType===8?Xl(e.parentNode,r):e.nodeType===1&&Xl(e,r),Un(e)):Xl(nt,r.stateNode));break;case 4:a=nt,n=nr,nt=r.stateNode.containerInfo,nr=!0,Hr(e,t,r),nt=a,nr=n;break;case 0:case 11:case 14:case 15:if(!gt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gd(r,t,o),n=n.next}while(n!==a)}Hr(e,t,r);break;case 1:if(!gt&&(fa(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(l){qe(r,t,l)}Hr(e,t,r);break;case 21:Hr(e,t,r);break;case 22:r.mode&1?(gt=(a=gt)||r.memoizedState!==null,Hr(e,t,r),gt=a):Hr(e,t,r);break;default:Hr(e,t,r)}}function am(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new x1),t.forEach(function(a){var n=C1.bind(null,e,a);r.has(a)||(r.add(a),a.then(n,n))})}}function tr(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:nt=l.stateNode,nr=!1;break e;case 3:nt=l.stateNode.containerInfo,nr=!0;break e;case 4:nt=l.stateNode.containerInfo,nr=!0;break e}l=l.return}if(nt===null)throw Error(G(160));sx(i,o,n),nt=null,nr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){qe(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ax(t,e),t=t.sibling}function ax(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tr(t,e),fr(e),a&4){try{kn(3,e,e.return),cl(3,e)}catch(j){qe(e,e.return,j)}try{kn(5,e,e.return)}catch(j){qe(e,e.return,j)}}break;case 1:tr(t,e),fr(e),a&512&&r!==null&&fa(r,r.return);break;case 5:if(tr(t,e),fr(e),a&512&&r!==null&&fa(r,r.return),e.flags&32){var n=e.stateNode;try{On(n,"")}catch(j){qe(e,e.return,j)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Sg(n,i),zc(l,o);var d=zc(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Ag(n,h):u==="dangerouslySetInnerHTML"?Tg(n,h):u==="children"?On(n,h):ou(n,u,h,d)}switch(l){case"input":$c(n,i);break;case"textarea":Cg(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ka(n,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?ka(n,!!i.multiple,i.defaultValue,!0):ka(n,!!i.multiple,i.multiple?[]:"",!1))}n[Wn]=i}catch(j){qe(e,e.return,j)}}break;case 6:if(tr(t,e),fr(e),a&4){if(e.stateNode===null)throw Error(G(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(j){qe(e,e.return,j)}}break;case 3:if(tr(t,e),fr(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Un(t.containerInfo)}catch(j){qe(e,e.return,j)}break;case 4:tr(t,e),fr(e);break;case 13:tr(t,e),fr(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Uu=Ke())),a&4&&am(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(gt=(d=gt)||u,tr(t,e),gt=d):tr(t,e),fr(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ie=e,u=e.child;u!==null;){for(h=ie=u;ie!==null;){switch(m=ie,x=m.child,m.tag){case 0:case 11:case 14:case 15:kn(4,m,m.return);break;case 1:fa(m,m.return);var k=m.stateNode;if(typeof k.componentWillUnmount=="function"){a=m,r=m.return;try{t=a,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(j){qe(a,r,j)}}break;case 5:fa(m,m.return);break;case 22:if(m.memoizedState!==null){im(h);continue}}x!==null?(x.return=m,ie=x):im(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Pg("display",o))}catch(j){qe(e,e.return,j)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(j){qe(e,e.return,j)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tr(t,e),fr(e),a&4&&am(e);break;case 21:break;default:tr(t,e),fr(e)}}function fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(rx(r)){var a=r;break e}r=r.return}throw Error(G(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(On(n,""),a.flags&=-33);var i=sm(e);yd(e,i,n);break;case 3:case 4:var o=a.stateNode.containerInfo,l=sm(e);xd(e,l,o);break;default:throw Error(G(161))}}catch(c){qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v1(e,t,r){ie=e,nx(e)}function nx(e,t,r){for(var a=(e.mode&1)!==0;ie!==null;){var n=ie,i=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||zi;if(!o){var l=n.alternate,c=l!==null&&l.memoizedState!==null||gt;l=zi;var d=gt;if(zi=o,(gt=c)&&!d)for(ie=n;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?om(n):c!==null?(c.return=o,ie=c):om(n);for(;i!==null;)ie=i,nx(i),i=i.sibling;ie=n,zi=l,gt=d}nm(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ie=i):nm(e)}}function nm(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||cl(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!gt)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:ar(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&B0(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}B0(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Un(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}gt||t.flags&512&&pd(t)}catch(m){qe(t,t.return,m)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function im(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function om(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{cl(4,t)}catch(c){qe(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){qe(t,n,c)}}var i=t.return;try{pd(t)}catch(c){qe(t,i,c)}break;case 5:var o=t.return;try{pd(t)}catch(c){qe(t,o,c)}}}catch(c){qe(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var w1=Math.ceil,Io=Vr.ReactCurrentDispatcher,Iu=Vr.ReactCurrentOwner,Gt=Vr.ReactCurrentBatchConfig,Ce=0,at=null,Xe=null,ot=0,Mt=0,ga=xs(0),et=0,Jn=null,qs=0,dl=0,Fu=0,jn=null,St=null,Uu=0,Ra=1/0,Cr=null,Fo=!1,vd=null,os=null,Bi=!1,es=null,Uo=0,Nn=0,wd=null,co=-1,uo=0;function bt(){return Ce&6?Ke():co!==-1?co:co=Ke()}function ls(e){return e.mode&1?Ce&2&&ot!==0?ot&-ot:s1.transition!==null?(uo===0&&(uo=Bg()),uo):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Xg(e.type)),e):1}function ur(e,t,r,a){if(50<Nn)throw Nn=0,wd=null,Error(G(185));di(e,r,a),(!(Ce&2)||e!==at)&&(e===at&&(!(Ce&2)&&(dl|=r),et===4&&Jr(e,ot)),Dt(e,a),r===1&&Ce===0&&!(t.mode&1)&&(Ra=Ke()+500,il&&ys()))}function Dt(e,t){var r=e.callbackNode;sb(e,t);var a=jo(e,e===at?ot:0);if(a===0)r!==null&&p0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&p0(r),t===1)e.tag===0?r1(lm.bind(null,e)):gp(lm.bind(null,e)),Qb(function(){!(Ce&6)&&ys()}),r=null;else{switch(Hg(a)){case 1:r=hu;break;case 4:r=Vg;break;case 16:r=ko;break;case 536870912:r=zg;break;default:r=ko}r=mx(r,ix.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ix(e,t){if(co=-1,uo=0,Ce&6)throw Error(G(327));var r=e.callbackNode;if(Ca()&&e.callbackNode!==r)return null;var a=jo(e,e===at?ot:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Vo(e,a);else{t=a;var n=Ce;Ce|=2;var i=lx();(at!==e||ot!==t)&&(Cr=null,Ra=Ke()+500,Is(e,t));do try{j1();break}catch(l){ox(e,l)}while(!0);_u(),Io.current=i,Ce=n,Xe!==null?t=0:(at=null,ot=0,t=et)}if(t!==0){if(t===2&&(n=Gc(e),n!==0&&(a=n,t=bd(e,n))),t===1)throw r=Jn,Is(e,0),Jr(e,a),Dt(e,Ke()),r;if(t===6)Jr(e,a);else{if(n=e.current.alternate,!(a&30)&&!b1(n)&&(t=Vo(e,a),t===2&&(i=Gc(e),i!==0&&(a=i,t=bd(e,i))),t===1))throw r=Jn,Is(e,0),Jr(e,a),Dt(e,Ke()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(G(345));case 2:Cs(e,St,Cr);break;case 3:if(Jr(e,a),(a&130023424)===a&&(t=Uu+500-Ke(),10<t)){if(jo(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){bt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=td(Cs.bind(null,e,St,Cr),t);break}Cs(e,St,Cr);break;case 4:if(Jr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-dr(a);i=1<<o,o=t[o],o>n&&(n=o),a&=~i}if(a=n,a=Ke()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*w1(a/1960))-a,10<a){e.timeoutHandle=td(Cs.bind(null,e,St,Cr),a);break}Cs(e,St,Cr);break;case 5:Cs(e,St,Cr);break;default:throw Error(G(329))}}}return Dt(e,Ke()),e.callbackNode===r?ix.bind(null,e):null}function bd(e,t){var r=jn;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),e=Vo(e,t),e!==2&&(t=St,St=r,t!==null&&kd(t)),e}function kd(e){St===null?St=e:St.push.apply(St,e)}function b1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!hr(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jr(e,t){for(t&=~Fu,t&=~dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-dr(t),a=1<<r;e[r]=-1,t&=~a}}function lm(e){if(Ce&6)throw Error(G(327));Ca();var t=jo(e,0);if(!(t&1))return Dt(e,Ke()),null;var r=Vo(e,t);if(e.tag!==0&&r===2){var a=Gc(e);a!==0&&(t=a,r=bd(e,a))}if(r===1)throw r=Jn,Is(e,0),Jr(e,t),Dt(e,Ke()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cs(e,St,Cr),Dt(e,Ke()),null}function Vu(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(Ra=Ke()+500,il&&ys())}}function Gs(e){es!==null&&es.tag===0&&!(Ce&6)&&Ca();var t=Ce;Ce|=1;var r=Gt.transition,a=Te;try{if(Gt.transition=null,Te=1,e)return e()}finally{Te=a,Gt.transition=r,Ce=t,!(Ce&6)&&ys()}}function zu(){Mt=ga.current,Oe(ga)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Jb(r)),Xe!==null)for(r=Xe.return;r!==null;){var a=r;switch(ku(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Eo();break;case 3:Ma(),Oe(Pt),Oe(xt),Au();break;case 5:Pu(a);break;case 4:Ma();break;case 13:Oe(Ue);break;case 19:Oe(Ue);break;case 10:Su(a.type._context);break;case 22:case 23:zu()}r=r.return}if(at=e,Xe=e=cs(e.current,null),ot=Mt=t,et=0,Jn=null,Fu=dl=qs=0,St=jn=null,Ls!==null){for(t=0;t<Ls.length;t++)if(r=Ls[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var o=i.next;i.next=n,a.next=o}r.pending=a}Ls=null}return e}function ox(e,t){do{var r=Xe;try{if(_u(),io.current=$o,Oo){for(var a=ze.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}Oo=!1}if(Ws=0,st=Ze=ze=null,bn=!1,Kn=0,Iu.current=null,r===null||r.return===null){et=1,Jn=t,Xe=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Y0(o);if(x!==null){x.flags&=-257,X0(x,o,l,i,t),x.mode&1&&K0(i,d,t),t=x,c=d;var k=t.updateQueue;if(k===null){var j=new Set;j.add(c),t.updateQueue=j}else k.add(c);break e}else{if(!(t&1)){K0(i,d,t),Bu();break e}c=Error(G(426))}}else if(Ie&&l.mode&1){var N=Y0(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),X0(N,o,l,i,t),ju(La(c,l));break e}}i=c=La(c,l),et!==4&&(et=2),jn===null?jn=[i]:jn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Hp(i,c,t);z0(i,g);break e;case 1:l=c;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(os===null||!os.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Wp(i,l,t);z0(i,S);break e}}i=i.return}while(i!==null)}dx(r)}catch(y){t=y,Xe===r&&r!==null&&(Xe=r=r.return);continue}break}while(!0)}function lx(){var e=Io.current;return Io.current=$o,e===null?$o:e}function Bu(){(et===0||et===3||et===2)&&(et=4),at===null||!(qs&268435455)&&!(dl&268435455)||Jr(at,ot)}function Vo(e,t){var r=Ce;Ce|=2;var a=lx();(at!==e||ot!==t)&&(Cr=null,Is(e,t));do try{k1();break}catch(n){ox(e,n)}while(!0);if(_u(),Ce=r,Io.current=a,Xe!==null)throw Error(G(261));return at=null,ot=0,et}function k1(){for(;Xe!==null;)cx(Xe)}function j1(){for(;Xe!==null&&!Kw();)cx(Xe)}function cx(e){var t=hx(e.alternate,e,Mt);e.memoizedProps=e.pendingProps,t===null?dx(e):Xe=t,Iu.current=null}function dx(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=p1(r,t),r!==null){r.flags&=32767,Xe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Xe=null;return}}else if(r=g1(r,t,Mt),r!==null){Xe=r;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);et===0&&(et=5)}function Cs(e,t,r){var a=Te,n=Gt.transition;try{Gt.transition=null,Te=1,N1(e,t,r,a)}finally{Gt.transition=n,Te=a}return null}function N1(e,t,r,a){do Ca();while(es!==null);if(Ce&6)throw Error(G(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ab(e,i),e===at&&(Xe=at=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bi||(Bi=!0,mx(ko,function(){return Ca(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=Te;Te=1;var l=Ce;Ce|=4,Iu.current=null,y1(e,r),ax(r,e),Hb(Zc),No=!!Qc,Zc=Qc=null,e.current=r,v1(r),Yw(),Ce=l,Te=o,Gt.transition=i}else e.current=r;if(Bi&&(Bi=!1,es=e,Uo=n),i=e.pendingLanes,i===0&&(os=null),Qw(r.stateNode),Dt(e,Ke()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Fo)throw Fo=!1,e=vd,vd=null,e;return Uo&1&&e.tag!==0&&Ca(),i=e.pendingLanes,i&1?e===wd?Nn++:(Nn=0,wd=e):Nn=0,ys(),null}function Ca(){if(es!==null){var e=Hg(Uo),t=Gt.transition,r=Te;try{if(Gt.transition=null,Te=16>e?16:e,es===null)var a=!1;else{if(e=es,es=null,Uo=0,Ce&6)throw Error(G(331));var n=Ce;for(Ce|=4,ie=e.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:kn(8,u,i)}var h=u.child;if(h!==null)h.return=u,ie=h;else for(;ie!==null;){u=ie;var m=u.sibling,x=u.return;if(tx(u),u===d){ie=null;break}if(m!==null){m.return=x,ie=m;break}ie=x}}}var k=i.alternate;if(k!==null){var j=k.child;if(j!==null){k.child=null;do{var N=j.sibling;j.sibling=null,j=N}while(j!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ie=g;break e}ie=i.return}}var p=e.current;for(ie=p;ie!==null;){o=ie;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ie=v;else e:for(o=p;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cl(9,l)}}catch(y){qe(l,l.return,y)}if(l===o){ie=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ie=S;break e}ie=l.return}}if(Ce=n,ys(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(tl,e)}catch{}a=!0}return a}finally{Te=r,Gt.transition=t}}return!1}function cm(e,t,r){t=La(r,t),t=Hp(e,t,1),e=is(e,t,1),t=bt(),e!==null&&(di(e,1,t),Dt(e,t))}function qe(e,t,r){if(e.tag===3)cm(e,e,r);else for(;t!==null;){if(t.tag===3){cm(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(os===null||!os.has(a))){e=La(r,e),e=Wp(t,e,1),t=is(t,e,1),e=bt(),t!==null&&(di(t,1,e),Dt(t,e));break}}t=t.return}}function _1(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&r,at===e&&(ot&r)===r&&(et===4||et===3&&(ot&130023424)===ot&&500>Ke()-Uu?Is(e,0):Fu|=r),Dt(e,t)}function ux(e,t){t===0&&(e.mode&1?(t=Mi,Mi<<=1,!(Mi&130023424)&&(Mi=4194304)):t=1);var r=bt();e=Or(e,t),e!==null&&(di(e,t,r),Dt(e,r))}function S1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ux(e,r)}function C1(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(G(314))}a!==null&&a.delete(t),ux(e,r)}var hx;hx=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pt.current)Et=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Et=!1,f1(e,t,r);Et=!!(e.flags&131072)}else Et=!1,Ie&&t.flags&1048576&&pp(t,Ao,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;lo(e,t),e=t.pendingProps;var n=Pa(t,xt.current);Sa(t,r),n=Mu(null,t,a,e,n,r);var i=Lu();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(a)?(i=!0,To(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Eu(t),n.updater=ll,t.stateNode=n,n._reactInternals=t,ld(t,a,e,r),t=ud(null,t,a,!0,i,r)):(t.tag=0,Ie&&i&&bu(t),vt(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(lo(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=T1(a),e=ar(a,e),n){case 0:t=dd(null,t,a,e,r);break e;case 1:t=Z0(null,t,a,e,r);break e;case 11:t=J0(null,t,a,e,r);break e;case 14:t=Q0(null,t,a,ar(a.type,e),r);break e}throw Error(G(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ar(a,n),dd(e,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ar(a,n),Z0(e,t,a,n,r);case 3:e:{if(Yp(t),e===null)throw Error(G(387));a=t.pendingProps,i=t.memoizedState,n=i.element,kp(e,t),Lo(t,a,null,r);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=La(Error(G(423)),t),t=em(e,t,a,r,n);break e}else if(a!==n){n=La(Error(G(424)),t),t=em(e,t,a,r,n);break e}else for(Lt=ns(t.stateNode.containerInfo.firstChild),Rt=t,Ie=!0,or=null,r=wp(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Aa(),a===n){t=$r(e,t,r);break e}vt(e,t,a,r)}t=t.child}return t;case 5:return jp(t),e===null&&nd(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,o=n.children,ed(a,n)?o=null:i!==null&&ed(a,i)&&(t.flags|=32),Kp(e,t),vt(e,t,o,r),t.child;case 6:return e===null&&nd(t),null;case 13:return Xp(e,t,r);case 4:return Tu(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Da(t,null,a,r):vt(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ar(a,n),J0(e,t,a,n,r);case 7:return vt(e,t,t.pendingProps,r),t.child;case 8:return vt(e,t,t.pendingProps.children,r),t.child;case 12:return vt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,Me(Do,a._currentValue),a._currentValue=o,i!==null)if(hr(i.value,o)){if(i.children===n.children&&!Pt.current){t=$r(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Mr(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),id(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),id(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Sa(t,r),n=Xt(n),a=a(n),t.flags|=1,vt(e,t,a,r),t.child;case 14:return a=t.type,n=ar(a,t.pendingProps),n=ar(a.type,n),Q0(e,t,a,n,r);case 15:return qp(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:ar(a,n),lo(e,t),t.tag=1,At(a)?(e=!0,To(t)):e=!1,Sa(t,r),Bp(t,a,n),ld(t,a,n,r),ud(null,t,a,!0,e,r);case 19:return Jp(e,t,r);case 22:return Gp(e,t,r)}throw Error(G(156,t.tag))};function mx(e,t){return Ug(e,t)}function E1(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,r,a){return new E1(e,t,r,a)}function Hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T1(e){if(typeof e=="function")return Hu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cu)return 11;if(e===du)return 14}return 2}function cs(e,t){var r=e.alternate;return r===null?(r=Ht(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ho(e,t,r,a,n,i){var o=2;if(a=e,typeof e=="function")Hu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case na:return Fs(r.children,n,i,t);case lu:o=8,n|=8;break;case Dc:return e=Ht(12,r,t,n|2),e.elementType=Dc,e.lanes=i,e;case Mc:return e=Ht(13,r,t,n),e.elementType=Mc,e.lanes=i,e;case Lc:return e=Ht(19,r,t,n),e.elementType=Lc,e.lanes=i,e;case jg:return ul(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bg:o=10;break e;case kg:o=9;break e;case cu:o=11;break e;case du:o=14;break e;case Gr:o=16,a=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Ht(o,r,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function Fs(e,t,r,a){return e=Ht(7,e,a,t),e.lanes=r,e}function ul(e,t,r,a){return e=Ht(22,e,a,t),e.elementType=jg,e.lanes=r,e.stateNode={isHidden:!1},e}function ac(e,t,r){return e=Ht(6,e,null,t),e.lanes=r,e}function nc(e,t,r){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P1(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Wu(e,t,r,a,n,i,o,l,c){return e=new P1(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(i),e}function A1(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aa,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function fx(e){if(!e)return hs;e=e._reactInternals;e:{if(Ys(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(At(r))return fp(e,r,t)}return t}function gx(e,t,r,a,n,i,o,l,c){return e=Wu(r,a,!0,e,n,i,o,l,c),e.context=fx(null),r=e.current,a=bt(),n=ls(r),i=Mr(a,n),i.callback=t??null,is(r,i,n),e.current.lanes=n,di(e,n,a),Dt(e,a),e}function hl(e,t,r,a){var n=t.current,i=bt(),o=ls(n);return r=fx(r),t.context===null?t.context=r:t.pendingContext=r,t=Mr(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=is(n,t,o),e!==null&&(ur(e,n,o,i),no(e,n,o)),o}function zo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qu(e,t){dm(e,t),(e=e.alternate)&&dm(e,t)}function D1(){return null}var px=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}ml.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));hl(e,t,null,null)};ml.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gs(function(){hl(null,e,null,null)}),t[Rr]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gg();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xr.length&&t!==0&&t<Xr[r].priority;r++);Xr.splice(r,0,e),r===0&&Yg(e)}};function Ku(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function um(){}function M1(e,t,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var d=zo(o);i.call(d)}}var o=gx(t,a,e,0,null,!1,!1,"",um);return e._reactRootContainer=o,e[Rr]=o.current,Bn(e.nodeType===8?e.parentNode:e),Gs(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var l=a;a=function(){var d=zo(c);l.call(d)}}var c=Wu(e,0,!1,null,null,!1,!1,"",um);return e._reactRootContainer=c,e[Rr]=c.current,Bn(e.nodeType===8?e.parentNode:e),Gs(function(){hl(t,c,r,a)}),c}function gl(e,t,r,a,n){var i=r._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var l=n;n=function(){var c=zo(o);l.call(c)}}hl(t,o,e,n)}else o=M1(r,t,e,n,a);return zo(o)}Wg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=un(t.pendingLanes);r!==0&&(mu(t,r|1),Dt(t,Ke()),!(Ce&6)&&(Ra=Ke()+500,ys()))}break;case 13:Gs(function(){var a=Or(e,1);if(a!==null){var n=bt();ur(a,e,1,n)}}),qu(e,1)}};fu=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var r=bt();ur(t,e,134217728,r)}qu(e,134217728)}};qg=function(e){if(e.tag===13){var t=ls(e),r=Or(e,t);if(r!==null){var a=bt();ur(r,e,t,a)}qu(e,t)}};Gg=function(){return Te};Kg=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};Hc=function(e,t,r){switch(t){case"input":if($c(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=nl(a);if(!n)throw Error(G(90));_g(a),$c(a,n)}}}break;case"textarea":Cg(e,r);break;case"select":t=r.value,t!=null&&ka(e,!!r.multiple,t,!1)}};Lg=Vu;Rg=Gs;var L1={usingClientEntryPoint:!1,Events:[hi,ca,nl,Dg,Mg,Vu]},nn={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R1={bundleType:nn.bundleType,version:nn.version,rendererPackageName:nn.rendererPackageName,rendererConfig:nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ig(e),e===null?null:e.stateNode},findFiberByHostInstance:nn.findFiberByHostInstance||D1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hi.isDisabled&&Hi.supportsFiber)try{tl=Hi.inject(R1),vr=Hi}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L1;$t.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ku(t))throw Error(G(200));return A1(e,t,null,r)};$t.createRoot=function(e,t){if(!Ku(e))throw Error(G(299));var r=!1,a="",n=px;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Wu(e,1,!1,null,null,r,!1,a,n),e[Rr]=t.current,Bn(e.nodeType===8?e.parentNode:e),new Gu(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Ig(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return Gs(e)};$t.hydrate=function(e,t,r){if(!fl(t))throw Error(G(200));return gl(null,e,t,!0,r)};$t.hydrateRoot=function(e,t,r){if(!Ku(e))throw Error(G(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",o=px;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gx(t,null,e,1,r??null,n,!1,i,o),e[Rr]=t.current,Bn(e),a)for(e=0;e<a.length;e++)r=a[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new ml(t)};$t.render=function(e,t,r){if(!fl(t))throw Error(G(200));return gl(null,e,t,!1,r)};$t.unmountComponentAtNode=function(e){if(!fl(e))throw Error(G(40));return e._reactRootContainer?(Gs(function(){gl(null,null,e,!1,function(){e._reactRootContainer=null,e[Rr]=null})}),!0):!1};$t.unstable_batchedUpdates=Vu;$t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!fl(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return gl(e,t,r,!1,a)};$t.version="18.3.1-next-f1338f8080-20240426";function xx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xx)}catch(e){console.error(e)}}xx(),xg.exports=$t;var xr=xg.exports,yx,hm=xr;yx=hm.createRoot,hm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qn(){return Qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Qn.apply(this,arguments)}var ts;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ts||(ts={}));const mm="popstate";function O1(e){e===void 0&&(e={});function t(a,n){let{pathname:i,search:o,hash:l}=a.location;return jd("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Bo(n)}return I1(t,r,null,e)}function Ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $1(){return Math.random().toString(36).substr(2,8)}function fm(e,t){return{usr:e.state,key:e.key,idx:t}}function jd(e,t,r,a){return r===void 0&&(r=null),Qn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?za(t):t,{state:r,key:t&&t.key||a||$1()})}function Bo(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function za(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function I1(e,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=ts.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Qn({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=ts.Pop;let N=u(),g=N==null?null:N-d;d=N,c&&c({action:l,location:j.location,delta:g})}function m(N,g){l=ts.Push;let p=jd(j.location,N,g);d=u()+1;let v=fm(p,d),S=j.createHref(p);try{o.pushState(v,"",S)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;n.location.assign(S)}i&&c&&c({action:l,location:j.location,delta:1})}function x(N,g){l=ts.Replace;let p=jd(j.location,N,g);d=u();let v=fm(p,d),S=j.createHref(p);o.replaceState(v,"",S),i&&c&&c({action:l,location:j.location,delta:0})}function k(N){let g=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof N=="string"?N:Bo(N);return p=p.replace(/ $/,"%20"),Ye(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let j={get action(){return l},get location(){return e(n,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(mm,h),c=N,()=>{n.removeEventListener(mm,h),c=null}},createHref(N){return t(n,N)},createURL:k,encodeLocation(N){let g=k(N);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:x,go(N){return o.go(N)}};return j}var gm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gm||(gm={}));function F1(e,t,r){return r===void 0&&(r="/"),U1(e,t,r)}function U1(e,t,r,a){let n=typeof t=="string"?za(t):t,i=Yu(n.pathname||"/",r);if(i==null)return null;let o=wx(e);V1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Z1(i);l=X1(o[c],d)}return l}function wx(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ye(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ds([a,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),wx(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:K1(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of bx(i.path))n(i,o,c)}),t}function bx(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=bx(a.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function V1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Y1(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const z1=/^:[\w-]+$/,B1=3,H1=2,W1=1,q1=10,G1=-2,pm=e=>e==="*";function K1(e,t){let r=e.split("/"),a=r.length;return r.some(pm)&&(a+=G1),t&&(a+=H1),r.filter(n=>!pm(n)).reduce((n,i)=>n+(z1.test(i)?B1:i===""?W1:q1),a)}function Y1(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function X1(e,t,r){let{routesMeta:a}=e,n={},i="/",o=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=J1({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:ds([i,h.pathname]),pathnameBase:sk(ds([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=ds([i,h.pathnameBase]))}return o}function J1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=Q1(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((d,u,h)=>{let{paramName:m,isOptional:x}=u;if(m==="*"){let j=l[h]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const k=l[h];return x&&!k?d[m]=void 0:d[m]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Q1(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),vx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function Z1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function ek(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof e=="string"?za(e):e;return{pathname:r?r.startsWith("/")?r:tk(r,t):t,search:ak(a),hash:nk(n)}}function tk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ic(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Xu(e,t){let r=rk(e);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Ju(e,t,r,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=za(e):(n=Qn({},e),Ye(!n.pathname||!n.pathname.includes("?"),ic("?","pathname","search",n)),Ye(!n.pathname||!n.pathname.includes("#"),ic("#","pathname","hash",n)),Ye(!n.search||!n.search.includes("#"),ic("#","search","hash",n)));let i=e===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!a&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=ek(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ds=e=>e.join("/").replace(/\/\/+/g,"/"),sk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ak=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ik(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kx=["post","put","patch","delete"];new Set(kx);const ok=["get",...kx];new Set(ok);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zn.apply(this,arguments)}const Qu=f.createContext(null),lk=f.createContext(null),vs=f.createContext(null),pl=f.createContext(null),_r=f.createContext({outlet:null,matches:[],isDataRoute:!1}),jx=f.createContext(null);function ck(e,t){let{relative:r}=t===void 0?{}:t;Ba()||Ye(!1);let{basename:a,navigator:n}=f.useContext(vs),{hash:i,pathname:o,search:l}=Cx(e,{relative:r}),c=o;return a!=="/"&&(c=o==="/"?a:ds([a,o])),n.createHref({pathname:c,search:l,hash:i})}function Ba(){return f.useContext(pl)!=null}function Ha(){return Ba()||Ye(!1),f.useContext(pl).location}function Nx(e){f.useContext(vs).static||f.useLayoutEffect(e)}function Qt(){let{isDataRoute:e}=f.useContext(_r);return e?jk():dk()}function dk(){Ba()||Ye(!1);let e=f.useContext(Qu),{basename:t,future:r,navigator:a}=f.useContext(vs),{matches:n}=f.useContext(_r),{pathname:i}=Ha(),o=JSON.stringify(Xu(n,r.v7_relativeSplatPath)),l=f.useRef(!1);return Nx(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let h=Ju(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ds([t,h.pathname])),(u.replace?a.replace:a.push)(h,u.state,u)},[t,a,o,i,e])}const _x=f.createContext(null);function zr(){return f.useContext(_x)}function uk(e){let t=f.useContext(_r).outlet;return t&&f.createElement(_x.Provider,{value:e},t)}function Sx(){let{matches:e}=f.useContext(_r),t=e[e.length-1];return t?t.params:{}}function Cx(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=f.useContext(vs),{matches:n}=f.useContext(_r),{pathname:i}=Ha(),o=JSON.stringify(Xu(n,a.v7_relativeSplatPath));return f.useMemo(()=>Ju(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function hk(e,t){return mk(e,t)}function mk(e,t,r,a){Ba()||Ye(!1);let{navigator:n}=f.useContext(vs),{matches:i}=f.useContext(_r),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ha(),u;if(t){var h;let N=typeof t=="string"?za(t):t;c==="/"||(h=N.pathname)!=null&&h.startsWith(c)||Ye(!1),u=N}else u=d;let m=u.pathname||"/",x=m;if(c!=="/"){let N=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=F1(e,{pathname:x}),j=yk(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:ds([c,n.encodeLocation?n.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:ds([c,n.encodeLocation?n.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,r,a);return t&&j?f.createElement(pl.Provider,{value:{location:Zn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ts.Pop}},j):j}function fk(){let e=kk(),t=ik(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:n},r):null,null)}const gk=f.createElement(fk,null);class pk extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?f.createElement(_r.Provider,{value:this.props.routeContext},f.createElement(jx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xk(e){let{routeContext:t,match:r,children:a}=e,n=f.useContext(Qu);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(_r.Provider,{value:t},a)}function yk(e,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(n=r)==null?void 0:n.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Ye(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:x}=r,k=h.route.loader&&m[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||k){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let x,k=!1,j=null,N=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,j=h.route.errorElement||gk,c&&(d<0&&m===0?(Nk("route-fallback"),k=!0,N=null):d===m&&(k=!0,N=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),p=()=>{let v;return x?v=j:k?v=N:h.route.Component?v=f.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,f.createElement(xk,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?f.createElement(pk,{location:r.location,revalidation:r.revalidation,component:j,error:x,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Ex=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ex||{}),Tx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tx||{});function vk(e){let t=f.useContext(Qu);return t||Ye(!1),t}function wk(e){let t=f.useContext(lk);return t||Ye(!1),t}function bk(e){let t=f.useContext(_r);return t||Ye(!1),t}function Px(e){let t=bk(),r=t.matches[t.matches.length-1];return r.route.id||Ye(!1),r.route.id}function kk(){var e;let t=f.useContext(jx),r=wk(),a=Px();return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function jk(){let{router:e}=vk(Ex.UseNavigateStable),t=Px(Tx.UseNavigateStable),r=f.useRef(!1);return Nx(()=>{r.current=!0}),f.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Zn({fromRouteId:t},i)))},[e,t])}const xm={};function Nk(e,t,r){xm[e]||(xm[e]=!0)}function _k(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Sk(e){let{to:t,replace:r,state:a,relative:n}=e;Ba()||Ye(!1);let{future:i,static:o}=f.useContext(vs),{matches:l}=f.useContext(_r),{pathname:c}=Ha(),d=Qt(),u=Ju(t,Xu(l,i.v7_relativeSplatPath),c,n==="path"),h=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(h),{replace:r,state:a,relative:n}),[d,h,n,r,a]),null}function Ck(e){return uk(e.context)}function Qe(e){Ye(!1)}function Ek(e){let{basename:t="/",children:r=null,location:a,navigationType:n=ts.Pop,navigator:i,static:o=!1,future:l}=e;Ba()&&Ye(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:Zn({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof a=="string"&&(a=za(a));let{pathname:u="/",search:h="",hash:m="",state:x=null,key:k="default"}=a,j=f.useMemo(()=>{let N=Yu(u,c);return N==null?null:{location:{pathname:N,search:h,hash:m,state:x,key:k},navigationType:n}},[c,u,h,m,x,k,n]);return j==null?null:f.createElement(vs.Provider,{value:d},f.createElement(pl.Provider,{children:r,value:j}))}function Tk(e){let{children:t,location:r}=e;return hk(Nd(t),r)}new Promise(()=>{});function Nd(e,t){t===void 0&&(t=[]);let r=[];return f.Children.forEach(e,(a,n)=>{if(!f.isValidElement(a))return;let i=[...t,n];if(a.type===f.Fragment){r.push.apply(r,Nd(a.props.children,i));return}a.type!==Qe&&Ye(!1),!a.props.index||!a.props.children||Ye(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Nd(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_d.apply(this,arguments)}function Pk(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Ak(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Dk(e,t){return e.button===0&&(!t||t==="_self")&&!Ak(e)}const Mk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Lk="6";try{window.__reactRouterVersion=Lk}catch{}const Rk="startTransition",ym=_w[Rk];function Ok(e){let{basename:t,children:r,future:a,window:n}=e,i=f.useRef();i.current==null&&(i.current=O1({window:n,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=a||{},u=f.useCallback(h=>{d&&ym?ym(()=>c(h)):c(h)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>_k(a),[a]),f.createElement(Ek,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}const $k=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mn=f.forwardRef(function(t,r){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=Pk(t,Mk),{basename:x}=f.useContext(vs),k,j=!1;if(typeof d=="string"&&Ik.test(d)&&(k=d,$k))try{let v=new URL(window.location.href),S=d.startsWith("//")?new URL(v.protocol+d):new URL(d),y=Yu(S.pathname,x);S.origin===v.origin&&y!=null?d=y+S.search+S.hash:j=!0}catch{}let N=ck(d,{relative:n}),g=Fk(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h});function p(v){a&&a(v),v.defaultPrevented||g(v)}return f.createElement("a",_d({},m,{href:k||N,onClick:j||i?a:p,ref:r,target:c}))});var vm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vm||(vm={}));var wm;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wm||(wm={}));function Fk(e,t){let{target:r,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Qt(),d=Ha(),u=Cx(e,{relative:o});return f.useCallback(h=>{if(Dk(h,r)){h.preventDefault();let m=a!==void 0?a:Bo(d)===Bo(u);c(e,{replace:m,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,a,n,r,e,i,o,l])}const Uk="modulepreload",Vk=function(e){return"/"+e},bm={},fi=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=Vk(c),c in bm)return;bm[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Uk,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},zk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:a}=await Promise.resolve().then(()=>Wa);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class Zu extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class Bk extends Zu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Hk extends Zu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Wk extends Zu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sd||(Sd={}));var qk=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class Gk{constructor(t,{headers:r={},customFetch:a,region:n=Sd.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=zk(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return qk(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:d}).catch(k=>{throw new Bk(k)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Hk(u);if(!u.ok)throw new Wk(u);let m=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield u.json():m==="application/octet-stream"?x=yield u.blob():m==="text/event-stream"?x=u:m==="multipart/form-data"?x=yield u.formData():x=yield u.text(),{data:x,error:null}}catch(n){return{data:null,error:n}}})}}var Ct={},eh={},xl={},gi={},yl={},vl={},Kk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oa=Kk();const Yk=Oa.fetch,Ax=Oa.fetch.bind(Oa),Dx=Oa.Headers,Xk=Oa.Request,Jk=Oa.Response,Wa=Object.freeze(Object.defineProperty({__proto__:null,Headers:Dx,Request:Xk,Response:Jk,default:Ax,fetch:Yk},Symbol.toStringTag,{value:"Module"})),Qk=cw(Wa);var wl={};Object.defineProperty(wl,"__esModule",{value:!0});let Zk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};wl.default=Zk;var Mx=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vl,"__esModule",{value:!0});const ej=Mx(Qk),tj=Mx(wl);let rj=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ej.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,m=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const j=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),N=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");j&&N&&N.length>1&&(h=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const j=await i.text();try{d=JSON.parse(j),Array.isArray(d)&&i.status===404&&(u=[],d=null,m=200,x="OK")}catch{i.status===404&&j===""?(m=204,x="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,x="OK"),d&&this.shouldThrowOnError)throw new tj.default(d)}return{error:d,data:u,count:h,status:m,statusText:x}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};vl.default=rj;var sj=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yl,"__esModule",{value:!0});const aj=sj(vl);let nj=class extends aj.default{select(t){let r=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:a=r}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};yl.default=nj;var ij=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gi,"__esModule",{value:!0});const oj=ij(yl);let lj=class extends oj.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const a=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(t,r,a){return this.url.searchParams.append(t,`not.${r}.${a}`),this}or(t,{foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,a){return this.url.searchParams.append(t,`${r}.${a}`),this}};gi.default=lj;var cj=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xl,"__esModule",{value:!0});const on=cj(gi);let dj=class{constructor(t,{headers:r={},schema:a,fetch:n}){this.url=t,this.headers=r,this.schema=a,this.fetch=n}select(t,{head:r=!1,count:a}={}){const n=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),a&&(this.headers.Prefer=`count=${a}`),new on.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:a=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new on.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${a?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new on.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const a="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new on.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",a=[];return t&&a.push(`count=${t}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new on.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};xl.default=dj;var bl={},kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.version=void 0;kl.version="0.0.0-automated";Object.defineProperty(bl,"__esModule",{value:!0});bl.DEFAULT_HEADERS=void 0;const uj=kl;bl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${uj.version}`};var Lx=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eh,"__esModule",{value:!0});const hj=Lx(xl),mj=Lx(gi),fj=bl;let gj=class Rx{constructor(t,{headers:r={},schema:a,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},fj.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new hj.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Rx(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:a=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;a||n?(o=a?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new mj.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};eh.default=gj;var qa=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const Ox=qa(eh);Ct.PostgrestClient=Ox.default;const $x=qa(xl);Ct.PostgrestQueryBuilder=$x.default;const Ix=qa(gi);Ct.PostgrestFilterBuilder=Ix.default;const Fx=qa(yl);Ct.PostgrestTransformBuilder=Fx.default;const Ux=qa(vl);Ct.PostgrestBuilder=Ux.default;const Vx=qa(wl);Ct.PostgrestError=Vx.default;var pj=Ct.default={PostgrestClient:Ox.default,PostgrestQueryBuilder:$x.default,PostgrestFilterBuilder:Ix.default,PostgrestTransformBuilder:Fx.default,PostgrestBuilder:Ux.default,PostgrestError:Vx.default};const{PostgrestClient:xj,PostgrestQueryBuilder:B6,PostgrestFilterBuilder:H6,PostgrestTransformBuilder:W6,PostgrestBuilder:q6,PostgrestError:G6}=pj;function yj(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const vj=yj(),wj="2.11.15",bj=`realtime-js/${wj}`,kj="1.0.0",zx=1e4,jj=1e3;var _n;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_n||(_n={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var ir;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ir||(ir={}));var Cd;(function(e){e.websocket="websocket"})(Cd||(Cd={}));var As;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(As||(As={}));class Nj{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(t.slice(o,o+n));o=o+n;const c=a.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Bx{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ae||(Ae={}));const km=(e,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,o)=>(i[o]=_j(o,e,t,n),i),{})},_j=(e,t,r,a)=>{const n=t.find(l=>l.name===e),i=n==null?void 0:n.type,o=r[e];return i&&!a.includes(i)?Hx(i,o):Ed(o)},Hx=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Tj(t,r)}switch(e){case Ae.bool:return Sj(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return Cj(t);case Ae.json:case Ae.jsonb:return Ej(t);case Ae.timestamp:return Pj(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return Ed(t);default:return Ed(t)}},Ed=e=>e,Sj=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Cj=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ej=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Tj=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Hx(t,l))}return e},Pj=e=>typeof e=="string"?e.replace(" ","T"):e,Wx=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class oc{constructor(t,r,a={},n=zx){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jm;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jm||(jm={}));class Sn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sn.syncState(this.state,n,i,o),this.pendingDiffs.forEach(c=>{this.state=Sn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Sn.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(N=>N.presence_ref),x=h.map(N=>N.presence_ref),k=u.filter(N=>x.indexOf(N.presence_ref)<0),j=h.filter(N=>m.indexOf(N.presence_ref)<0);k.length>0&&(l[d]=k),j.length>0&&(c[d]=j)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(x=>x.presence_ref),m=u.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...m)}a(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Nm||(Nm={}));var _m;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_m||(_m={}));var Er;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Er||(Er={}));class th{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new oc(this,ir.join,this.params,this.timeout),this.rejoinTimer=new Bx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ir.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Sn(this),this.broadcastEndpointURL=Wx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(Er.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Er.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(Er.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,k=[];for(let j=0;j<x;j++){const N=m[j],{filter:{event:g,schema:p,table:v,filter:S}}=N,y=u&&u[j];if(y&&y.event===g&&y.schema===p&&y.table===v&&y.filter===S)k.push(Object.assign(Object.assign({},N),{id:y.id}));else{this.unsubscribe(),this.state=ht.errored,t==null||t(Er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Er.SUBSCRIBED);return}}).receive("error",u=>{this.state=ht.errored,t==null||t(Er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ht.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ir.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new oc(this,ir.leave,{},t),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new oc(this,t,r,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ir;if(a&&[l,c,d,u].indexOf(o)>=0&&a!==this._joinRef())return;let m=this._onMessage(o,r,a);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var k,j,N;return((k=x.filter)===null||k===void 0?void 0:k.event)==="*"||((N=(j=x.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(x=>x.callback(m,a)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var k,j,N,g,p,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const S=x.id,y=(k=x.filter)===null||k===void 0?void 0:k.event;return S&&((j=r.ids)===null||j===void 0?void 0:j.includes(S))&&(y==="*"||(y==null?void 0:y.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const S=(p=(g=x==null?void 0:x.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return S==="*"||S===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const k=m.data,{schema:j,table:N,commit_timestamp:g,type:p,errors:v}=k;m=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:g,eventType:p,new:{},old:{},errors:v}),this._getPayloadRecords(k))}x.callback(m,a)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&th.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ir.close,{},t)}_onError(t){this._on(ir.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=km(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=km(t.columns,t.old_record)),r}}const Sm=()=>{},Aj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dj{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zx,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sm,this.ref=0,this.logger=Sm,this.conn=null,this.sendBuffer=[],this.serializer=new Nj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>fi(async()=>{const{default:c}=await Promise.resolve().then(()=>Wa);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Cd.websocket}`,this.httpEndpoint=Wx(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Bx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=vj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kj}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case _n.connecting:return As.Connecting;case _n.open:return As.Open;case _n.closing:return As.Closing;default:return As.Closed}}isConnected(){return this.connectionState()===As.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new th(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:bj};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(ir.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(jj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:n,payload:i,ref:o}=r;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ir.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([Aj],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class rh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function rt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Mj extends rh{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Td extends rh{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Lj=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const qx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:a}=await Promise.resolve().then(()=>Wa);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},Rj=()=>Lj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fi(()=>Promise.resolve().then(()=>Wa),void 0)).Response:Response}),Pd=e=>{if(Array.isArray(e))return e.map(r=>Pd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=Pd(a)}),t};var Xs=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const lc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oj=(e,t,r)=>Xs(void 0,void 0,void 0,function*(){const a=yield Rj();e instanceof a&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new Mj(lc(n),e.status||500))}).catch(n=>{t(new Td(lc(n),n))}):t(new Td(lc(e),e))}),$j=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),r))};function pi(e,t,r,a,n,i){return Xs(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,$j(t,a,n,i)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Oj(c,l,a))})})}function Ho(e,t,r,a){return Xs(this,void 0,void 0,function*(){return pi(e,"GET",t,r,a)})}function Yr(e,t,r,a,n){return Xs(this,void 0,void 0,function*(){return pi(e,"POST",t,a,n,r)})}function Ij(e,t,r,a,n){return Xs(this,void 0,void 0,function*(){return pi(e,"PUT",t,a,n,r)})}function Fj(e,t,r,a){return Xs(this,void 0,void 0,function*(){return pi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Gx(e,t,r,a,n){return Xs(this,void 0,void 0,function*(){return pi(e,"DELETE",t,a,n,r)})}var _t=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const Uj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vj{constructor(t,r={},a,n){this.url=t,this.headers=r,this.bucketId=a,this.fetch=qx(n)}uploadOrUpdate(t,r,a,n){return _t(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cm),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(rt(i))return{data:null,error:i};throw i}})}upload(t,r,a){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return _t(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Cm.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(rt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return _t(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield Yr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new rh("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}update(t,r,a){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return _t(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}copy(t,r,a){return _t(this,void 0,void 0,function*(){try{return{data:{path:(yield Yr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return _t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Yr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return _t(this,void 0,void 0,function*(){try{const n=yield Yr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}download(t,r){return _t(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ho(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(rt(l))return{data:null,error:l};throw l}})}info(t){return _t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield Ho(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Pd(a),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}exists(t){return _t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Fj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(rt(a)&&a instanceof Td){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(t){return _t(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}list(t,r,a){return _t(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Uj),r),{prefix:t||""});return{data:yield Yr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const zj="2.7.1",Bj={"X-Client-Info":`storage-js/${zj}`};var Qs=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class Hj{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},Bj),r),this.fetch=qx(a)}listBuckets(){return Qs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(rt(t))return{data:null,error:t};throw t}})}getBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield Ho(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Qs(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Qs(this,void 0,void 0,function*(){try{return{data:yield Ij(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}})}emptyBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield Yr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Qs(this,void 0,void 0,function*(){try{return{data:yield Gx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}}class Wj extends Hj{constructor(t,r={},a){super(t,r,a)}from(t){return new Vj(this.url,this.headers,t,this.fetch)}}const qj="2.50.2";let fn="";typeof Deno<"u"?fn="deno":typeof document<"u"?fn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fn="react-native":fn="node";const Gj={"X-Client-Info":`supabase-js-${fn}/${qj}`},Kj={headers:Gj},Yj={schema:"public"},Xj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jj={};var Qj=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const Zj=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ax:t=fetch,(...r)=>t(...r)},e2=()=>typeof Headers>"u"?Dx:Headers,t2=(e,t,r)=>{const a=Zj(r),n=e2();return(i,o)=>Qj(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(i,Object.assign(Object.assign({},o),{headers:d}))})};var r2=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};function s2(e){return e.endsWith("/")?e:e+"/"}function a2(e,t){var r,a;const{db:n,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>r2(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Kx="2.70.0",sa=30*1e3,Ad=3,cc=Ad*sa,n2="http://localhost:9999",i2="supabase.auth.token",o2={"X-Client-Info":`gotrue-js/${Kx}`},Dd="X-Supabase-Api-Version",Yx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,c2=6e5;class sh extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class d2 extends sh{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function u2(e){return xe(e)&&e.name==="AuthApiError"}class Xx extends sh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ws extends sh{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class Wr extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h2(e){return xe(e)&&e.name==="AuthSessionMissingError"}class Wi extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qi extends ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Gi extends ws{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m2(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Em extends ws{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Md extends ws{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function dc(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class Tm extends ws{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Cn extends ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pm=` 	
\r=`.split(""),f2=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pm.length;t+=1)e[Pm[t].charCodeAt(0)]=-2;for(let t=0;t<Wo.length;t+=1)e[Wo[t].charCodeAt(0)]=t;return e})();function Am(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Wo[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Wo[a]),t.queuedBits-=6}}function Jx(e,t,r){const a=f2[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Dm(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{x2(o,a,r)};for(let o=0;o<e.length;o+=1)Jx(e.charCodeAt(o),n,i);return t.join("")}function g2(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function p2(e,t){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}g2(a,t)}}function x2(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function y2(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Jx(e.charCodeAt(n),r,a);return new Uint8Array(t)}function v2(e){const t=[];return p2(e,r=>t.push(r)),new Uint8Array(t)}function w2(e){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>Am(n,r,a)),Am(null,r,a),t.join("")}function b2(e){return Math.round(Date.now()/1e3)+e}function k2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const rr=()=>typeof window<"u"&&typeof document<"u",Ns={tested:!1,writable:!1},En=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ns.tested)return Ns.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ns.tested=!0,Ns.writable=!0}catch{Ns.tested=!0,Ns.writable=!1}return Ns.writable};function j2(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const Qx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>fi(async()=>{const{default:a}=await Promise.resolve().then(()=>Wa);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},N2=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zx=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ki=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yi=async(e,t)=>{await e.removeItem(t)};class jl{constructor(){this.promise=new jl.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}jl.promiseConstructor=Promise;function uc(e){const t=e.split(".");if(t.length!==3)throw new Cn("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!l2.test(t[a]))throw new Cn("JWT not in base64url format");return{header:JSON.parse(Dm(t[0])),payload:JSON.parse(Dm(t[1])),signature:y2(t[2]),raw:{header:t[0],payload:t[1]}}}async function _2(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function S2(e,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function C2(e){return("0"+e.toString(16)).substr(-2)}function E2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,C2).join("")}async function T2(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function P2(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await T2(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zs(e,t,r=!1){const a=E2();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await Zx(e,`${t}-code-verifier`,n);const i=await P2(a);return[i,a===i?"plain":"s256"]}const A2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function D2(e){const t=e.headers.get(Dd);if(!t||!t.match(A2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function M2(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function L2(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ea(e){if(!R2.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var O2=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};const Es=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$2=[502,503,504];async function Mm(e){var t;if(!N2(e))throw new Md(Es(e),0);if($2.includes(e.status))throw new Md(Es(e),e.status);let r;try{r=await e.json()}catch(i){throw new Xx(Es(i),i)}let a;const n=D2(e);if(n&&n.getTime()>=Yx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Tm(Es(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Wr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Tm(Es(r),e.status,r.weak_password.reasons);throw new d2(Es(r),e.status||500,a)}const I2=(e,t,r,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function je(e,t,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[Dd]||(i[Dd]=Yx["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await F2(e,t,r+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function F2(e,t,r,a,n,i){const o=I2(t,a,n,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Md(Es(c),0)}if(l.ok||await Mm(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await Mm(c)}}function Sr(e){var t;let r=null;B2(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=b2(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:a},error:null}}function Lm(e){const t=Sr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function U2(e){return{data:e,error:null}}function V2(e){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=e,o=O2(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function z2(e){return e}function B2(e){return e.access_token&&e.refresh_token&&e.expires_in}const hc=["global","local","others"];var H2=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};class W2{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=Qx(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=hc[0]){if(hc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hc.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qr})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=H2(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:V2,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(xe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:z2});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(k=>{const j=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(k.split(";")[1].split("=")[1]);d[`${N}Page`]=j}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){ea(t);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qr})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ea(t);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Qr})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){ea(t);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qr})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){ea(t.userId);try{const{data:r,error:a}=await je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ea(t.userId),ea(t.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}}const q2={getItem:e=>En()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{En()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{En()&&globalThis.localStorage.removeItem(e)}};function Rm(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function G2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ta={debug:!!(globalThis&&En()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ey extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class K2 extends ey{}async function Y2(e,t,r){ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new K2(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ta.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}G2();const X2={url:n2,storageKey:i2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Om(e,t,r){return await r()}class ei{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ei.nextInstanceID,ei.nextInstanceID+=1,this.instanceID>0&&rr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},X2),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new W2({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Qx(n.fetch),this.lock=n.lock||Om,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:rr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Y2:this.lock=Om,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:En()?this.storage=q2:(this.memoryStorage={},this.storage=Rm(this.memoryStorage)):(this.memoryStorage={},this.storage=Rm(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=j2(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),rr()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),m2(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xe(r)?{error:r}:{error:new Xx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Sr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let x=null,k=null;this.flowType==="pkce"&&([x,k]=await Zs(this.storage,this.storageKey)),i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:k},xform:Sr})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Sr})}else throw new qi("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lm})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lm})}else throw new qi("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Wi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,n,i,o,l,c,d,u,h,m,x;let k,j;if("message"in t)k=t.message,j=t.signature;else{const{chain:N,wallet:g,statement:p,options:v}=t;let S;if(rr())if(typeof g=="object")S=g;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))S=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const y=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const _=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),p?{statement:p}:null));let C;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")C=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)C=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),j=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${y.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${(n=(a=v==null?void 0:v.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const _=await S.signMessage(new TextEncoder().encode(k),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=_}}try{const{data:N,error:g}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:w2(j)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Sr});if(g)throw g;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Wi}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:g})}catch(N){if(xe(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(t){const r=await Ki(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:o}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Sr});if(await Yi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Wi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(xe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:o}=t,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Sr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Wi}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Zs(this.storage,this.storageKey));const{error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new qi("You must provide either an email or phone number.")}catch(l){if(xe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Sr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Zs(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:U2})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new Wr;const{error:n}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await je(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:l}=await je(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new qi("You must provide either an email or phone number and a type")}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<cc:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qr}):await this._useSession(async r=>{var a,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Qr})})}catch(r){if(xe(r))return h2(r)&&(await this._removeSession(),await Yi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new Wr;const o=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Zs(this.storage,this.storageKey));const{data:d,error:u}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Qr});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(xe(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wr;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:o}=uc(t.access_token);if(o.exp&&(a=o.exp,n=a<=r),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(xe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Wr;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!rr())throw new Gi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Em("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Em("No code detected.");const{data:p,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Gi("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const x=m-u;x*1e3<=sa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const k=m-h;u-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,m,u):u-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,m,u);const{data:j,error:N}=await this._getUser(i);if(N)throw N;const g={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(a){if(xe(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ki(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(u2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Yi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=k2(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Zs(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(xe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return rr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(xe(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)throw o;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await S2(async n=>(n>0&&await _2(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sr})),(n,i)=>{const o=200*Math.pow(2,n);return i&&dc(i)&&Date.now()+o-a<sa})}catch(a){if(this._debug(r,"error",a),xe(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),rr()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ki(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const n=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<cc;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${cc}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),dc(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new Wr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new jl;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Wr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),xe(i)){const o={session:null,error:i};return dc(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Zx(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Yi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),sa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/sa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${sa}ms, refresh threshold is ${Ad} ticks`),n<=Ad&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ey)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Zs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(xe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=uc(n.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(o=>o.kid===t);if(a||(a=this.jwks.keys.find(o=>o.kid===t),a&&this.jwks_cached_at+c2>Date.now()))return a;const{data:n,error:i}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Cn("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(o=>o.kid===t),!a)throw new Cn("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:x,error:k}=await this.getSession();if(k||!x.session)return{data:null,error:k};a=x.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:c}}=uc(a);if(M2(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(a);if(x)throw x;return{data:{claims:i,header:n,signature:o},error:null}}const d=L2(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,v2(`${l}.${c}`)))throw new Cn("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}}ei.nextInstanceID=0;const J2=ei;class Q2 extends J2{constructor(t){super(t)}}var Z2=function(e,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(a.next(u))}catch(h){o(h)}}function c(u){try{d(a.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):n(u.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class eN{constructor(t,r,a){var n,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=s2(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Yj,realtime:Jj,auth:Object.assign(Object.assign({},Xj),{storageKey:d}),global:Kj},h=a2(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=t2(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new xj(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wj(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Z2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Q2({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Dj(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tN=(e,t,r)=>new eN(e,t,r),rN="https://hovpbitodsfarvojjvqh.supabase.co",sN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvdnBiaXRvZHNmYXJ2b2pqdnFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc3MzcwMTgsImV4cCI6MjA1MzMxMzAxOH0.La3MbLvfG42MzxJq610pMcQfjsmPgSg2IL4Ws86tB9o",D=tN(rN,sN),aN=e=>(e==null?void 0:e.code)==="PGRST116";async function nN(e,t){const{data:r,error:a}=await D.from("profiles").update(t).eq("id",e).select().single();if(a)throw a;return r}const ty=f.createContext({session:null,user:null,loading:!0,refreshUser:async()=>{}}),Je=()=>f.useContext(ty),iN=({children:e})=>{const[t,r]=f.useState(null),[a,n]=f.useState(null),[i,o]=f.useState(!0),l=async d=>{var u,h,m,x,k,j;try{const{data:N,error:g}=await D.from("profiles").select("*").eq("id",d).single();if(g){console.log("SessionProvider: No profile found, user needs approval",g);const p={id:d,email:((u=t==null?void 0:t.user)==null?void 0:u.email)||"",username:((m=(h=t==null?void 0:t.user)==null?void 0:h.email)==null?void 0:m.split("@")[0])||"User",role:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(p)}else console.log("SessionProvider: Found existing profile",N),n(N)}catch(N){console.error("SessionProvider: Error loading profile:",N);const g={id:d,email:((x=t==null?void 0:t.user)==null?void 0:x.email)||"",username:((j=(k=t==null?void 0:t.user)==null?void 0:k.email)==null?void 0:j.split("@")[0])||"User",role:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(g)}},c=async()=>{t!=null&&t.user&&(console.log("SessionProvider: Refreshing user profile..."),await l(t.user.id))};return f.useEffect(()=>{let d=!0,u;const h=async()=>{try{console.log("SessionProvider: Loading initial session...");const{data:{session:x},error:k}=await D.auth.getSession();if(!d)return;if(k){console.error("SessionProvider: Error getting session:",k),o(!1);return}r(x),x!=null&&x.user?(console.log("SessionProvider: initial session user",x.user),await l(x.user.id)):n(null),o(!1)}catch(x){console.error("SessionProvider: Error in loadSession:",x),d&&o(!1)}};u=setTimeout(()=>{d&&i&&(console.log("SessionProvider: Loading timeout reached, setting loading to false"),o(!1))},4e3),h();const{data:{subscription:m}}=D.auth.onAuthStateChange(async(x,k)=>{d&&(console.log("SessionProvider: auth state change",x,k),r(k),k!=null&&k.user?(console.log("SessionProvider: auth state change user",k.user),await l(k.user.id)):n(null),o(!1))});return()=>{d=!1,clearTimeout(u),m.unsubscribe()}},[]),s.jsx(ty.Provider,{value:{session:t,user:a,loading:i,refreshUser:c},children:e})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),$m=e=>{const t=lN(e);return t.charAt(0).toUpperCase()+t.slice(1)},ry=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...cN,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:ry("lucide",n),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(e,t)=>{const r=f.forwardRef(({className:a,...n},i)=>f.createElement(dN,{ref:i,iconNode:t,className:ry(`lucide-${oN($m(e))}`,`lucide-${e}`,a),...n}));return r.displayName=$m(e),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],hN=ne("award",uN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mo=ne("bell",mN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Im=ne("book-open-check",fN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ms=ne("book-open",gN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],sy=ne("book",pN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],yN=ne("calendar-days",xN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lr=ne("calendar",vN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nr=ne("check",wN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wt=ne("chevron-down",bN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jN=ne("chevron-left",kN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ay=ne("chevron-right",NN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],SN=ne("chevron-up",_N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ir=ne("circle-alert",CN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],TN=ne("circle-check-big",EN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],AN=ne("circle-plus",PN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Bt=ne("clock",DN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ah=ne("cloud-upload",MN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],RN=ne("code",LN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],$N=ne("columns-2",ON);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Nl=ne("download",IN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],UN=ne("ellipsis-vertical",FN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nh=ne("eye",VN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pe=ne("file-text",zN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],HN=ne("folder-plus",BN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Fm=ne("folder",WN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],cr=ne("graduation-cap",qN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],KN=ne("grid-3x3",GN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],XN=ne("heart",YN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ny=ne("house",JN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],iy=ne("image",QN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],e4=ne("key-round",ZN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],r4=ne("languages",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],qo=ne("layers",s4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],n4=ne("layout-grid",a4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],o4=ne("layout-list",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],c4=ne("library",l4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],De=ne("loader-circle",d4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],h4=ne("log-out",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],pa=ne("megaphone",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],g4=ne("menu",f4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Us=ne("message-square",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],y4=ne("moon",x4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],w4=ne("music",v4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],mc=ne("newspaper",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],oy=ne("palette",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],N4=ne("panel-left",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],S4=ne("panel-right",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]],E4=ne("panel-top",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ts=ne("panels-top-left",T4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Go=ne("pen",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$e=ne("plus",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]],M4=ne("rows-2",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],R4=ne("save",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Um=ne("school",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],xi=ne("search",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ly=ne("settings",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],yi=ne("square-pen",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ko=ne("star",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],z4=ne("sun",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cy=ne("target",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],pe=ne("trash-2",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ds=ne("triangle-alert",W4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],G4=ne("trophy",q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ld=ne("upload",K4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],ra=ne("user-check",Y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],J4=ne("user-plus",X4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qt=ne("user",Q4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ft=ne("users",Z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ce=ne("x",e_);function Ga(){const[e,t]=f.useState(()=>{if(typeof window>"u")return"light";const a=localStorage.getItem("theme");return a==="light"||a==="dark"?a:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});return f.useEffect(()=>{if(typeof window>"u")return;const a=document.documentElement,n=e==="dark";localStorage.setItem("theme",e),a.classList.remove(n?"light":"dark"),a.classList.add(e),n?(a.style.setProperty("--bg-primary","#1a1a1a"),a.style.setProperty("--text-primary","#ffffff")):(a.style.setProperty("--bg-primary","#ffffff"),a.style.setProperty("--text-primary","#1a1a1a"));const i=document.querySelector('meta[name="theme-color"]');i&&i.setAttribute("content",n?"#1a1a1a":"#ffffff")},[e]),{theme:e,toggleTheme:()=>{t(a=>a==="light"?"dark":"light")}}}function t_(){const{theme:e,toggleTheme:t}=Ga();return s.jsx("button",{onClick:t,className:`p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 
        hover:bg-gray-200 dark:hover:bg-gray-600 
        focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800
        transition-all duration-200`,"aria-label":"Toggle theme",children:e==="dark"?s.jsx(z4,{className:"h-5 w-5"}):s.jsx(y4,{className:"h-5 w-5"})})}const dy=e=>`last_viewed_${e}`,Ea=e=>{const t=localStorage.getItem(dy(e));return t?new Date(t):new Date(0)},fo=e=>{localStorage.setItem(dy(e),new Date().toISOString())},r_=async(e,t)=>{if(!e)return 0;const r=Ea("announcements");try{let a=D.from("announcements").select("id").gt("created_at",r.toISOString());const{data:n,error:i}=await a;if(i)throw i;return(n==null?void 0:n.length)||0}catch(a){return console.error("Error getting unread announcement count:",a),0}},s_=async(e,t)=>{if(!e)return 0;const r=Ea("discussions");try{let a=D.from("discussions").select("id").gt("created_at",r.toISOString()).neq("created_by",e);const{data:n,error:i}=await a;if(i)throw i;return(n==null?void 0:n.length)||0}catch(a){return console.error("Error getting unread discussion count:",a),0}},a_=async e=>{if(!e)return 0;const t=Ea("private_discussions");try{const{data:r,error:a}=await D.from("private_discussions").select("id").gt("created_at",t.toISOString()).eq("recipient_id",e).neq("created_by",e);if(a)throw a;return(r==null?void 0:r.length)||0}catch(r){return console.error("Error getting unread private discussion count:",r),0}},n_=async(e,t)=>{console.log("Getting unread counts for user:",e);const[r,a,n]=await Promise.all([r_(e,t),s_(e,t),a_(e)]);return{announcements:r,discussions:a,privateDiscussions:n}},i_=async(e,t)=>{if(!e)return[];const r=Ea("announcements"),a=Ea("discussions"),n=Ea("private_discussions");try{console.log("Getting unread messages for user:",e),console.log("Last viewed times:",{announcements:r,discussions:a,privateDiscussions:n});const[i,o,l]=await Promise.all([D.from("announcements").select(`
          id,
          title,
          content,
          created_at,
          created_by,
          profiles:created_by (username)
        `).gt("created_at",r.toISOString()).order("created_at",{ascending:!1}).limit(10),D.from("discussions").select(`
          id,
          content,
          created_at,
          created_by,
          profiles:created_by (username)
        `).gt("created_at",a.toISOString()).neq("created_by",e).order("created_at",{ascending:!1}).limit(10),D.from("private_discussions").select(`
          id,
          content,
          created_at,
          created_by,
          profiles:created_by (username)
        `).gt("created_at",n.toISOString()).eq("recipient_id",e).neq("created_by",e).order("created_at",{ascending:!1}).limit(10)]),c=[];return i.data&&i.data.forEach(d=>{var u;c.push({id:d.id,type:"announcement",title:d.title,content:d.content,created_at:d.created_at,created_by:d.created_by,sender_name:((u=d.profiles)==null?void 0:u.username)||"Unknown"})}),o.data&&o.data.forEach(d=>{var u;c.push({id:d.id,type:"discussion",title:"New Discussion Message",content:d.content,created_at:d.created_at,created_by:d.created_by,sender_name:((u=d.profiles)==null?void 0:u.username)||"Unknown"})}),l.data&&l.data.forEach(d=>{var u;c.push({id:d.id,type:"private_discussion",title:"New Private Message",content:d.content,created_at:d.created_at,created_by:d.created_by,sender_name:((u=d.profiles)==null?void 0:u.username)||"Unknown"})}),c.sort((d,u)=>new Date(u.created_at).getTime()-new Date(d.created_at).getTime())}catch(i){return console.error("Error getting unread messages:",i),[]}},Tn=e=>{fo(e)},o_=()=>{fo("announcements"),fo("discussions"),fo("private_discussions")},l_=(e,t)=>{const r=D.channel("message_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"announcements"},t).on("postgres_changes",{event:"INSERT",schema:"public",table:"discussions"},t).on("postgres_changes",{event:"INSERT",schema:"public",table:"private_discussions",filter:`created_by=neq.${e}`},t).subscribe();return()=>{r.unsubscribe()}},ti=f.createContext({});function ih(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const oh=typeof window<"u",lh=oh?f.useLayoutEffect:f.useEffect,_l=f.createContext(null);function ch(e,t){e.indexOf(t)===-1&&e.push(t)}function dh(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Fr=(e,t,r)=>r>t?t:r<e?e:r;let uh=()=>{};const Ur={},uy=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function hy(e){return typeof e=="object"&&e!==null}const my=e=>/^0[^.\s]+$/u.test(e);function hh(e){let t;return()=>(t===void 0&&(t=e()),t)}const Kt=e=>e,c_=(e,t)=>r=>t(e(r)),vi=(...e)=>e.reduce(c_),ri=(e,t,r)=>{const a=t-e;return a===0?1:(r-e)/a};class mh{constructor(){this.subscriptions=[]}add(t){return ch(this.subscriptions,t),()=>dh(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const br=e=>e*1e3,kr=e=>e/1e3;function fy(e,t){return t?e*(1e3/t):0}const gy=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,d_=1e-7,u_=12;function h_(e,t,r,a,n){let i,o,l=0;do o=t+(r-t)/2,i=gy(o,a,n)-e,i>0?r=o:t=o;while(Math.abs(i)>d_&&++l<u_);return o}function wi(e,t,r,a){if(e===t&&r===a)return Kt;const n=i=>h_(i,0,1,e,r);return i=>i===0||i===1?i:gy(n(i),t,a)}const py=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xy=e=>t=>1-e(1-t),yy=wi(.33,1.53,.69,.99),fh=xy(yy),vy=py(fh),wy=e=>(e*=2)<1?.5*fh(e):.5*(2-Math.pow(2,-10*(e-1))),gh=e=>1-Math.sin(Math.acos(e)),by=xy(gh),ky=py(gh),m_=wi(.42,0,1,1),f_=wi(0,0,.58,1),jy=wi(.42,0,.58,1),g_=e=>Array.isArray(e)&&typeof e[0]!="number",Ny=e=>Array.isArray(e)&&typeof e[0]=="number",p_={linear:Kt,easeIn:m_,easeInOut:jy,easeOut:f_,circIn:gh,circInOut:ky,circOut:by,backIn:fh,backInOut:vy,backOut:yy,anticipate:wy},x_=e=>typeof e=="string",Vm=e=>{if(Ny(e)){uh(e.length===4);const[t,r,a,n]=e;return wi(t,r,a,n)}else if(x_(e))return p_[e];return e},Xi=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function y_(e,t){let r=new Set,a=new Set,n=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),e()),u(l)}const d={schedule:(u,h=!1,m=!1)=>{const k=m&&n?r:a;return h&&o.add(u),k.has(u)||k.add(u),u},cancel:u=>{a.delete(u),o.delete(u)},process:u=>{if(l=u,n){i=!0;return}n=!0,[r,a]=[a,r],r.forEach(c),r.clear(),n=!1,i&&(i=!1,d.process(u))}};return d}const v_=40;function _y(e,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Xi.reduce((v,S)=>(v[S]=y_(i),v),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:x,postRender:k}=o,j=()=>{const v=Ur.useManualTiming?n.timestamp:performance.now();r=!1,Ur.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(v-n.timestamp,v_),1)),n.timestamp=v,n.isProcessing=!0,l.process(n),c.process(n),d.process(n),u.process(n),h.process(n),m.process(n),x.process(n),k.process(n),n.isProcessing=!1,r&&t&&(a=!1,e(j))},N=()=>{r=!0,a=!0,n.isProcessing||e(j)};return{schedule:Xi.reduce((v,S)=>{const y=o[S];return v[S]=(_,C=!1,M=!1)=>(r||N(),y.schedule(_,C,M)),v},{}),cancel:v=>{for(let S=0;S<Xi.length;S++)o[Xi[S]].cancel(v)},state:n,steps:o}}const{schedule:Fe,cancel:fs,state:it,steps:fc}=_y(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kt,!0);let go;function w_(){go=void 0}const Tt={now:()=>(go===void 0&&Tt.set(it.isProcessing||Ur.useManualTiming?it.timestamp:performance.now()),go),set:e=>{go=e,queueMicrotask(w_)}},Sy=e=>t=>typeof t=="string"&&t.startsWith(e),ph=Sy("--"),b_=Sy("var(--"),xh=e=>b_(e)?k_.test(e.split("/*")[0].trim()):!1,k_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ka={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},si={...Ka,transform:e=>Fr(0,1,e)},Ji={...Ka,default:1},Pn=e=>Math.round(e*1e5)/1e5,yh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function j_(e){return e==null}const N_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vh=(e,t)=>r=>!!(typeof r=="string"&&N_.test(r)&&r.startsWith(e)||t&&!j_(r)&&Object.prototype.hasOwnProperty.call(r,t)),Cy=(e,t,r)=>a=>{if(typeof a!="string")return a;const[n,i,o,l]=a.match(yh);return{[e]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},__=e=>Fr(0,255,e),gc={...Ka,transform:e=>Math.round(__(e))},Os={test:vh("rgb","red"),parse:Cy("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:a=1})=>"rgba("+gc.transform(e)+", "+gc.transform(t)+", "+gc.transform(r)+", "+Pn(si.transform(a))+")"};function S_(e){let t="",r="",a="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),a=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),a=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const Rd={test:vh("#"),parse:S_,transform:Os.transform},bi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qr=bi("deg"),jr=bi("%"),he=bi("px"),C_=bi("vh"),E_=bi("vw"),zm={...jr,parse:e=>jr.parse(e)/100,transform:e=>jr.transform(e*100)},xa={test:vh("hsl","hue"),parse:Cy("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(e)+", "+jr.transform(Pn(t))+", "+jr.transform(Pn(r))+", "+Pn(si.transform(a))+")"},mt={test:e=>Os.test(e)||Rd.test(e)||xa.test(e),parse:e=>Os.test(e)?Os.parse(e):xa.test(e)?xa.parse(e):Rd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Os.transform(e):xa.transform(e)},T_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P_(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(yh))==null?void 0:t.length)||0)+(((r=e.match(T_))==null?void 0:r.length)||0)>0}const Ey="number",Ty="color",A_="var",D_="var(",Bm="${}",M_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ai(e){const t=e.toString(),r=[],a={color:[],number:[],var:[]},n=[];let i=0;const l=t.replace(M_,c=>(mt.test(c)?(a.color.push(i),n.push(Ty),r.push(mt.parse(c))):c.startsWith(D_)?(a.var.push(i),n.push(A_),r.push(c)):(a.number.push(i),n.push(Ey),r.push(parseFloat(c))),++i,Bm)).split(Bm);return{values:r,split:l,indexes:a,types:n}}function Py(e){return ai(e).values}function Ay(e){const{split:t,types:r}=ai(e),a=t.length;return n=>{let i="";for(let o=0;o<a;o++)if(i+=t[o],n[o]!==void 0){const l=r[o];l===Ey?i+=Pn(n[o]):l===Ty?i+=mt.transform(n[o]):i+=n[o]}return i}}const L_=e=>typeof e=="number"?0:e;function R_(e){const t=Py(e);return Ay(e)(t.map(L_))}const gs={test:P_,parse:Py,createTransformer:Ay,getAnimatableNone:R_};function pc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function O_({hue:e,saturation:t,lightness:r,alpha:a}){e/=360,t/=100,r/=100;let n=0,i=0,o=0;if(!t)n=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;n=pc(c,l,e+1/3),i=pc(c,l,e),o=pc(c,l,e-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}function Yo(e,t){return r=>r>0?t:e}const Ve=(e,t,r)=>e+(t-e)*r,xc=(e,t,r)=>{const a=e*e,n=r*(t*t-a)+a;return n<0?0:Math.sqrt(n)},$_=[Rd,Os,xa],I_=e=>$_.find(t=>t.test(e));function Hm(e){const t=I_(e);if(!t)return!1;let r=t.parse(e);return t===xa&&(r=O_(r)),r}const Wm=(e,t)=>{const r=Hm(e),a=Hm(t);if(!r||!a)return Yo(e,t);const n={...r};return i=>(n.red=xc(r.red,a.red,i),n.green=xc(r.green,a.green,i),n.blue=xc(r.blue,a.blue,i),n.alpha=Ve(r.alpha,a.alpha,i),Os.transform(n))},Od=new Set(["none","hidden"]);function F_(e,t){return Od.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function U_(e,t){return r=>Ve(e,t,r)}function wh(e){return typeof e=="number"?U_:typeof e=="string"?xh(e)?Yo:mt.test(e)?Wm:B_:Array.isArray(e)?Dy:typeof e=="object"?mt.test(e)?Wm:V_:Yo}function Dy(e,t){const r=[...e],a=r.length,n=e.map((i,o)=>wh(i)(i,t[o]));return i=>{for(let o=0;o<a;o++)r[o]=n[o](i);return r}}function V_(e,t){const r={...e,...t},a={};for(const n in r)e[n]!==void 0&&t[n]!==void 0&&(a[n]=wh(e[n])(e[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}}function z_(e,t){const r=[],a={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const i=t.types[n],o=e.indexes[i][a[i]],l=e.values[o]??0;r[n]=l,a[i]++}return r}const B_=(e,t)=>{const r=gs.createTransformer(t),a=ai(e),n=ai(t);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?Od.has(e)&&!n.values.length||Od.has(t)&&!a.values.length?F_(e,t):vi(Dy(z_(a,n),n.values),r):Yo(e,t)};function My(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ve(e,t,r):wh(e)(e,t)}const H_=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Fe.update(t,r),stop:()=>fs(t),now:()=>it.isProcessing?it.timestamp:Tt.now()}},Ly=(e,t,r=10)=>{let a="";const n=Math.max(Math.round(t/r),2);for(let i=0;i<n;i++)a+=e(i/(n-1))+", ";return`linear(${a.substring(0,a.length-2)})`},Xo=2e4;function bh(e){let t=0;const r=50;let a=e.next(t);for(;!a.done&&t<Xo;)t+=r,a=e.next(t);return t>=Xo?1/0:t}function W_(e,t=100,r){const a=r({...e,keyframes:[0,t]}),n=Math.min(bh(a),Xo);return{type:"keyframes",ease:i=>a.next(n*i).value/t,duration:kr(n)}}const q_=5;function Ry(e,t,r){const a=Math.max(t-q_,0);return fy(r-e(a),t-a)}const We={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yc=.001;function G_({duration:e=We.duration,bounce:t=We.bounce,velocity:r=We.velocity,mass:a=We.mass}){let n,i,o=1-t;o=Fr(We.minDamping,We.maxDamping,o),e=Fr(We.minDuration,We.maxDuration,kr(e)),o<1?(n=d=>{const u=d*o,h=u*e,m=u-r,x=$d(d,o),k=Math.exp(-h);return yc-m/x*k},i=d=>{const h=d*o*e,m=h*r+r,x=Math.pow(o,2)*Math.pow(d,2)*e,k=Math.exp(-h),j=$d(Math.pow(d,2),o);return(-n(d)+yc>0?-1:1)*((m-x)*k)/j}):(n=d=>{const u=Math.exp(-d*e),h=(d-r)*e+1;return-yc+u*h},i=d=>{const u=Math.exp(-d*e),h=(r-d)*(e*e);return u*h});const l=5/e,c=Y_(n,i,l);if(e=br(e),isNaN(c))return{stiffness:We.stiffness,damping:We.damping,duration:e};{const d=Math.pow(c,2)*a;return{stiffness:d,damping:o*2*Math.sqrt(a*d),duration:e}}}const K_=12;function Y_(e,t,r){let a=r;for(let n=1;n<K_;n++)a=a-e(a)/t(a);return a}function $d(e,t){return e*Math.sqrt(1-t*t)}const X_=["duration","bounce"],J_=["stiffness","damping","mass"];function qm(e,t){return t.some(r=>e[r]!==void 0)}function Q_(e){let t={velocity:We.velocity,stiffness:We.stiffness,damping:We.damping,mass:We.mass,isResolvedFromDuration:!1,...e};if(!qm(e,J_)&&qm(e,X_))if(e.visualDuration){const r=e.visualDuration,a=2*Math.PI/(r*1.2),n=a*a,i=2*Fr(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:We.mass,stiffness:n,damping:i}}else{const r=G_(e);t={...t,...r,mass:We.mass},t.isResolvedFromDuration=!0}return t}function Jo(e=We.visualDuration,t=We.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:n}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:x}=Q_({...r,velocity:-kr(r.velocity||0)}),k=m||0,j=d/(2*Math.sqrt(c*u)),N=o-i,g=kr(Math.sqrt(c/u)),p=Math.abs(N)<5;a||(a=p?We.restSpeed.granular:We.restSpeed.default),n||(n=p?We.restDelta.granular:We.restDelta.default);let v;if(j<1){const y=$d(g,j);v=_=>{const C=Math.exp(-j*g*_);return o-C*((k+j*g*N)/y*Math.sin(y*_)+N*Math.cos(y*_))}}else if(j===1)v=y=>o-Math.exp(-g*y)*(N+(k+g*N)*y);else{const y=g*Math.sqrt(j*j-1);v=_=>{const C=Math.exp(-j*g*_),M=Math.min(y*_,300);return o-C*((k+j*g*N)*Math.sinh(M)+y*N*Math.cosh(M))/y}}const S={calculatedDuration:x&&h||null,next:y=>{const _=v(y);if(x)l.done=y>=h;else{let C=y===0?k:0;j<1&&(C=y===0?br(k):Ry(v,y,_));const M=Math.abs(C)<=a,W=Math.abs(o-_)<=n;l.done=M&&W}return l.value=l.done?o:_,l},toString:()=>{const y=Math.min(bh(S),Xo),_=Ly(C=>S.next(y*C).value,y,30);return y+"ms "+_},toTransition:()=>{}};return S}Jo.applyToOptions=e=>{const t=W_(e,100,Jo);return e.ease=t.ease,e.duration=br(t.duration),e.type="keyframes",e};function Id({keyframes:e,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},x=M=>l!==void 0&&M<l||c!==void 0&&M>c,k=M=>l===void 0?c:c===void 0||Math.abs(l-M)<Math.abs(c-M)?l:c;let j=r*t;const N=h+j,g=o===void 0?N:o(N);g!==N&&(j=g-h);const p=M=>-j*Math.exp(-M/a),v=M=>g+p(M),S=M=>{const W=p(M),q=v(M);m.done=Math.abs(W)<=d,m.value=m.done?g:q};let y,_;const C=M=>{x(m.value)&&(y=M,_=Jo({keyframes:[m.value,k(m.value)],velocity:Ry(v,M,m.value),damping:n,stiffness:i,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:M=>{let W=!1;return!_&&y===void 0&&(W=!0,S(M),C(M)),y!==void 0&&M>=y?_.next(M-y):(!W&&S(M),m)}}}function Z_(e,t,r){const a=[],n=r||Ur.mix||My,i=e.length-1;for(let o=0;o<i;o++){let l=n(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Kt:t;l=vi(c,l)}a.push(l)}return a}function eS(e,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=e.length;if(uh(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Z_(t,a,n),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const m=ri(e[h],e[h+1],u);return l[h](m)};return r?u=>d(Fr(e[0],e[i-1],u)):d}function tS(e,t){const r=e[e.length-1];for(let a=1;a<=t;a++){const n=ri(0,t,a);e.push(Ve(r,1,n))}}function rS(e){const t=[0];return tS(t,e.length-1),t}function sS(e,t){return e.map(r=>r*t)}function aS(e,t){return e.map(()=>t||jy).splice(0,e.length-1)}function An({duration:e=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=g_(a)?a.map(Vm):Vm(a),i={done:!1,value:t[0]},o=sS(r&&r.length===t.length?r:rS(t),e),l=eS(o,t,{ease:Array.isArray(n)?n:aS(t,n)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const nS=e=>e!==null;function kh(e,{repeat:t,repeatType:r="loop"},a,n=1){const i=e.filter(nS),l=n<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||a===void 0?i[l]:a}const iS={decay:Id,inertia:Id,tween:An,keyframes:An,spring:Jo};function Oy(e){typeof e.type=="string"&&(e.type=iS[e.type])}class jh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const oS=e=>e/100;class Nh extends jh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,n;const{motionValue:r}=this.options;r&&r.updatedAt!==Tt.now()&&this.tick(Tt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Oy(t);const{type:r=An,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||An;c!==An&&typeof l[0]!="number"&&(this.mixKeyframes=vi(oS,My(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=bh(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=d}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return a.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:x,type:k,onUpdate:j,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-n/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const g=this.currentTime-d*(this.playbackSpeed>=0?1:-1),p=this.playbackSpeed>=0?g<0:g>n;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let v=this.currentTime,S=a;if(h){const M=Math.min(this.currentTime,n)/l;let W=Math.floor(M),q=M%1;!q&&M>=1&&(q=1),q===1&&W--,W=Math.min(W,h+1),!!(W%2)&&(m==="reverse"?(q=1-q,x&&(q-=x/l)):m==="mirror"&&(S=o)),v=Fr(0,1,q)*l}const y=p?{done:!1,value:u[0]}:S.next(v);i&&(y.value=i(y.value));let{done:_}=y;!p&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return C&&k!==Id&&(y.value=kh(u,this.options,N,this.speed)),j&&j(y.value),C&&this.finish(),y}then(t,r){return this.finished.then(t,r)}get duration(){return kr(this.calculatedDuration)}get time(){return kr(this.currentTime)}set time(t){var r;t=br(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Tt.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=kr(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:t=H_,startTime:r}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(n=this.options).onPlay)==null||i.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function lS(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $s=e=>e*180/Math.PI,Fd=e=>{const t=$s(Math.atan2(e[1],e[0]));return Ud(t)},cS={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Fd,rotateZ:Fd,skewX:e=>$s(Math.atan(e[1])),skewY:e=>$s(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ud=e=>(e=e%360,e<0&&(e+=360),e),Gm=Fd,Km=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ym=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),dS={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Km,scaleY:Ym,scale:e=>(Km(e)+Ym(e))/2,rotateX:e=>Ud($s(Math.atan2(e[6],e[5]))),rotateY:e=>Ud($s(Math.atan2(-e[2],e[0]))),rotateZ:Gm,rotate:Gm,skewX:e=>$s(Math.atan(e[4])),skewY:e=>$s(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Vd(e){return e.includes("scale")?1:0}function zd(e,t){if(!e||e==="none")return Vd(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(r)a=dS,n=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=cS,n=l}if(!n)return Vd(t);const i=a[t],o=n[1].split(",").map(hS);return typeof i=="function"?i(o):o[i]}const uS=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return zd(r,t)};function hS(e){return parseFloat(e.trim())}const Ya=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xa=new Set(Ya),Xm=e=>e===Ka||e===he,mS=new Set(["x","y","z"]),fS=Ya.filter(e=>!mS.has(e));function gS(e){const t=[];return fS.forEach(r=>{const a=e.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t}const Vs={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>zd(t,"x"),y:(e,{transform:t})=>zd(t,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const zs=new Set;let Bd=!1,Hd=!1,Wd=!1;function $y(){if(Hd){const e=Array.from(zs).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),r=new Map;t.forEach(a=>{const n=gS(a);n.length&&(r.set(a,n),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const n=r.get(a);n&&n.forEach(([i,o])=>{var l;(l=a.getValue(i))==null||l.set(o)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Hd=!1,Bd=!1,zs.forEach(e=>e.complete(Wd)),zs.clear()}function Iy(){zs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Hd=!0)})}function pS(){Wd=!0,Iy(),$y(),Wd=!1}class _h{constructor(t,r,a,n,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=a,this.motionValue=n,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(zs.add(this),Bd||(Bd=!0,Fe.read(Iy),Fe.resolveKeyframes($y))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:a,motionValue:n}=this;if(t[0]===null){const i=n==null?void 0:n.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(a&&r){const l=a.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),n&&i===void 0&&n.set(t[0])}lS(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),zs.delete(this)}cancel(){this.state==="scheduled"&&(zs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xS=e=>e.startsWith("--");function yS(e,t,r){xS(t)?e.style.setProperty(t,r):e.style[t]=r}const vS=hh(()=>window.ScrollTimeline!==void 0),wS={};function bS(e,t){const r=hh(e);return()=>wS[t]??r()}const Fy=bS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gn=([e,t,r,a])=>`cubic-bezier(${e}, ${t}, ${r}, ${a})`,Jm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gn([0,.65,.55,1]),circOut:gn([.55,0,1,.45]),backIn:gn([.31,.01,.66,-.59]),backOut:gn([.33,1.53,.69,.99])};function Uy(e,t){if(e)return typeof e=="function"?Fy()?Ly(e,t):"ease-out":Ny(e)?gn(e):Array.isArray(e)?e.map(r=>Uy(r,t)||Jm.easeOut):Jm[e]}function kS(e,t,r,{delay:a=0,duration:n=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:r};c&&(u.offset=c);const h=Uy(l,n);Array.isArray(h)&&(u.easing=h);const m={delay:a,duration:n,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(u,m)}function Vy(e){return typeof e=="function"&&"applyToOptions"in e}function jS({type:e,...t}){return Vy(e)&&Fy()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NS extends jh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:a,keyframes:n,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,uh(typeof t.type!="string");const d=jS(t);this.animation=kS(r,a,n,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=kh(n,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):yS(r,a,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,a;const t=((a=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:a.call(r).duration)||0;return kr(Number(t))}get time(){return kr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=br(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&vS()?(this.animation.timeline=t,Kt):r(this)}}const zy={anticipate:wy,backInOut:vy,circInOut:ky};function _S(e){return e in zy}function SS(e){typeof e.ease=="string"&&_S(e.ease)&&(e.ease=zy[e.ease])}const Qm=10;class CS extends NS{constructor(t){SS(t),Oy(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:a,onComplete:n,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new Nh({...o,autoplay:!1}),c=br(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Qm).value,l.sample(c).value,Qm),l.stop()}}const Zm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gs.test(e)||e==="0")&&!e.startsWith("url("));function ES(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function TS(e,t,r,a){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Zm(n,t),l=Zm(i,t);return!o||!l?!1:ES(e)||(r==="spring"||Vy(r))&&a}function Sh(e){return hy(e)&&"offsetHeight"in e}const PS=new Set(["opacity","clipPath","filter","transform"]),AS=hh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DS(e){var d;const{motionValue:t,name:r,repeatDelay:a,repeatType:n,damping:i,type:o}=e;if(!Sh((d=t==null?void 0:t.owner)==null?void 0:d.current))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return AS()&&r&&PS.has(r)&&(r!=="transform"||!c)&&!l&&!a&&n!=="mirror"&&i!==0&&o!=="inertia"}const MS=40;class LS extends jh{constructor({autoplay:t=!0,delay:r=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var k;super(),this.stop=()=>{var j,N;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=Tt.now();const m={autoplay:t,delay:r,type:a,repeat:n,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},x=(u==null?void 0:u.KeyframeResolver)||_h;this.keyframeResolver=new x(l,(j,N,g)=>this.onKeyframesResolved(j,N,m,!g),c,d,u),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(t,r,a,n){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=a;this.resolvedAt=Tt.now(),TS(t,i,o,l)||((Ur.instantAnimations||!c)&&(u==null||u(kh(t,a,r))),t[0]=t[t.length-1],a.duration=0,a.repeat=0);const m={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>MS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...a,keyframes:t},x=!d&&DS(m)?new CS({...m,element:m.motionValue.owner.current}):new Nh(m);x.finished.then(()=>this.notifyFinished()).catch(Kt),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),pS()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const RS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function OS(e){const t=RS.exec(e);if(!t)return[,];const[,r,a,n]=t;return[`--${r??a}`,n]}function By(e,t,r=1){const[a,n]=OS(e);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return uy(o)?parseFloat(o):o}return xh(n)?By(n,t,r+1):n}function Ch(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Hy=new Set(["width","height","top","left","right","bottom",...Ya]),$S={test:e=>e==="auto",parse:e=>e},Wy=e=>t=>t.test(e),qy=[Ka,he,jr,qr,E_,C_,$S],ef=e=>qy.find(Wy(e));function IS(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||my(e):!0}const FS=new Set(["brightness","contrast","saturate","opacity"]);function US(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=r.match(yh)||[];if(!a)return e;const n=r.replace(a,"");let i=FS.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const VS=/\b([a-z-]*)\(.*?\)/gu,qd={...gs,getAnimatableNone:e=>{const t=e.match(VS);return t?t.map(US).join(" "):e}},tf={...Ka,transform:Math.round},zS={rotate:qr,rotateX:qr,rotateY:qr,rotateZ:qr,scale:Ji,scaleX:Ji,scaleY:Ji,scaleZ:Ji,skew:qr,skewX:qr,skewY:qr,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:si,originX:zm,originY:zm,originZ:he},Eh={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,backgroundPositionX:he,backgroundPositionY:he,...zS,zIndex:tf,fillOpacity:si,strokeOpacity:si,numOctaves:tf},BS={...Eh,color:mt,backgroundColor:mt,outlineColor:mt,fill:mt,stroke:mt,borderColor:mt,borderTopColor:mt,borderRightColor:mt,borderBottomColor:mt,borderLeftColor:mt,filter:qd,WebkitFilter:qd},Gy=e=>BS[e];function Ky(e,t){let r=Gy(e);return r!==qd&&(r=gs),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const HS=new Set(["auto","none","0"]);function WS(e,t,r){let a=0,n;for(;a<e.length&&!n;){const i=e[a];typeof i=="string"&&!HS.has(i)&&ai(i).values.length&&(n=e[a]),a++}if(n&&r)for(const i of t)e[i]=Ky(r,n)}class qS extends _h{constructor(t,r,a,n,i){super(t,r,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:a}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),xh(d))){const u=By(d,r.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Hy.has(a)||t.length!==2)return;const[n,i]=t,o=ef(n),l=ef(i);if(o!==l)if(Xm(o)&&Xm(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else Vs[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,a=[];for(let n=0;n<t.length;n++)(t[n]===null||IS(t[n]))&&a.push(n);a.length&&WS(t,a,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[a](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(a,n).jump(n,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,o=a[i];a[i]=Vs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function GS(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const n=(r==null?void 0:r[e])??a.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}const Yy=(e,t)=>t&&typeof e=="number"?t.transform(e):e,rf=30,KS=e=>!isNaN(parseFloat(e));class YS{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,n=!0)=>{var o,l;const i=Tt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();n&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Tt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=KS(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new mh);const a=this.events[t].add(r);return t==="change"?()=>{a(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rf)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,rf);return fy(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $a(e,t){return new YS(e,t)}const{schedule:Th}=_y(queueMicrotask,!1),sr={x:!1,y:!1};function Xy(){return sr.x||sr.y}function XS(e){return e==="x"||e==="y"?sr[e]?null:(sr[e]=!0,()=>{sr[e]=!1}):sr.x||sr.y?null:(sr.x=sr.y=!0,()=>{sr.x=sr.y=!1})}function Jy(e,t){const r=GS(e),a=new AbortController,n={passive:!0,...t,signal:a.signal};return[r,n,()=>a.abort()]}function sf(e){return!(e.pointerType==="touch"||Xy())}function JS(e,t,r={}){const[a,n,i]=Jy(e,r),o=l=>{if(!sf(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=h=>{sf(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,n)};return a.forEach(l=>{l.addEventListener("pointerenter",o,n)}),i}const Qy=(e,t)=>t?e===t?!0:Qy(e,t.parentElement):!1,Ph=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,QS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZS(e){return QS.has(e.tagName)||e.tabIndex!==-1}const po=new WeakSet;function af(e){return t=>{t.key==="Enter"&&e(t)}}function vc(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const e5=(e,t)=>{const r=e.currentTarget;if(!r)return;const a=af(()=>{if(po.has(r))return;vc(r,"down");const n=af(()=>{vc(r,"up")}),i=()=>vc(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",a,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",a),t)};function nf(e){return Ph(e)&&!Xy()}function t5(e,t,r={}){const[a,n,i]=Jy(e,r),o=l=>{const c=l.currentTarget;if(!nf(l))return;po.add(c);const d=t(c,l),u=(x,k)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),po.has(c)&&po.delete(c),nf(x)&&typeof d=="function"&&d(x,{success:k})},h=x=>{u(x,c===window||c===document||r.useGlobalTarget||Qy(c,x.target))},m=x=>{u(x,!1)};window.addEventListener("pointerup",h,n),window.addEventListener("pointercancel",m,n)};return a.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,n),Sh(l)&&(l.addEventListener("focus",d=>e5(d,n)),!ZS(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Zy(e){return hy(e)&&"ownerSVGElement"in e}function r5(e){return Zy(e)&&e.tagName==="svg"}const pt=e=>!!(e&&e.getVelocity),s5=[...qy,mt,gs],a5=e=>s5.find(Wy(e)),Ah=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class n5 extends f.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=r.offsetParent,n=Sh(a)&&a.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function i5({children:e,isPresent:t,anchorX:r}){const a=f.useId(),n=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=f.useContext(Ah);return f.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:u,right:h}=i.current;if(t||!n.current||!l||!c)return;const m=r==="left"?`left: ${u}`:`right: ${h}`;n.current.dataset.motionPopId=a;const x=document.createElement("style");return o&&(x.nonce=o),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[t]),s.jsx(n5,{isPresent:t,childRef:n,sizeRef:i,children:f.cloneElement(e,{ref:n})})}const o5=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:o,anchorX:l})=>{const c=ih(l5),d=f.useId();let u=!0,h=f.useMemo(()=>(u=!1,{id:d,initial:t,isPresent:r,custom:n,onExitComplete:m=>{c.set(m,!0);for(const x of c.values())if(!x)return;a&&a()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[r,c,a]);return i&&u&&(h={...h}),f.useMemo(()=>{c.forEach((m,x)=>c.set(x,!1))},[r]),f.useEffect(()=>{!r&&!c.size&&a&&a()},[r]),o==="popLayout"&&(e=s.jsx(i5,{isPresent:r,anchorX:l,children:e})),s.jsx(_l.Provider,{value:h,children:e})};function l5(){return new Map}function ev(e=!0){const t=f.useContext(_l);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:a,register:n}=t,i=f.useId();f.useEffect(()=>{if(e)return n(i)},[e]);const o=f.useCallback(()=>e&&a&&a(i),[i,a,e]);return!r&&a?[!1,o]:[!0]}const Qi=e=>e.key||"";function of(e){const t=[];return f.Children.forEach(e,r=>{f.isValidElement(r)&&t.push(r)}),t}const fe=({children:e,custom:t,initial:r=!0,onExitComplete:a,presenceAffectsLayout:n=!0,mode:i="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,d]=ev(o),u=f.useMemo(()=>of(e),[e]),h=o&&!c?[]:u.map(Qi),m=f.useRef(!0),x=f.useRef(u),k=ih(()=>new Map),[j,N]=f.useState(u),[g,p]=f.useState(u);lh(()=>{m.current=!1,x.current=u;for(let y=0;y<g.length;y++){const _=Qi(g[y]);h.includes(_)?k.delete(_):k.get(_)!==!0&&k.set(_,!1)}},[g,h.length,h.join("-")]);const v=[];if(u!==j){let y=[...u];for(let _=0;_<g.length;_++){const C=g[_],M=Qi(C);h.includes(M)||(y.splice(_,0,C),v.push(C))}return i==="wait"&&v.length&&(y=v),p(of(y)),N(u),null}const{forceRender:S}=f.useContext(ti);return s.jsx(s.Fragment,{children:g.map(y=>{const _=Qi(y),C=o&&!c?!1:u===g||h.includes(_),M=()=>{if(k.has(_))k.set(_,!0);else return;let W=!0;k.forEach(q=>{q||(W=!1)}),W&&(S==null||S(),p(x.current),o&&(d==null||d()),a&&a())};return s.jsx(o5,{isPresent:C,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:n,mode:i,onExitComplete:C?void 0:M,anchorX:l,children:y},_)})})},c5=f.createContext(null);function d5(){const e=f.useRef(!1);return lh(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function u5(){const e=d5(),[t,r]=f.useState(0),a=f.useCallback(()=>{e.current&&r(t+1)},[t]);return[f.useCallback(()=>Fe.postRender(a),[a]),t]}const h5=e=>!e.isLayoutDirty&&e.willUpdate(!1);function lf(){const e=new Set,t=new WeakMap,r=()=>e.forEach(h5);return{add:a=>{e.add(a),t.set(a,a.addEventListener("willUpdate",r))},remove:a=>{e.delete(a);const n=t.get(a);n&&(n(),t.delete(a)),r()},dirty:r}}const tv=e=>e===!0,m5=e=>tv(e===!0)||e==="id",rv=({children:e,id:t,inherit:r=!0})=>{const a=f.useContext(ti),n=f.useContext(c5),[i,o]=u5(),l=f.useRef(null),c=a.id||n;l.current===null&&(m5(r)&&c&&(t=t?c+"-"+t:c),l.current={id:t,group:tv(r)&&a.group||lf()});const d=f.useMemo(()=>({...l.current,forceRender:i}),[o]);return s.jsx(ti.Provider,{value:d,children:e})},sv=f.createContext({strict:!1}),cf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ia={};for(const e in cf)Ia[e]={isEnabled:t=>cf[e].some(r=>!!t[r])};function f5(e){for(const t in e)Ia[t]={...Ia[t],...e[t]}}const g5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||g5.has(e)}let av=e=>!Qo(e);function p5(e){e&&(av=t=>t.startsWith("on")?!Qo(t):e(t))}try{p5(require("@emotion/is-prop-valid").default)}catch{}function x5(e,t,r){const a={};for(const n in e)n==="values"&&typeof e.values=="object"||(av(n)||r===!0&&Qo(n)||!t&&!Qo(n)||e.draggable&&n.startsWith("onDrag"))&&(a[n]=e[n]);return a}function y5(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...a)=>e(...a);return new Proxy(r,{get:(a,n)=>n==="create"?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}const Sl=f.createContext({});function Cl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ni(e){return typeof e=="string"||Array.isArray(e)}const Dh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mh=["initial",...Dh];function El(e){return Cl(e.animate)||Mh.some(t=>ni(e[t]))}function nv(e){return!!(El(e)||e.variants)}function v5(e,t){if(El(e)){const{initial:r,animate:a}=e;return{initial:r===!1||ni(r)?r:void 0,animate:ni(a)?a:void 0}}return e.inherit!==!1?t:{}}function w5(e){const{initial:t,animate:r}=v5(e,f.useContext(Sl));return f.useMemo(()=>({initial:t,animate:r}),[df(t),df(r)])}function df(e){return Array.isArray(e)?e.join(" "):e}const b5=Symbol.for("motionComponentSymbol");function ya(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function k5(e,t,r){return f.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):ya(r)&&(r.current=a))},[t])}const Lh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),j5="framerAppearId",iv="data-"+Lh(j5),ov=f.createContext({});function N5(e,t,r,a,n){var j,N;const{visualElement:i}=f.useContext(Sl),o=f.useContext(sv),l=f.useContext(_l),c=f.useContext(Ah).reducedMotion,d=f.useRef(null);a=a||o.renderer,!d.current&&a&&(d.current=a(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=f.useContext(ov);u&&!u.projection&&n&&(u.type==="html"||u.type==="svg")&&_5(d.current,r,n,h);const m=f.useRef(!1);f.useInsertionEffect(()=>{u&&m.current&&u.update(r,l)});const x=r[iv],k=f.useRef(!!x&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,x))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,x)));return lh(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),Th.render(u.render),k.current&&u.animationState&&u.animationState.animateChanges())}),f.useEffect(()=>{u&&(!k.current&&u.animationState&&u.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,x)}),k.current=!1))}),u}function _5(e,t,r,a){const{layoutId:n,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:lv(e.parent)),e.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!o||l&&ya(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:u,layoutScroll:c,layoutRoot:d})}function lv(e){if(e)return e.options.allowProjection!==!1?e.projection:lv(e.parent)}function S5({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:a,Component:n}){e&&f5(e);function i(l,c){let d;const u={...f.useContext(Ah),...l,layoutId:C5(l)},{isStatic:h}=u,m=w5(l),x=a(l,h);if(!h&&oh){E5();const k=T5(u);d=k.MeasureLayout,m.visualElement=N5(n,x,u,t,k.ProjectionNode)}return s.jsxs(Sl.Provider,{value:m,children:[d&&m.visualElement?s.jsx(d,{visualElement:m.visualElement,...u}):null,r(n,l,k5(x,m.visualElement,c),x,h,m.visualElement)]})}i.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=f.forwardRef(i);return o[b5]=n,o}function C5({layoutId:e}){const t=f.useContext(ti).id;return t&&e!==void 0?t+"-"+e:e}function E5(e,t){f.useContext(sv).strict}function T5(e){const{drag:t,layout:r}=Ia;if(!t&&!r)return{};const a={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const ii={};function P5(e){for(const t in e)ii[t]=e[t],ph(t)&&(ii[t].isCSSVariable=!0)}function cv(e,{layout:t,layoutId:r}){return Xa.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!ii[e]||e==="opacity")}const A5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D5=Ya.length;function M5(e,t,r){let a="",n=!0;for(let i=0;i<D5;i++){const o=Ya[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=Yy(l,Eh[o]);if(!c){n=!1;const u=A5[o]||o;a+=`${u}(${d}) `}r&&(t[o]=d)}}return a=a.trim(),r?a=r(t,n?"":a):n&&(a="none"),a}function Rh(e,t,r){const{style:a,vars:n,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Xa.has(c)){o=!0;continue}else if(ph(c)){n[c]=d;continue}else{const u=Yy(d,Eh[c]);c.startsWith("origin")?(l=!0,i[c]=u):a[c]=u}}if(t.transform||(o||r?a.transform=M5(t,e.transform,r):a.transform&&(a.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;a.transformOrigin=`${c} ${d} ${u}`}}const Oh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dv(e,t,r){for(const a in t)!pt(t[a])&&!cv(a,r)&&(e[a]=t[a])}function L5({transformTemplate:e},t){return f.useMemo(()=>{const r=Oh();return Rh(r,t,e),Object.assign({},r.vars,r.style)},[t])}function R5(e,t){const r=e.style||{},a={};return dv(a,r,e),Object.assign(a,L5(e,t)),a}function O5(e,t){const r={},a=R5(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const $5={offset:"stroke-dashoffset",array:"stroke-dasharray"},I5={offset:"strokeDashoffset",array:"strokeDasharray"};function F5(e,t,r=1,a=0,n=!0){e.pathLength=1;const i=n?$5:I5;e[i.offset]=he.transform(-a);const o=he.transform(t),l=he.transform(r);e[i.array]=`${o} ${l}`}function uv(e,{attrX:t,attrY:r,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(Rh(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),a!==void 0&&(h.scale=a),n!==void 0&&F5(h,n,i,o,!1)}const hv=()=>({...Oh(),attrs:{}}),mv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function U5(e,t,r,a){const n=f.useMemo(()=>{const i=hv();return uv(i,t,mv(a),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};dv(i,e.style,e),n.style={...i,...n.style}}return n}const V5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $h(e){return typeof e!="string"||e.includes("-")?!1:!!(V5.indexOf(e)>-1||/[A-Z]/u.test(e))}function z5(e=!1){return(r,a,n,{latestValues:i},o)=>{const c=($h(r)?U5:O5)(a,i,o,r),d=x5(a,typeof r=="string",e),u=r!==f.Fragment?{...d,...c,ref:n}:{},{children:h}=a,m=f.useMemo(()=>pt(h)?h.get():h,[h]);return f.createElement(r,{...u,children:m})}}function uf(e){const t=[{},{}];return e==null||e.values.forEach((r,a)=>{t[0][a]=r.get(),t[1][a]=r.getVelocity()}),t}function Ih(e,t,r,a){if(typeof t=="function"){const[n,i]=uf(a);t=t(r!==void 0?r:e.custom,n,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,i]=uf(a);t=t(r!==void 0?r:e.custom,n,i)}return t}function xo(e){return pt(e)?e.get():e}function B5({scrapeMotionValuesFromProps:e,createRenderState:t},r,a,n){return{latestValues:H5(r,a,n,e),renderState:t()}}const fv=e=>(t,r)=>{const a=f.useContext(Sl),n=f.useContext(_l),i=()=>B5(e,t,a,n);return r?i():ih(i)};function H5(e,t,r,a){const n={},i=a(e,{});for(const m in i)n[m]=xo(i[m]);let{initial:o,animate:l}=e;const c=El(e),d=nv(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!Cl(h)){const m=Array.isArray(h)?h:[h];for(let x=0;x<m.length;x++){const k=Ih(e,m[x]);if(k){const{transitionEnd:j,transition:N,...g}=k;for(const p in g){let v=g[p];if(Array.isArray(v)){const S=u?v.length-1:0;v=v[S]}v!==null&&(n[p]=v)}for(const p in j)n[p]=j[p]}}}return n}function Fh(e,t,r){var i;const{style:a}=e,n={};for(const o in a)(pt(a[o])||t.style&&pt(t.style[o])||cv(o,e)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(n[o]=a[o]);return n}const W5={useVisualState:fv({scrapeMotionValuesFromProps:Fh,createRenderState:Oh})};function gv(e,t,r){const a=Fh(e,t,r);for(const n in e)if(pt(e[n])||pt(t[n])){const i=Ya.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=e[n]}return a}const q5={useVisualState:fv({scrapeMotionValuesFromProps:gv,createRenderState:hv})};function G5(e,t){return function(a,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...$h(a)?q5:W5,preloadedFeatures:e,useRender:z5(n),createVisualElement:t,Component:a};return S5(o)}}function oi(e,t,r){const a=e.getProps();return Ih(a,t,r!==void 0?r:a.custom,e)}const Gd=e=>Array.isArray(e);function K5(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,$a(r))}function Y5(e){return Gd(e)?e[e.length-1]||0:e}function X5(e,t){const r=oi(e,t);let{transitionEnd:a={},transition:n={},...i}=r||{};i={...i,...a};for(const o in i){const l=Y5(i[o]);K5(e,o,l)}}function J5(e){return!!(pt(e)&&e.add)}function Kd(e,t){const r=e.getValue("willChange");if(J5(r))return r.add(t);if(!r&&Ur.WillChange){const a=new Ur.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function pv(e){return e.props[iv]}const Q5=e=>e!==null;function Z5(e,{repeat:t,repeatType:r="loop"},a){const n=e.filter(Q5),i=t&&r!=="loop"&&t%2===1?0:n.length-1;return n[i]}const e3={type:"spring",stiffness:500,damping:25,restSpeed:10},t3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),r3={type:"keyframes",duration:.8},s3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},a3=(e,{keyframes:t})=>t.length>2?r3:Xa.has(e)?e.startsWith("scale")?t3(t[1]):e3:s3;function n3({when:e,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Uh=(e,t,r,a={},n,i)=>o=>{const l=Ch(a,e)||{},c=l.delay||a.delay||0;let{elapsed:d=0}=a;d=d-br(c);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:n};n3(l)||Object.assign(u,a3(e,u)),u.duration&&(u.duration=br(u.duration)),u.repeatDelay&&(u.repeatDelay=br(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),(Ur.instantAnimations||Ur.skipAnimations)&&(h=!0,u.duration=0,u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const m=Z5(u.keyframes,l);if(m!==void 0){Fe.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new Nh(u):new LS(u)};function i3({protectedKeys:e,needsAnimating:t},r){const a=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function xv(e,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;a&&(i=a);const c=[],d=n&&e.animationState&&e.animationState.getState()[n];for(const u in l){const h=e.getValue(u,e.latestValues[u]??null),m=l[u];if(m===void 0||d&&i3(d,u))continue;const x={delay:r,...Ch(i||{},u)},k=h.get();if(k!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===k&&!x.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const g=pv(e);if(g){const p=window.MotionHandoffAnimation(g,u,Fe);p!==null&&(x.startTime=p,j=!0)}}Kd(e,u),h.start(Uh(u,h,m,e.shouldReduceMotion&&Hy.has(u)?{type:!1}:x,e,j));const N=h.animation;N&&c.push(N)}return o&&Promise.all(c).then(()=>{Fe.update(()=>{o&&X5(e,o)})}),c}function Yd(e,t,r={}){var c;const a=oi(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:n=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(xv(e,a,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=n;return o3(e,t,u+d,h,m,r)}:()=>Promise.resolve(),{when:l}=n;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function o3(e,t,r=0,a=0,n=1,i){const o=[],l=(e.variantChildren.size-1)*a,c=n===1?(d=0)=>d*a:(d=0)=>l-d*a;return Array.from(e.variantChildren).sort(l3).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Yd(d,t,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function l3(e,t){return e.sortNodePosition(t)}function c3(e,t,r={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>Yd(e,i,r));a=Promise.all(n)}else if(typeof t=="string")a=Yd(e,t,r);else{const n=typeof t=="function"?oi(e,t,r.custom):t;a=Promise.all(xv(e,n,r))}return a.then(()=>{e.notify("AnimationComplete",t)})}function yv(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let a=0;a<r;a++)if(t[a]!==e[a])return!1;return!0}const d3=Mh.length;function vv(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?vv(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<d3;r++){const a=Mh[r],n=e.props[a];(ni(n)||n===!1)&&(t[a]=n)}return t}const u3=[...Dh].reverse(),h3=Dh.length;function m3(e){return t=>Promise.all(t.map(({animation:r,options:a})=>c3(e,r,a)))}function f3(e){let t=m3(e),r=hf(),a=!0;const n=c=>(d,u)=>{var m;const h=oi(e,u,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:x,transitionEnd:k,...j}=h;d={...d,...j,...k}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=vv(e.parent)||{},h=[],m=new Set;let x={},k=1/0;for(let N=0;N<h3;N++){const g=u3[N],p=r[g],v=d[g]!==void 0?d[g]:u[g],S=ni(v),y=g===c?p.isActive:null;y===!1&&(k=N);let _=v===u[g]&&v!==d[g]&&S;if(_&&a&&e.manuallyAnimateOnMount&&(_=!1),p.protectedKeys={...x},!p.isActive&&y===null||!v&&!p.prevProp||Cl(v)||typeof v=="boolean")continue;const C=g3(p.prevProp,v);let M=C||g===c&&p.isActive&&!_&&S||N>k&&S,W=!1;const q=Array.isArray(v)?v:[v];let Z=q.reduce(n(g),{});y===!1&&(Z={});const{prevResolvedValues:se={}}=p,B={...se,...Z},ye=J=>{M=!0,m.has(J)&&(W=!0,m.delete(J)),p.needsAnimating[J]=!0;const $=e.getValue(J);$&&($.liveStyle=!1)};for(const J in B){const $=Z[J],O=se[J];if(x.hasOwnProperty(J))continue;let H=!1;Gd($)&&Gd(O)?H=!yv($,O):H=$!==O,H?$!=null?ye(J):m.add(J):$!==void 0&&m.has(J)?ye(J):p.protectedKeys[J]=!0}p.prevProp=v,p.prevResolvedValues=Z,p.isActive&&(x={...x,...Z}),a&&e.blockInitialAnimation&&(M=!1),M&&(!(_&&C)||W)&&h.push(...q.map(J=>({animation:J,options:{type:g}})))}if(m.size){const N={};if(typeof d.initial!="boolean"){const g=oi(e,Array.isArray(d.initial)?d.initial[0]:d.initial);g&&g.transition&&(N.transition=g.transition)}m.forEach(g=>{const p=e.getBaseTarget(g),v=e.getValue(g);v&&(v.liveStyle=!0),N[g]=p??null}),h.push({animation:N})}let j=!!h.length;return a&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(j=!1),a=!1,j?t(h):Promise.resolve()}function l(c,d){var h;if(r[c].isActive===d)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var x;return(x=m.animationState)==null?void 0:x.setActive(c,d)}),r[c].isActive=d;const u=o(c);for(const m in r)r[m].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=hf(),a=!0}}}function g3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!yv(t,e):!1}function _s(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hf(){return{animate:_s(!0),whileInView:_s(),whileHover:_s(),whileTap:_s(),whileDrag:_s(),whileFocus:_s(),exit:_s()}}class bs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class p3 extends bs{constructor(t){super(t),t.animationState||(t.animationState=f3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Cl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let x3=0;class y3 extends bs{constructor(){super(...arguments),this.id=x3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const v3={animation:{Feature:p3},exit:{Feature:y3}};function li(e,t,r,a={passive:!0}){return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r)}function ki(e){return{point:{x:e.pageX,y:e.pageY}}}const w3=e=>t=>Ph(t)&&e(t,ki(t));function Dn(e,t,r,a){return li(e,t,w3(r),a)}function wv({top:e,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:e,max:a}}}function b3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function k3(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}const bv=1e-4,j3=1-bv,N3=1+bv,kv=.01,_3=0-kv,S3=0+kv;function wt(e){return e.max-e.min}function C3(e,t,r){return Math.abs(e-t)<=r}function mf(e,t,r,a=.5){e.origin=a,e.originPoint=Ve(t.min,t.max,e.origin),e.scale=wt(r)/wt(t),e.translate=Ve(r.min,r.max,e.origin)-e.originPoint,(e.scale>=j3&&e.scale<=N3||isNaN(e.scale))&&(e.scale=1),(e.translate>=_3&&e.translate<=S3||isNaN(e.translate))&&(e.translate=0)}function Mn(e,t,r,a){mf(e.x,t.x,r.x,a?a.originX:void 0),mf(e.y,t.y,r.y,a?a.originY:void 0)}function ff(e,t,r){e.min=r.min+t.min,e.max=e.min+wt(t)}function E3(e,t,r){ff(e.x,t.x,r.x),ff(e.y,t.y,r.y)}function gf(e,t,r){e.min=t.min-r.min,e.max=e.min+wt(t)}function Ln(e,t,r){gf(e.x,t.x,r.x),gf(e.y,t.y,r.y)}const pf=()=>({translate:0,scale:1,origin:0,originPoint:0}),va=()=>({x:pf(),y:pf()}),xf=()=>({min:0,max:0}),Ge=()=>({x:xf(),y:xf()});function Ut(e){return[e("x"),e("y")]}function wc(e){return e===void 0||e===1}function Xd({scale:e,scaleX:t,scaleY:r}){return!wc(e)||!wc(t)||!wc(r)}function Ps(e){return Xd(e)||jv(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function jv(e){return yf(e.x)||yf(e.y)}function yf(e){return e&&e!=="0%"}function Zo(e,t,r){const a=e-r,n=t*a;return r+n}function vf(e,t,r,a,n){return n!==void 0&&(e=Zo(e,n,a)),Zo(e,r,a)+t}function Jd(e,t=0,r=1,a,n){e.min=vf(e.min,t,r,a,n),e.max=vf(e.max,t,r,a,n)}function Nv(e,{x:t,y:r}){Jd(e.x,t.translate,t.scale,t.originPoint),Jd(e.y,r.translate,r.scale,r.originPoint)}const wf=.999999999999,bf=1.0000000000001;function T3(e,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,o;for(let l=0;l<n;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ba(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Nv(e,o)),a&&Ps(i.latestValues)&&ba(e,i.latestValues))}t.x<bf&&t.x>wf&&(t.x=1),t.y<bf&&t.y>wf&&(t.y=1)}function wa(e,t){e.min=e.min+t,e.max=e.max+t}function kf(e,t,r,a,n=.5){const i=Ve(e.min,e.max,n);Jd(e,t,r,i,a)}function ba(e,t){kf(e.x,t.x,t.scaleX,t.scale,t.originX),kf(e.y,t.y,t.scaleY,t.scale,t.originY)}function _v(e,t){return wv(k3(e.getBoundingClientRect(),t))}function P3(e,t,r){const a=_v(e,r),{scroll:n}=t;return n&&(wa(a.x,n.offset.x),wa(a.y,n.offset.y)),a}const Sv=({current:e})=>e?e.ownerDocument.defaultView:null,jf=(e,t)=>Math.abs(e-t);function A3(e,t){const r=jf(e.x,t.x),a=jf(e.y,t.y);return Math.sqrt(r**2+a**2)}class Cv{constructor(t,r,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=kc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=A3(h.offset,{x:0,y:0})>=3;if(!m&&!x)return;const{point:k}=h,{timestamp:j}=it;this.history.push({...k,timestamp:j});const{onStart:N,onMove:g}=this.handlers;m||(N&&N(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=bc(m,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:x,onSessionEnd:k,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=kc(h.type==="pointercancel"?this.lastMoveEventInfo:bc(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,N),k&&k(h,N)},!Ph(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.contextWindow=n||window;const o=ki(t),l=bc(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=it;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(t,kc(l,this.history)),this.removeListeners=vi(Dn(this.contextWindow,"pointermove",this.handlePointerMove),Dn(this.contextWindow,"pointerup",this.handlePointerUp),Dn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function bc(e,t){return t?{point:t(e.point)}:e}function Nf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function kc({point:e},t){return{point:e,delta:Nf(e,Ev(t)),offset:Nf(e,D3(t)),velocity:M3(t,.1)}}function D3(e){return e[0]}function Ev(e){return e[e.length-1]}function M3(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,a=null;const n=Ev(e);for(;r>=0&&(a=e[r],!(n.timestamp-a.timestamp>br(t)));)r--;if(!a)return{x:0,y:0};const i=kr(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function L3(e,{min:t,max:r},a){return t!==void 0&&e<t?e=a?Ve(t,e,a.min):Math.max(e,t):r!==void 0&&e>r&&(e=a?Ve(r,e,a.max):Math.min(e,r)),e}function _f(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function R3(e,{top:t,left:r,bottom:a,right:n}){return{x:_f(e.x,r,n),y:_f(e.y,t,a)}}function Sf(e,t){let r=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,a]=[a,r]),{min:r,max:a}}function O3(e,t){return{x:Sf(e.x,t.x),y:Sf(e.y,t.y)}}function $3(e,t){let r=.5;const a=wt(e),n=wt(t);return n>a?r=ri(t.min,t.max-a,e.min):a>n&&(r=ri(e.min,e.max-n,t.min)),Fr(0,1,r)}function I3(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Qd=.35;function F3(e=Qd){return e===!1?e=0:e===!0&&(e=Qd),{x:Cf(e,"left","right"),y:Cf(e,"top","bottom")}}function Cf(e,t,r){return{min:Ef(e,t),max:Ef(e,r)}}function Ef(e,t){return typeof e=="number"?e:e[t]||0}const U3=new WeakMap;class V3{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ki(u).point)},i=(u,h)=>{const{drag:m,dragPropagation:x,onDragStart:k}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XS(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ut(N=>{let g=this.getAxisMotionValue(N).get()||0;if(jr.test(g)){const{projection:p}=this.visualElement;if(p&&p.layout){const v=p.layout.layoutBox[N];v&&(g=wt(v)*(parseFloat(g)/100))}}this.originPoint[N]=g}),k&&Fe.postRender(()=>k(u,h)),Kd(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:k,onDrag:j}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:N}=h;if(x&&this.currentDirection===null){this.currentDirection=z3(N),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",h.point,N),this.updateAxis("y",h.point,N),this.visualElement.render(),j&&j(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Ut(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Cv(t,{onSessionStart:n,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Sv(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Fe.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!Zi(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=L3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;t&&ya(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=R3(a.layoutBox,t):this.constraints=!1,this.elastic=F3(r),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ut(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=I3(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ya(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=P3(a,n.root,this.visualElement.getTransformPagePoint());let o=O3(n.layout.layoutBox,i);if(r){const l=r(b3(o));this.hasMutatedConstraints=!!l,l&&(o=wv(l))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Ut(u=>{if(!Zi(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=n?200:1e6,x=n?40:1e7,k={type:"inertia",velocity:a?t[u]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,k)});return Promise.all(d).then(l)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return Kd(this.visualElement,t),a.start(Uh(t,a,0,r,this.visualElement,!1))}stopAnimation(){Ut(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ut(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Ut(r=>{const{drag:a}=this.getProps();if(!Zi(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:l}=n.layout.layoutBox[r];i.set(t[r]-Ve(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!ya(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Ut(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();n[o]=$3({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Ut(o=>{if(!Zi(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Ve(c,d,n[o]))})}addListeners(){if(!this.visualElement.current)return;U3.set(this.visualElement,this);const t=this.visualElement.current,r=Dn(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),a=()=>{const{dragConstraints:c}=this.getProps();ya(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Fe.read(a);const o=li(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ut(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=Qd,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Zi(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function z3(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class B3 extends bs{constructor(t){super(t),this.removeGroupControls=Kt,this.removeListeners=Kt,this.controls=new V3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tf=e=>(t,r)=>{e&&Fe.postRender(()=>e(t,r))};class H3 extends bs{constructor(){super(...arguments),this.removePointerDownListener=Kt}onPointerDown(t){this.session=new Cv(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Sv(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:Tf(t),onStart:Tf(r),onMove:a,onEnd:(i,o)=>{delete this.session,n&&Fe.postRender(()=>n(i,o))}}}mount(){this.removePointerDownListener=Dn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ln={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(he.test(e))e=parseFloat(e);else return e;const r=Pf(e,t.target.x),a=Pf(e,t.target.y);return`${r}% ${a}%`}},W3={correct:(e,{treeScale:t,projectionDelta:r})=>{const a=e,n=gs.parse(e);if(n.length>5)return a;const i=gs.createTransformer(e),o=typeof n[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;n[0+o]/=l,n[1+o]/=c;const d=Ve(l,c,.5);return typeof n[2+o]=="number"&&(n[2+o]/=d),typeof n[3+o]=="number"&&(n[3+o]/=d),i(n)}};class q3 extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;P5(G3),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,{projection:o}=a;return o&&(o.isPresent=i,n||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Fe.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Th.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Tv(e){const[t,r]=ev(),a=f.useContext(ti);return s.jsx(q3,{...e,layoutGroup:a,switchLayoutGroup:f.useContext(ov),isPresent:t,safeToRemove:r})}const G3={borderRadius:{...ln,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ln,borderTopRightRadius:ln,borderBottomLeftRadius:ln,borderBottomRightRadius:ln,boxShadow:W3};function K3(e,t,r){const a=pt(e)?e:$a(e);return a.start(Uh("",a,t,r)),a.animation}const Y3=(e,t)=>e.depth-t.depth;class X3{constructor(){this.children=[],this.isDirty=!1}add(t){ch(this.children,t),this.isDirty=!0}remove(t){dh(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Y3),this.isDirty=!1,this.children.forEach(t)}}function J3(e,t){const r=Tt.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(fs(a),e(i-t))};return Fe.setup(a,!0),()=>fs(a)}const Pv=["TopLeft","TopRight","BottomLeft","BottomRight"],Q3=Pv.length,Af=e=>typeof e=="string"?parseFloat(e):e,Df=e=>typeof e=="number"||he.test(e);function Z3(e,t,r,a,n,i){n?(e.opacity=Ve(0,r.opacity??1,eC(a)),e.opacityExit=Ve(t.opacity??1,0,tC(a))):i&&(e.opacity=Ve(t.opacity??1,r.opacity??1,a));for(let o=0;o<Q3;o++){const l=`border${Pv[o]}Radius`;let c=Mf(t,l),d=Mf(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Df(c)===Df(d)?(e[l]=Math.max(Ve(Af(c),Af(d),a),0),(jr.test(d)||jr.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||r.rotate)&&(e.rotate=Ve(t.rotate||0,r.rotate||0,a))}function Mf(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const eC=Av(0,.5,by),tC=Av(.5,.95,Kt);function Av(e,t,r){return a=>a<e?0:a>t?1:r(ri(e,t,a))}function Lf(e,t){e.min=t.min,e.max=t.max}function Ft(e,t){Lf(e.x,t.x),Lf(e.y,t.y)}function Rf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Of(e,t,r,a,n){return e-=t,e=Zo(e,1/r,a),n!==void 0&&(e=Zo(e,1/n,a)),e}function rC(e,t=0,r=1,a=.5,n,i=e,o=e){if(jr.test(t)&&(t=parseFloat(t),t=Ve(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ve(i.min,i.max,a);e===i&&(l-=t),e.min=Of(e.min,t,r,l,n),e.max=Of(e.max,t,r,l,n)}function $f(e,t,[r,a,n],i,o){rC(e,t[r],t[a],t[n],t.scale,i,o)}const sC=["x","scaleX","originX"],aC=["y","scaleY","originY"];function If(e,t,r,a){$f(e.x,t,sC,r?r.x:void 0,a?a.x:void 0),$f(e.y,t,aC,r?r.y:void 0,a?a.y:void 0)}function Ff(e){return e.translate===0&&e.scale===1}function Dv(e){return Ff(e.x)&&Ff(e.y)}function Uf(e,t){return e.min===t.min&&e.max===t.max}function nC(e,t){return Uf(e.x,t.x)&&Uf(e.y,t.y)}function Vf(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Mv(e,t){return Vf(e.x,t.x)&&Vf(e.y,t.y)}function zf(e){return wt(e.x)/wt(e.y)}function Bf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class iC{constructor(){this.members=[]}add(t){ch(this.members,t),t.scheduleRender()}remove(t){if(dh(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oC(e,t,r){let a="";const n=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((n||i||o)&&(a=`translate3d(${n}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:x,skewY:k}=r;d&&(a=`perspective(${d}px) ${a}`),u&&(a+=`rotate(${u}deg) `),h&&(a+=`rotateX(${h}deg) `),m&&(a+=`rotateY(${m}deg) `),x&&(a+=`skewX(${x}deg) `),k&&(a+=`skewY(${k}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(a+=`scale(${l}, ${c})`),a||"none"}const jc=["","X","Y","Z"],lC={visibility:"hidden"},cC=1e3;let dC=0;function Nc(e,t,r,a){const{latestValues:n}=t;n[e]&&(r[e]=n[e],t.setStaticValue(e,0),a&&(a[e]=0))}function Lv(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=pv(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Fe,!(n||i))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&Lv(a)}function Rv({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},l=t==null?void 0:t()){this.id=dC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mC),this.nodes.forEach(yC),this.nodes.forEach(vC),this.nodes.forEach(fC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new X3)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mh),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Zy(o)&&!r5(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=J3(h,250),yo.hasAnimatedSinceResize&&(yo.hasAnimatedSinceResize=!1,this.nodes.forEach(Wf))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||d.getDefaultTransition()||NC,{onLayoutAnimationStart:j,onLayoutAnimationComplete:N}=d.getProps(),g=!this.targetLayout||!Mv(this.targetLayout,x),p=!h&&m;if(this.options.layoutRoot||this.resumeFrom||p||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...Ch(k,"layout"),onPlay:j,onComplete:N};(d.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,p)}else h||Wf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wC),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Lv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hf);return}this.isUpdating||this.nodes.forEach(pC),this.isUpdating=!1,this.nodes.forEach(xC),this.nodes.forEach(uC),this.nodes.forEach(hC),this.clearAllSnapshots();const l=Tt.now();it.delta=Fr(0,1e3/60,l-it.timestamp),it.timestamp=l,it.isProcessing=!0,fc.update.process(it),fc.preRender.process(it),fc.render.process(it),it.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Th.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gC),this.sharedNodes.forEach(bC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wt(this.snapshot.measuredBox.x)&&!wt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=a(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Dv(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Ps(this.latestValues)||u)&&(n(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),_C(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return Ge();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(SC))){const{scroll:u}=this.root;u&&(wa(l.x,u.offset.x),wa(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=Ge();if(Ft(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Ft(l,o),wa(l.x,h.offset.x),wa(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Ge();Ft(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ba(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ps(u.latestValues)&&ba(c,u.latestValues)}return Ps(this.latestValues)&&ba(c,this.latestValues),c}removeTransform(o){const l=Ge();Ft(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ps(d.latestValues))continue;Xd(d.latestValues)&&d.updateSnapshot();const u=Ge(),h=d.measurePageBox();Ft(u,h),If(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Ps(this.latestValues)&&If(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==it.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=it.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),Ln(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),E3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),Nv(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),Ln(this.relativeTargetOrigin,this.target,x.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Xd(this.parent.latestValues)||jv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===it.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;Ft(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;T3(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ge());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rf(this.prevProjectionDelta.x,this.projectionDelta.x),Rf(this.prevProjectionDelta.y,this.projectionDelta.y)),Mn(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Bf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=va(),this.projectionDelta=va(),this.projectionDeltaWithTransform=va()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=va();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Ge(),x=c?c.source:void 0,k=this.layout?this.layout.source:void 0,j=x!==k,N=this.getStack(),g=!N||N.members.length<=1,p=!!(j&&!g&&this.options.crossfade===!0&&!this.path.some(jC));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const y=S/1e3;qf(h.x,o.x,y),qf(h.y,o.y,y),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ln(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kC(this.relativeTarget,this.relativeTargetOrigin,m,y),v&&nC(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Ge()),Ft(v,this.relativeTarget)),j&&(this.animationValues=u,Z3(u,d,this.latestValues,y,p,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{yo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$a(0)),this.currentAnimation=K3(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Ov(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ge();const h=wt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=wt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Ft(l,c),ba(l,u),Mn(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iC),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Nc("z",o,d,this.animationValues);for(let u=0;u<jc.length;u++)Nc(`rotate${jc[u]}`,o,d,this.animationValues),Nc(`skew${jc[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return lC;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=xo(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=xo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ps(this.latestValues)&&(x.transform=c?c({},""):"none",this.hasProjected=!1),x}const u=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=oC(this.projectionDeltaWithTransform,this.treeScale,u),c&&(l.transform=c(u,l.transform));const{x:h,y:m}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,d.animationValues?l.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:l.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in ii){if(u[x]===void 0)continue;const{correct:k,applyTo:j,isCSSVariable:N}=ii[x],g=l.transform==="none"?u[x]:k(u[x],d);if(j){const p=j.length;for(let v=0;v<p;v++)l[j[v]]=g}else N?this.options.visualElement.renderState.vars[x]=g:l[x]=g}return this.options.layoutId&&(l.pointerEvents=d===this?xo(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Hf),this.root.sharedNodes.clear()}}}function uC(e){e.updateLayout()}function hC(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?Ut(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],x=wt(m);m.min=a[h].min,m.max=m.min+x}):Ov(i,t.layoutBox,a)&&Ut(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],x=wt(a[h]);m.max=m.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+x)});const l=va();Mn(l,a,t.layoutBox);const c=va();o?Mn(c,e.applyTransform(n,!0),t.measuredBox):Mn(c,a,t.layoutBox);const d=!Dv(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:x}=h;if(m&&x){const k=Ge();Ln(k,t.layoutBox,m.layoutBox);const j=Ge();Ln(j,a,x.layoutBox),Mv(k,j)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=j,e.relativeTargetOrigin=k,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:a,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:a}=e.options;a&&a()}e.options.transition=void 0}function mC(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function fC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function gC(e){e.clearSnapshot()}function Hf(e){e.clearMeasurements()}function pC(e){e.isLayoutDirty=!1}function xC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Wf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yC(e){e.resolveTargetDelta()}function vC(e){e.calcProjection()}function wC(e){e.resetSkewAndRotation()}function bC(e){e.removeLeadSnapshot()}function qf(e,t,r){e.translate=Ve(t.translate,0,r),e.scale=Ve(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Gf(e,t,r,a){e.min=Ve(t.min,r.min,a),e.max=Ve(t.max,r.max,a)}function kC(e,t,r,a){Gf(e.x,t.x,r.x,a),Gf(e.y,t.y,r.y,a)}function jC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const NC={duration:.45,ease:[.4,0,.1,1]},Kf=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Yf=Kf("applewebkit/")&&!Kf("chrome/")?Math.round:Kt;function Xf(e){e.min=Yf(e.min),e.max=Yf(e.max)}function _C(e){Xf(e.x),Xf(e.y)}function Ov(e,t,r){return e==="position"||e==="preserve-aspect"&&!C3(zf(t),zf(r),.2)}function SC(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const CC=Rv({attachResizeListener:(e,t)=>li(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_c={current:void 0},$v=Rv({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_c.current){const e=new CC({});e.mount(window),e.setOptions({layoutScroll:!0}),_c.current=e}return _c.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),EC={pan:{Feature:H3},drag:{Feature:B3,ProjectionNode:$v,MeasureLayout:Tv}};function Jf(e,t,r){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,i=a[n];i&&Fe.postRender(()=>i(t,ki(t)))}class TC extends bs{mount(){const{current:t}=this.node;t&&(this.unmount=JS(t,(r,a)=>(Jf(this.node,a,"Start"),n=>Jf(this.node,n,"End"))))}unmount(){}}class PC extends bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vi(li(this.node.current,"focus",()=>this.onFocus()),li(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Qf(e,t,r){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),i=a[n];i&&Fe.postRender(()=>i(t,ki(t)))}class AC extends bs{mount(){const{current:t}=this.node;t&&(this.unmount=t5(t,(r,a)=>(Qf(this.node,a,"Start"),(n,{success:i})=>Qf(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zd=new WeakMap,Sc=new WeakMap,DC=e=>{const t=Zd.get(e.target);t&&t(e)},MC=e=>{e.forEach(DC)};function LC({root:e,...t}){const r=e||document;Sc.has(r)||Sc.set(r,{});const a=Sc.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(MC,{root:e,...t})),a[n]}function RC(e,t,r){const a=LC(t);return Zd.set(e,r),a.observe(e),()=>{Zd.delete(e),a.unobserve(e)}}const OC={some:0,all:1};class $C extends bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:OC[n]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return RC(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(IC(t,r))&&this.startObserver()}unmount(){}}function IC({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const FC={inView:{Feature:$C},tap:{Feature:AC},focus:{Feature:PC},hover:{Feature:TC}},UC={layout:{ProjectionNode:$v,MeasureLayout:Tv}},eu={current:null},Iv={current:!1};function VC(){if(Iv.current=!0,!!oh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eu.current=e.matches;e.addListener(t),t()}else eu.current=!1}const zC=new WeakMap;function BC(e,t,r){for(const a in t){const n=t[a],i=r[a];if(pt(n))e.addValue(a,n);else if(pt(i))e.addValue(a,$a(n,{owner:e}));else if(i!==n)if(e.hasValue(a)){const o=e.getValue(a);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=e.getStaticValue(a);e.addValue(a,$a(o!==void 0?o:n,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const Zf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HC{scrapeMotionValuesFromProps(t,r,a){return{}}constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_h,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Tt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=El(r),this.isVariantNode=nv(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in h){const x=h[m];c[m]!==void 0&&pt(x)&&x.set(c[m],!1)}}mount(t){this.current=t,zC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),Iv.current||VC(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=Xa.has(t);a&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ia){const r=Ia[t];if(!r)continue;const{isEnabled:a,Feature:n}=r;if(!this.features[t]&&n&&a(this.props)&&(this.features[t]=new n(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<Zf.length;a++){const n=Zf[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,o=t[i];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=BC(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const a=this.values.get(t);r!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=$a(r===null?void 0:r,{owner:this}),this.addValue(t,a)),a}readValue(t,r){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(uy(a)||my(a))?a=parseFloat(a):!a5(a)&&gs.test(r)&&(a=Ky(t,r)),this.setBaseTarget(t,pt(a)?a.get():a)),pt(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const o=Ih(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(a=o[t])}if(r&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!pt(n)?n:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new mh),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Fv extends HC{constructor(){super(...arguments),this.KeyframeResolver=qS}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Uv(e,{style:t,vars:r},a,n){Object.assign(e.style,t,n&&n.getProjectionStyles(a));for(const i in r)e.style.setProperty(i,r[i])}function WC(e){return window.getComputedStyle(e)}class qC extends Fv{constructor(){super(...arguments),this.type="html",this.renderInstance=Uv}readValueFromInstance(t,r){var a;if(Xa.has(r))return(a=this.projection)!=null&&a.isProjecting?Vd(r):uS(t,r);{const n=WC(t),i=(ph(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return _v(t,r)}build(t,r,a){Rh(t,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,r,a){return Fh(t,r,a)}}const Vv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GC(e,t,r,a){Uv(e,t,void 0,a);for(const n in t.attrs)e.setAttribute(Vv.has(n)?n:Lh(n),t.attrs[n])}class KC extends Fv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Xa.has(r)){const a=Gy(r);return a&&a.default||0}return r=Vv.has(r)?r:Lh(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,a){return gv(t,r,a)}build(t,r,a){uv(t,r,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,r,a,n){GC(t,r,a,n)}mount(t){this.isSVGTag=mv(t.tagName),super.mount(t)}}const YC=(e,t)=>$h(e)?new KC(t):new qC(t,{allowProjection:e!==f.Fragment}),XC=G5({...v3,...FC,...EC,...UC},YC),w=y5(XC);function JC(){const{user:e}=Je(),[t,r]=f.useState(!1),[a,n]=f.useState({announcements:0,discussions:0,privateDiscussions:0}),[i,o]=f.useState([]),[l,c]=f.useState(!1),d=a.announcements+a.discussions+a.privateDiscussions,u=async()=>{if(e){c(!0);try{console.log("Loading unread data for user:",e.id);const[g,p]=await Promise.all([n_(e.id),i_(e.id)]);console.log("Unread counts:",g),console.log("Unread messages:",p),n(g),o(p),p.length===0&&console.log("No messages found, modal should show empty state")}catch(g){console.error("Error loading unread data:",g)}finally{c(!1)}}};f.useEffect(()=>e?(u(),l_(e.id,()=>{u()})):void 0,[e]);const h=()=>{console.log("Toggle clicked, current state:",t);const g=!t;r(g),g&&u(),console.log("Modal should now be:",g)},m=()=>{o_(),n({announcements:0,discussions:0,privateDiscussions:0}),o([])},x=g=>{Tn(g),n(p=>({...p,[g==="private_discussions"?"privateDiscussions":g]:0})),o(p=>p.filter(v=>v.type!==g))},k=g=>{switch(g){case"announcement":return s.jsx(pa,{className:"w-4 h-4 text-blue-500"});case"discussion":return s.jsx(Us,{className:"w-4 h-4 text-green-500"});case"private_discussion":return s.jsx(qt,{className:"w-4 h-4 text-purple-500"});default:return s.jsx(Us,{className:"w-4 h-4 text-gray-500"})}},j=g=>{switch(g){case"announcement":return"Announcement";case"discussion":return"Discussion";case"private_discussion":return"Private Message";default:return"Message"}},N=g=>{const p=new Date(g),S=Math.floor((new Date().getTime()-p.getTime())/(1e3*60));return S<1?"Just now":S<60?`${S}m ago`:S<1440?`${Math.floor(S/60)}h ago`:p.toLocaleDateString()};return e?(console.log("Rendering MessageNotifications, isOpen:",t,"totalUnread:",d),s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:h,className:"relative p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:[s.jsx(mo,{className:"h-5 w-5"}),d>0&&s.jsx(w.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:d>99?"99+":d})]}),t&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999] flex items-center justify-center p-4",onClick:g=>{g.target===g.currentTarget&&r(!1)},children:s.jsxs("div",{className:"w-full max-w-5xl max-h-[90vh] bg-white dark:bg-gray-900 rounded-3xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden transform transition-all duration-300 ease-out",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-700 dark:from-red-700 dark:to-red-800 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-full",children:s.jsx(mo,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Messages"}),s.jsx("p",{className:"text-red-100 text-sm",children:d>0?`${d} unread message${d!==1?"s":""}`:"All caught up!"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[d>0&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-all duration-200 text-sm",children:"Mark all as read"}),s.jsx("button",{onClick:()=>r(!1),className:"p-2 rounded-full bg-white/20 hover:bg-white/30 text-white transition-all duration-200",children:s.jsx(ce,{className:"h-5 w-5"})})]})]}),d>0&&s.jsxs("div",{className:"mt-4 flex gap-3",children:[a.announcements>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-full",children:[s.jsx(pa,{className:"w-4 h-4 text-white"}),s.jsxs("span",{className:"text-white text-sm font-medium",children:[a.announcements," announcement",a.announcements!==1?"s":""]})]}),a.discussions>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-full",children:[s.jsx(Us,{className:"w-4 h-4 text-white"}),s.jsxs("span",{className:"text-white text-sm font-medium",children:[a.discussions," discussion",a.discussions!==1?"s":""]})]}),a.privateDiscussions>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/20 rounded-full",children:[s.jsx(qt,{className:"w-4 h-4 text-white"}),s.jsxs("span",{className:"text-white text-sm font-medium",children:[a.privateDiscussions," private message",a.privateDiscussions!==1?"s":""]})]})]})]}),s.jsx("div",{className:"max-h-[65vh] overflow-y-auto bg-gray-50 dark:bg-gray-800",children:l?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-red-600 border-t-transparent mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400 font-medium",children:"Loading messages..."})]}):i.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mo,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No new messages"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You're all caught up with your notifications!"})]}):s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.map((g,p)=>s.jsx("div",{className:"p-6 hover:bg-white dark:hover:bg-gray-700/50 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30",children:k(g.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1 line-clamp-1",children:g.title}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(qt,{className:"w-4 h-4"}),g.sender_name]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-4 h-4"}),N(g.created_at)]}),s.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium",children:j(g.type)})]})]}),s.jsx("button",{onClick:()=>x(g.type),className:"p-2 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-all duration-200 opacity-0 group-hover:opacity-100",children:s.jsx(ce,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed line-clamp-3",children:g.content})]})]})},`${g.type}-${g.id}`))})})]})}),document.body)]})):null}function QC(){var y;const{user:e}=Je(),t=async()=>{try{await D.auth.signOut()}catch(_){console.error("Error signing out:",_)}},r=Qt(),a=Ha(),[n,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState([]),[u,h]=f.useState(null),[m,x]=f.useState([]),[k,j]=f.useState(!1),N=e&&(e.role==="admin"||e.role==="ultra_admin");f.useEffect(()=>{i(!1)},[a]),f.useEffect(()=>{e&&p()},[e]),f.useEffect(()=>{if(o){const _=c.find(C=>C.id===o);h(_||null)}else h(null)},[o,c]),f.useEffect(()=>{u?g():x([])},[u]);const g=async()=>{if(!u){x([]);return}try{const{data:_,error:C}=await D.from("sidebar_pages").select("*").eq("class_id",u.id).order("order_index",{ascending:!0});if(C)throw C;x(_||[])}catch(_){console.error("Error loading sidebar pages:",_)}},p=async()=>{if(e){j(!0);try{const{data:_,error:C}=await D.from("classes").select("*");if(C)throw C;if(!_||_.length===0){console.warn("No classes found in database");return}if(console.log("Classes loaded:",_.length),d(_),e.role==="student"){console.log("Loading assigned class for student:",e.id);const{data:W,error:q}=await D.from("class_assignments").select("class_id").eq("user_id",e.id).single();if(q)console.error("Error loading class assignment:",q),q.code==="PGRST116"&&console.warn("No class assignment found for student:",e.id);else if(W){console.log("Student assigned to class:",W.class_id);const Z=_.find(se=>se.id===W.class_id);if(Z){console.log("Setting assigned class for student:",Z.id),l(Z.id),localStorage.setItem("selectedClassId",Z.id),a.pathname==="/select-class"&&(console.log("Navigating to home from select page"),r("/")),j(!1);return}else console.error("Assigned class not found in available classes")}}const M=localStorage.getItem("selectedClassId");if(console.log("Stored class ID:",M),M){const W=_.some(q=>q.id===M);console.log("Class exists:",W),W?(console.log("Setting selected class ID:",M),l(M),a.pathname==="/select-class"&&(console.log("Navigating to home from select page"),r("/"))):(console.warn("Stored class ID not found in available classes"),localStorage.removeItem("selectedClassId"))}else console.log("No stored class ID found")}catch(_){console.error("Error loading classes:",_)}finally{j(!1)}}},v=_=>a.pathname===_,S=({to:_,icon:C,label:M})=>s.jsxs(mn,{to:_,className:`group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${v(_)?"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400"}`,children:[s.jsx(C,{className:`h-5 w-5 mr-3 transition-transform duration-200 group-hover:scale-110 ${v(_)?"text-red-600 dark:text-red-400":"text-gray-400 dark:text-gray-500 group-hover:text-red-500 dark:group-hover:text-red-400"}`}),s.jsx("span",{className:"flex-1",children:M})]});return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("div",{className:"lg:hidden fixed top-4 right-4 z-50",children:s.jsx("button",{onClick:()=>i(!n),className:"p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:n?s.jsx(ce,{className:"h-6 w-6"}):s.jsx(g4,{className:"h-6 w-6"})})}),s.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-200 ease-in-out ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs(mn,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[s.jsx("img",{src:"/lgs-logo.png",alt:"LGS JTi Logo",className:"h-9 w-auto mr-2 rounded-2xl object-center object-contain mb-[-4px]"}),s.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"LGS JTi"})]}),s.jsx(t_,{})]}),s.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:[s.jsx(S,{to:"/",icon:ny,label:"Home"}),s.jsx(S,{to:"/announcements",icon:mo,label:"Announcements"}),s.jsx(S,{to:"/subjects",icon:ms,label:"Subjects"}),s.jsx(S,{to:"/library",icon:c4,label:"Library"}),s.jsx(S,{to:"/record-room",icon:Pe,label:"Record Room"}),s.jsx(S,{to:"/afternoon-clubs",icon:ft,label:"Clubs"}),N&&s.jsx(S,{to:"/users",icon:ft,label:"Users"}),N&&s.jsx(S,{to:"/customize",icon:oy,label:"Customize"}),m.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pt-4 pb-2",children:s.jsx("div",{className:"px-4 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Custom Pages"})}),m.map(_=>s.jsxs(mn,{to:`/custom/${_.page_id}`,className:`group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ${v(`/custom/${_.page_id}`)?"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400"}`,children:[s.jsx(Pe,{className:`h-5 w-5 mr-3 transition-transform duration-200 group-hover:scale-110 ${v(`/custom/${_.page_id}`)?"text-red-600 dark:text-red-400":"text-gray-400 dark:text-gray-500 group-hover:text-red-500 dark:group-hover:text-red-400"}`}),s.jsx("span",{className:"flex-1 truncate",children:_.title})]},_.id))]})]}),s.jsx("div",{className:"px-4 py-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs(mn,{to:"/select-class",className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(cr,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:"Change Class"})]})}),s.jsxs("div",{className:"px-4 py-4 border-t border-gray-200 dark:border-gray-700 space-y-4",children:[s.jsxs("a",{href:"https://lgs254f1.edupage.org/timetable/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(yN,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:"Timetable"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400 font-semibold text-sm overflow-hidden",children:e!=null&&e.photo_url?s.jsx("img",{src:e.photo_url,alt:"Profile",className:"w-full h-full object-cover",onError:_=>{_.currentTarget.src="https://via.placeholder.com/100?text=No+Image"}}):((y=e==null?void 0:e.username)==null?void 0:y.charAt(0).toUpperCase())||"U"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(e==null?void 0:e.username)||"Ultra Admin"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(e==null?void 0:e.role)==="ultra_admin"?"Ultra Admin":(e==null?void 0:e.role)||"Ultra Admin",(e==null?void 0:e.role)==="student"&&u&&s.jsxs("span",{className:"ml-1 text-green-600 dark:text-green-400",children:[" Grade ",u.grade,"-",u.section]}),(e==null?void 0:e.role)==="student"&&k&&s.jsx("span",{className:"ml-1 text-amber-600 dark:text-amber-400",children:" Loading class..."})]})]})]}),s.jsx(JC,{}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200",children:s.jsx(h4,{className:"h-5 w-5"})})]})]})]})}),s.jsx("div",{className:"lg:pl-64",children:s.jsx("main",{className:"p-6",children:s.jsx(Ck,{context:{currentClass:u,selectedClassId:o,classes:c}})})})]})}function ZC(){return s.jsx("img",{src:"/lgs-logo.png",alt:"LGS JTi Logo",style:{width:48,height:48,objectFit:"contain",display:"block",margin:"0 auto"}})}const eg=(e,t,r,a)=>{e.style.transition=`${t} ${r}ms ${a}`},Pr=(e,t,r)=>Math.min(Math.max(e,t),r);class e6{constructor(t,r){this.glareAngle=0,this.glareOpacity=0,this.calculateGlareSize=o=>{const{width:l,height:c}=o,d=Math.sqrt(l**2+c**2);return{width:d,height:d}},this.setSize=o=>{const l=this.calculateGlareSize(o);this.glareEl.style.width=`${l.width}px`,this.glareEl.style.height=`${l.height}px`},this.update=(o,l,c,d)=>{this.updateAngle(o,l.glareReverse),this.updateOpacity(o,l,c,d)},this.updateAngle=(o,l)=>{const{xPercentage:c,yPercentage:d}=o,u=180/Math.PI,h=c?Math.atan2(d,-c)*u:0;this.glareAngle=h-(l?180:0)},this.updateOpacity=(o,l,c,d)=>{const{xPercentage:u,yPercentage:h}=o,{glarePosition:m,glareReverse:x,glareMaxOpacity:k}=l,j=c?-1:1,N=d?-1:1,g=x?-1:1;let p=0;switch(m){case"top":p=-u*j*g;break;case"right":p=h*N*g;break;case"bottom":case void 0:p=u*j*g;break;case"left":p=-h*N*g;break;case"all":p=Math.hypot(u,h)}const v=Pr(p,0,100);this.glareOpacity=v*k/100},this.render=o=>{const{glareColor:l}=o;this.glareEl.style.transform=`rotate(${this.glareAngle}deg) translate(-50%, -50%)`,this.glareEl.style.opacity=this.glareOpacity.toString(),this.glareEl.style.background=`linear-gradient(0deg, rgba(255,255,255,0) 0%, ${l} 100%)`},this.glareWrapperEl=document.createElement("div"),this.glareEl=document.createElement("div"),this.glareWrapperEl.appendChild(this.glareEl),this.glareWrapperEl.className="glare-wrapper",this.glareEl.className="glare";const a={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden",borderRadius:r,WebkitMaskImage:"-webkit-radial-gradient(white, black)",pointerEvents:"none"},n=this.calculateGlareSize(t),i={position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",pointerEvents:"none",width:`${n.width}px`,height:`${n.height}px`};Object.assign(this.glareWrapperEl.style,a),Object.assign(this.glareEl.style,i)}}class t6{constructor(){this.glareAngle=0,this.glareOpacity=0,this.tiltAngleX=0,this.tiltAngleY=0,this.tiltAngleXPercentage=0,this.tiltAngleYPercentage=0,this.update=(t,r)=>{this.updateTilt(t,r),this.updateTiltManualInput(t,r),this.updateTiltReverse(r),this.updateTiltLimits(r)},this.updateTilt=(t,r)=>{const{xPercentage:a,yPercentage:n}=t,{tiltMaxAngleX:i,tiltMaxAngleY:o}=r;this.tiltAngleX=a*i/100,this.tiltAngleY=n*o/100*-1},this.updateTiltManualInput=(t,r)=>{const{tiltAngleXManual:a,tiltAngleYManual:n,tiltMaxAngleX:i,tiltMaxAngleY:o}=r;(a!==null||n!==null)&&(this.tiltAngleX=a!==null?a:0,this.tiltAngleY=n!==null?n:0,t.xPercentage=100*this.tiltAngleX/i,t.yPercentage=100*this.tiltAngleY/o)},this.updateTiltReverse=t=>{const r=t.tiltReverse?-1:1;this.tiltAngleX=r*this.tiltAngleX,this.tiltAngleY=r*this.tiltAngleY},this.updateTiltLimits=t=>{const{tiltAxis:r}=t;this.tiltAngleX=Pr(this.tiltAngleX,-90,90),this.tiltAngleY=Pr(this.tiltAngleY,-90,90),r&&(this.tiltAngleX=r==="x"?this.tiltAngleX:0,this.tiltAngleY=r==="y"?this.tiltAngleY:0)},this.updateTiltAnglesPercentage=t=>{const{tiltMaxAngleX:r,tiltMaxAngleY:a}=t;this.tiltAngleXPercentage=this.tiltAngleX/r*100,this.tiltAngleYPercentage=this.tiltAngleY/a*100},this.render=t=>{t.style.transform+=`rotateX(${this.tiltAngleX}deg) rotateY(${this.tiltAngleY}deg) `}}}const r6={scale:1,perspective:1e3,flipVertically:!1,flipHorizontally:!1,reset:!0,transitionEasing:"cubic-bezier(.03,.98,.52,.99)",transitionSpeed:400,trackOnWindow:!1,gyroscope:!1,tiltEnable:!0,tiltReverse:!1,tiltAngleXInitial:0,tiltAngleYInitial:0,tiltMaxAngleX:20,tiltMaxAngleY:20,tiltAxis:void 0,tiltAngleXManual:null,tiltAngleYManual:null,glareEnable:!1,glareMaxOpacity:.7,glareColor:"#ffffff",glarePosition:"bottom",glareReverse:!1,glareBorderRadius:"0"};class zv extends f.PureComponent{constructor(){super(...arguments),this.wrapperEl={node:null,size:{width:0,height:0,left:0,top:0},clientPosition:{x:null,y:null,xPercentage:0,yPercentage:0},updateAnimationId:null,scale:1},this.tilt=null,this.glare=null,this.addDeviceOrientationEventListener=async()=>{if(!window.DeviceOrientationEvent)return;const t=DeviceOrientationEvent.requestPermission;typeof t=="function"?await t()==="granted"&&window.addEventListener("deviceorientation",this.onMove):window.addEventListener("deviceorientation",this.onMove)},this.setSize=()=>{this.setWrapperElSize(),this.glare&&this.glare.setSize(this.wrapperEl.size)},this.mainLoop=t=>{this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.processInput(t),this.update(t.type),this.wrapperEl.updateAnimationId=requestAnimationFrame(this.renderFrame)},this.onEnter=t=>{const{onEnter:r}=this.props;this.setSize(),this.wrapperEl.node.style.willChange="transform",this.setTransitions(),r&&r({event:t})},this.onMove=t=>{this.mainLoop(t),this.emitOnMove(t)},this.onLeave=t=>{const{onLeave:r}=this.props;if(this.setTransitions(),r&&r({event:t}),this.props.reset){const a=new CustomEvent("autoreset");this.onMove(a)}},this.processInput=t=>{const{scale:r}=this.props;switch(t.type){case"mousemove":this.wrapperEl.clientPosition.x=t.pageX,this.wrapperEl.clientPosition.y=t.pageY,this.wrapperEl.scale=r;break;case"touchmove":this.wrapperEl.clientPosition.x=t.touches[0].pageX,this.wrapperEl.clientPosition.y=t.touches[0].pageY,this.wrapperEl.scale=r;break;case"deviceorientation":this.processInputDeviceOrientation(t),this.wrapperEl.scale=r;break;case"autoreset":{const{tiltAngleXInitial:a,tiltAngleYInitial:n,tiltMaxAngleX:i,tiltMaxAngleY:o}=this.props,l=n/o*100;this.wrapperEl.clientPosition.xPercentage=Pr(a/i*100,-100,100),this.wrapperEl.clientPosition.yPercentage=Pr(l,-100,100),this.wrapperEl.scale=1;break}}},this.processInputDeviceOrientation=t=>{if(!t.gamma||!t.beta||!this.props.gyroscope)return;const{tiltMaxAngleX:r,tiltMaxAngleY:a}=this.props,n=t.gamma;this.wrapperEl.clientPosition.xPercentage=t.beta/r*100,this.wrapperEl.clientPosition.yPercentage=n/a*100,this.wrapperEl.clientPosition.xPercentage=Pr(this.wrapperEl.clientPosition.xPercentage,-100,100),this.wrapperEl.clientPosition.yPercentage=Pr(this.wrapperEl.clientPosition.yPercentage,-100,100)},this.update=t=>{const{tiltEnable:r,flipVertically:a,flipHorizontally:n}=this.props;t!=="autoreset"&&t!=="deviceorientation"&&t!=="propChange"&&this.updateClientInput(),r&&this.tilt.update(this.wrapperEl.clientPosition,this.props),this.updateFlip(),this.tilt.updateTiltAnglesPercentage(this.props),this.glare&&this.glare.update(this.wrapperEl.clientPosition,this.props,a,n)},this.updateClientInput=()=>{const{trackOnWindow:t}=this.props;let r,a;if(t){const{x:n,y:i}=this.wrapperEl.clientPosition;r=i/window.innerHeight*200-100,a=n/window.innerWidth*200-100}else{const{size:{width:n,height:i,left:o,top:l},clientPosition:{x:c,y:d}}=this.wrapperEl;r=(d-l)/i*200-100,a=(c-o)/n*200-100}this.wrapperEl.clientPosition.xPercentage=Pr(r,-100,100),this.wrapperEl.clientPosition.yPercentage=Pr(a,-100,100)},this.updateFlip=()=>{const{flipVertically:t,flipHorizontally:r}=this.props;t&&(this.tilt.tiltAngleX+=180,this.tilt.tiltAngleY*=-1),r&&(this.tilt.tiltAngleY+=180)},this.renderFrame=()=>{this.resetWrapperElTransform(),this.renderPerspective(),this.tilt.render(this.wrapperEl.node),this.renderScale(),this.glare&&this.glare.render(this.props)}}componentDidMount(){if(this.tilt=new t6,this.initGlare(),this.setSize(),this.addEventListeners(),typeof CustomEvent>"u")return;const t=new CustomEvent("autoreset");this.mainLoop(t);const r=new CustomEvent("initial");this.emitOnMove(r)}componentWillUnmount(){this.wrapperEl.updateAnimationId!==null&&cancelAnimationFrame(this.wrapperEl.updateAnimationId),this.removeEventListeners()}componentDidUpdate(){const t=new CustomEvent("propChange");this.mainLoop(t),this.emitOnMove(t)}addEventListeners(){const{trackOnWindow:t,gyroscope:r}=this.props;window.addEventListener("resize",this.setSize),t&&(window.addEventListener("mouseenter",this.onEnter),window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseout",this.onLeave),window.addEventListener("touchstart",this.onEnter),window.addEventListener("touchmove",this.onMove),window.addEventListener("touchend",this.onLeave)),r&&this.addDeviceOrientationEventListener()}removeEventListeners(){const{trackOnWindow:t,gyroscope:r}=this.props;window.removeEventListener("resize",this.setSize),t&&(window.removeEventListener("mouseenter",this.onEnter),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseout",this.onLeave),window.removeEventListener("touchstart",this.onEnter),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("touchend",this.onLeave)),r&&window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.onMove)}setWrapperElSize(){const t=this.wrapperEl.node.getBoundingClientRect();this.wrapperEl.size.width=this.wrapperEl.node.offsetWidth,this.wrapperEl.size.height=this.wrapperEl.node.offsetHeight,this.wrapperEl.size.left=t.left+window.scrollX,this.wrapperEl.size.top=t.top+window.scrollY}initGlare(){const{glareEnable:t,glareBorderRadius:r}=this.props;t&&(this.glare=new e6(this.wrapperEl.size,r),this.wrapperEl.node.appendChild(this.glare.glareWrapperEl))}emitOnMove(t){const{onMove:r}=this.props;if(!r)return;let a=0,n=0;this.glare&&(a=this.glare.glareAngle,n=this.glare.glareOpacity),r({tiltAngleX:this.tilt.tiltAngleX,tiltAngleY:this.tilt.tiltAngleY,tiltAngleXPercentage:this.tilt.tiltAngleXPercentage,tiltAngleYPercentage:this.tilt.tiltAngleYPercentage,glareAngle:a,glareOpacity:n,event:t})}resetWrapperElTransform(){this.wrapperEl.node.style.transform=""}renderPerspective(){const{perspective:t}=this.props;this.wrapperEl.node.style.transform+=`perspective(${t}px) `}renderScale(){const{scale:t}=this.wrapperEl;this.wrapperEl.node.style.transform+=`scale3d(${t},${t},${t})`}setTransitions(){const{transitionSpeed:t,transitionEasing:r}=this.props;eg(this.wrapperEl.node,"all",t,r),this.glare&&eg(this.glare.glareEl,"opacity",t,r)}render(){const{children:t,className:r,style:a}=this.props;return s.jsx("div",{ref:n=>{this.wrapperEl.node=n},onMouseEnter:this.onEnter,onMouseMove:this.onMove,onMouseLeave:this.onLeave,onTouchStart:this.onEnter,onTouchMove:this.onMove,onTouchEnd:this.onLeave,className:r,style:a,children:t})}}zv.defaultProps=r6;function s6(){const e=Qt(),[t,r]=f.useState(!1),[a,n]=f.useState(null),{session:i,user:o}=Je();f.useEffect(()=>{i&&o&&(console.log("Login.tsx: Session detected, redirecting to home",i,o),e("/"))},[i,o,e]),f.useEffect(()=>{const{data:{subscription:d}}=D.auth.onAuthStateChange((u,h)=>{console.log("Login.tsx: Auth state change",u,h)});return()=>d.unsubscribe()},[]);const l=async()=>{r(!0),n(null);const{error:d}=await D.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});d&&(console.error("Error logging in with Google:",d.message),n("Failed to sign in with Google. Please try again."),r(!1))},c=async()=>{r(!0),n(null);try{await D.auth.signOut();const{error:d}=await D.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,queryParams:{prompt:"select_account"}}});d&&(console.error("Error signing in with different account:",d.message),n("Failed to sign in with different account. Please try again."),r(!1))}catch(d){console.error("Error in handleSignInWithDifferentAccount:",d),n("An unexpected error occurred. Please try again."),r(!1)}};return s.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 px-4 sm:px-0",children:[s.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[s.jsx("div",{className:"absolute top-10 left-10 w-40 h-40 bg-indigo-100 dark:bg-indigo-900/30 rounded-full blur-2xl animate-float-slow"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-56 h-56 bg-white/40 dark:bg-gray-700/40 rounded-full blur-3xl animate-float"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full blur-xl animate-float-reverse"}),s.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-blue-100 dark:bg-blue-900/20 rounded-full blur-2xl animate-float-slow"})]}),s.jsx(zv,{tiltMaxAngleX:15,tiltMaxAngleY:15,glareEnable:!0,glareMaxOpacity:.18,className:"z-10 w-full max-w-lg",children:s.jsxs("div",{className:"w-full max-w-lg p-12 space-y-8 rounded-3xl shadow-2xl bg-white/80 dark:bg-gray-800/90 backdrop-blur-lg border border-white/40 dark:border-gray-700/50 relative",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-fade-in-up",children:s.jsx(ZC,{})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 dark:text-white drop-shadow-lg tracking-tight animate-fade-in-up delay-100",children:"LGS JTi LMS"}),s.jsx("p",{className:"mt-2 text-lg text-gray-700 dark:text-gray-300 animate-fade-in-up delay-200",children:"Sign in to continue"})]}),a&&s.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-lg animate-fade-in-up delay-300",children:a}),s.jsxs("div",{className:"space-y-4 animate-fade-in-up delay-400",children:[s.jsx("button",{onClick:l,disabled:t,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-xl shadow-lg text-lg font-semibold text-white bg-gradient-to-r from-red-500 via-red-600 to-red-700 hover:from-red-600 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 disabled:opacity-50 transition-transform transform hover:scale-105 active:scale-95",style:{boxShadow:"0 8px 32px 0 rgba(185, 28, 28, 0.13)"},children:t?s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"bg-white rounded-full p-1 mr-3 shadow-md flex items-center justify-center",style:{minWidth:32,minHeight:32},children:s.jsxs("svg",{className:"w-6 h-6","aria-hidden":"true",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.99 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),s.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})}),"Sign in with Google"]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white/70 dark:bg-gray-800/70 text-gray-500 dark:text-gray-400",children:"or"})})]}),s.jsx("button",{onClick:c,disabled:t,className:"w-full flex justify-center items-center py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-xl shadow-lg text-lg font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50 transition-transform transform hover:scale-105 active:scale-95",children:t?s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-600 dark:border-gray-400"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"bg-white rounded-full p-1 mr-3 shadow-md flex items-center justify-center",style:{minWidth:32,minHeight:32},children:s.jsxs("svg",{className:"w-6 h-6","aria-hidden":"true",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 1.99 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),s.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})}),"Sign in with different account"]})})]})]})}),s.jsx("style",{children:`
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-slow {
          animation: float 10s ease-in-out infinite;
        }
        .animate-float-reverse {
          animation: float-reverse 8s ease-in-out infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0) scale(1); }
          50% { transform: translateY(-30px) scale(1.05); }
        }
        @keyframes float-reverse {
          0%, 100% { transform: translateY(0) scale(1); }
          50% { transform: translateY(30px) scale(0.97); }
        }
        .animate-fade-in-up {
          opacity: 0;
          transform: translateY(30px) scale(0.98);
          animation: fadeInUp 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        .animate-fade-in-up.delay-100 { animation-delay: 0.1s; }
        .animate-fade-in-up.delay-200 { animation-delay: 0.2s; }
        .animate-fade-in-up.delay-300 { animation-delay: 0.3s; }
        .animate-fade-in-up.delay-400 { animation-delay: 0.4s; }
        @keyframes fadeInUp {
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]})}const a6="/Screenshot 2025-05-03 164632.png";function n6(e=.4){const[t,r]=f.useState(0);return f.useEffect(()=>{const a=()=>{r(window.scrollY*e)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[e]),t}function i6(){var r0,s0;const e=Qt();console.log("Home component rendering");const[t,r]=f.useState([]),[a,n]=f.useState(""),[i,o]=f.useState([]),[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(null),[x,k]=f.useState(!1),[j,N]=f.useState(null),[g,p]=f.useState({title:"",description:"",due_date:"",subject_id:"",class_id:""}),[v,S]=f.useState([]),{user:y}=Je(),{currentClass:_,classes:C}=zr(),[M,W]=f.useState({title:"",content:""}),[q,Z]=f.useState([]),[se,B]=f.useState(!1),[ye,Y]=f.useState(!1),[te,J]=f.useState(""),[$,O]=f.useState(""),[H,U]=f.useState(!1),[X,ue]=f.useState(null),[ge,de]=f.useState(null),[me,_e]=f.useState(!1),[b,P]=f.useState(!1),[T,V]=f.useState(!1),[R,ae]=f.useState(!1),[F,ee]=f.useState(null),[ve,Le]=f.useState(!1),[K,re]=f.useState(!1),[ke,He]=f.useState(!1),[Nt,yt]=f.useState(null),[I,A]=f.useState(""),[z,le]=f.useState(null),[we,be]=f.useState([]),[Se,Br]=f.useState(!1),[mr,Vh]=f.useState(null),[ji,zh]=f.useState({}),[Hv,Bh]=f.useState(!1),[Hh,Wh]=f.useState(null),[Zt,Ni]=f.useState([]),[O6,Wv]=f.useState([]),[qv,qh]=f.useState(!1),[Ja,Gh]=f.useState(null),[$6,Kh]=f.useState(!1),Gv=n6(.4),[Pl,Yh]=f.useState([]),Xh=[{name:"August",value:"august"},{name:"September",value:"september"},{name:"October",value:"october"},{name:"November",value:"november"},{name:"December",value:"december"},{name:"January",value:"january"},{name:"February",value:"february"},{name:"March",value:"march"},{name:"April",value:"april"},{name:"May",value:"may"},{name:"June",value:"june"}],Al={initial:{opacity:0,y:40,rotateY:-10},animate:{opacity:1,y:0,rotateY:0,transition:{type:"spring",stiffness:80,damping:18}},whileHover:{scale:1.04,rotateY:8,boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}},Dl=f.useCallback(async()=>{console.log("Starting loadData"),u(!0),m(null);try{try{console.log("Loading announcements");let L=D.rpc("get_announcements_with_profiles").order("created_at",{ascending:!1});_!=null&&_.id&&(y==null?void 0:y.role)!=="ultra_admin"&&(L=L.eq("class_id",_.id));const{data:Q,error:oe}=await L;console.log("Announcements loaded:",Q,oe),oe?(console.warn("Error loading announcements:",oe),o([])):o(Q||[])}catch(L){console.warn("Fallback for announcements:",L),o([])}try{console.log("Loading discussions");let L=D.rpc("get_discussions_with_profiles").order("created_at",{ascending:!1});_!=null&&_.id&&(L=L.eq("class_id",_.id));const{data:Q,error:oe}=await L;console.log("Discussions loaded:",Q,oe),oe?(console.warn("Error loading discussions:",oe),r([])):r(Q||[])}catch(L){console.warn("Fallback for discussions:",L),r([])}try{console.log("Loading due works"),await Si()}catch(L){console.warn("Error loading due works:",L),c([])}const E=[...i.slice(0,3).map(L=>({id:L.id,type:"announcement",title:L.title,created_at:L.created_at,description:`New announcement: ${L.title}`})),...t.slice(0,3).map(L=>({id:L.id,type:"discussion",title:L.content,created_at:L.created_at,description:`New discussion: ${L.content.substring(0,50)}...`})),...l.slice(0,3).map(L=>({id:L.id,type:"due_work",title:L.title,created_at:L.created_at,description:`New assignment: ${L.title}`}))].sort((L,Q)=>new Date(Q.created_at).getTime()-new Date(L.created_at).getTime()).slice(0,5);Wv(E),console.log("Data loading completed successfully")}catch(E){console.error("Error in loadData:",E),m(E.message||"Failed to load data")}finally{u(!1)}},[_,y==null?void 0:y.role]);f.useEffect(()=>{console.log("Initial useEffect running"),console.log("Current user:",y),console.log("Current class:",_),Dl(),Si(),_i();const E=setTimeout(()=>{console.log("Force render timeout reached"),u(!1)},2e3);return()=>{console.log("Cleanup running"),clearTimeout(E)}},[Dl]);const _i=async()=>{if(!(v.length>0))try{const{data:E,error:L}=await D.from("subjects").select("*");if(L)throw L;E&&S(E)}catch(E){console.error("Error loading subjects:",E)}},Si=async()=>{try{u(!0),m(null);try{const{data:E,error:L}=await D.rpc("get_home_due_works");if(L)throw console.warn("RPC failed for due works, using fallback:",L),L;{console.log("Successfully loaded due works via RPC");let Q=E||[];_!=null&&_.id&&(y==null?void 0:y.role)!=="ultra_admin"&&(Q=Q.filter(oe=>oe.class_id===_.id)),c(Q);return}}catch{console.log("Using fallback for due works");const{data:L,error:Q}=await D.from("due_works").select(`
            *,
            subjects (name),
            profiles!due_works_created_by_fkey (username)
          `).order("due_date",{ascending:!0});if(Q)throw console.error("Fallback for due works also failed:",Q),Q;let Ee=(L==null?void 0:L.map(ct=>{var ks,tt;return{...ct,subject_name:(ks=ct.subjects)==null?void 0:ks.name,creator_username:(tt=ct.profiles)==null?void 0:tt.username}}))||[];_!=null&&_.id&&(y==null?void 0:y.role)!=="ultra_admin"&&(Ee=Ee.filter(ct=>ct.class_id===_.id)),c(Ee)}}catch(E){console.error("Error loading due works:",E),m("Failed to load due works. Please try again."),c([])}finally{u(!1)}},Kv=async E=>{E.preventDefault(),_e(!0);try{console.log("Creating due work for classes:",Zt),console.log("Due work data:",g);const L=Zt.map(async Q=>{console.log("Creating due work for class:",Q);const{data:oe,error:Ee}=await D.from("due_works").insert([{title:g.title,description:g.description,due_date:g.due_date,subject_id:g.subject_id,class_id:Q,created_by:y==null?void 0:y.id}]).select();if(Ee)throw console.error("Error creating due work for class",Q,":",Ee),Ee;return console.log("Successfully created due work for class",Q,":",oe),oe});await Promise.all(L),console.log("All due works created successfully"),await Si(),V(!1),p({title:"",description:"",due_date:"",subject_id:"",class_id:""}),Ni([]),alert("Due work created successfully!")}catch(L){console.error("Error creating due work:",L),alert(`Failed to create due work: ${L.message}`)}finally{_e(!1)}},Yv=async E=>{if(y)try{console.log("Deleting due work:",E);const{error:L}=await D.from("due_works").delete().eq("id",E);if(L)throw console.error("Error deleting due work:",L),L;console.log("Due work deleted successfully"),await Si(),alert("Due work deleted successfully!")}catch(L){console.error("Error deleting due work:",L),alert(`Failed to delete due work: ${L.message}`)}},Jh=async E=>{if(!y){console.error("No user found");return}if(y.role!=="admin"&&y.role!=="ultra_admin"){console.error("User does not have permission to delete news");return}try{ue(E),console.log("Starting deletion process for news item:",E);const{error:L}=await D.from("news").delete().eq("id",E);if(L)throw console.error("Error deleting news item:",L),L;console.log("Successfully deleted news item from database"),Z(Q=>Q.filter(oe=>oe.id!==E)),localStorage.removeItem("cachedNews"),console.log("Cleared news cache")}catch(L){console.error("Error in handleDeleteNews:",L),m(L.message||"Failed to delete news item")}finally{ue(null)}},Xv=async E=>{if(E.preventDefault(),!y){m("You must be logged in to create news");return}if(y.role!=="admin"&&y.role!=="ultra_admin"&&y.role!=="teacher"){m("You do not have permission to create news");return}if(!te.trim()||!$.trim()){m("Title and content are required");return}try{U(!0);const{data:L,error:Q}=await D.from("news").insert([{title:te.trim(),content:$.trim(),created_by:y.id,is_deleted:!1,created_at:new Date().toISOString()}]).select().single();if(Q)throw Q;L&&Z(oe=>[L,...oe]),Y(!1),J(""),O(""),m(null)}catch(L){console.error("Error creating news:",L),m(L.message||"Failed to create news")}finally{U(!1)}};f.useEffect(()=>{(async()=>{try{u(!0),console.log("Starting news fetch...");const{data:Q,error:oe}=await D.from("news").select("*").order("created_at",{ascending:!1});if(oe)throw console.error("Error fetching news:",oe),m("Failed to load news. Please try again."),oe;console.log("Fetched news items:",Q),Q&&(Z(Q),localStorage.setItem("cachedNews",JSON.stringify(Q)))}catch(Q){console.error("Error in fetchNews:",Q)}finally{u(!1)}})();const L=D.channel("news_changes").on("postgres_changes",{event:"*",schema:"public",table:"news"},async Q=>{console.log("Realtime news change detected:",Q),Q.eventType==="DELETE"?(Z(oe=>oe.filter(Ee=>Ee.id!==Q.old.id)),localStorage.removeItem("cachedNews")):Q.eventType==="INSERT"?(Z(oe=>[Q.new,...oe]),localStorage.removeItem("cachedNews")):Q.eventType==="UPDATE"&&(Z(oe=>oe.map(ct=>ct.id===Q.new.id?Q.new:ct)),localStorage.removeItem("cachedNews"))}).subscribe();return()=>{L.unsubscribe()}},[]);const Qh=f.useMemo(()=>{const E=new Date,L=q.filter(Q=>{const oe=new Date(Q.created_at);return E.getTime()-oe.getTime()<7*24*60*60*1e3});return console.log("Filtered recent news:",L),L},[q]),Ci=f.useMemo(()=>{const E=new Date,L=q.filter(Q=>{const oe=new Date(Q.created_at);return E.getTime()-oe.getTime()>=7*24*60*60*1e3});return console.log("Filtered old news:",L),L},[q]),Zh=E=>{const L=new Date,oe=new Date(E).getTime()-L.getTime();if(oe<0)return"Overdue";const Ee=Math.floor(oe/(1e3*60*60*24)),ct=Math.floor(oe%(1e3*60*60*24)/(1e3*60*60));return Ee>0?`${Ee}d ${ct}h left`:ct>0?`${ct}h left`:"Due soon"},Jv=async()=>{try{const{data:E,error:L}=await D.from("profiles").select("id, username, role").neq("id",y==null?void 0:y.id);if(L)throw L;E&&be(E)}catch(E){console.error("Error loading users:",E)}},Ml=async()=>{try{const{data:E,error:L}=await D.from("attainment_targets").select(`
          id,
          name,
          url,
          month,
          created_by,
          uploaded_at,
          created_at
        `).order("uploaded_at",{ascending:!1});if(L)throw console.error("Error fetching target files:",L),L;if(!E){zh({});return}const Q=[...new Set(E.map(tt=>tt.created_by))],{data:oe,error:Ee}=await D.from("profiles").select("id, username").in("id",Q);Ee&&console.error("Error fetching profiles:",Ee);const ct=(oe||[]).reduce((tt,er)=>(tt[er.id]=er.username,tt),{}),ks=E.reduce((tt,er)=>{const js=er.month.toLowerCase();tt[js]||(tt[js]=[]);const iw=D.storage.from("attainment-targets").getPublicUrl(er.url).data.publicUrl;return tt[js].push({...er,publicUrl:iw,username:ct[er.created_by]||"Unknown User"}),tt},{});zh(ks)}catch(E){console.error("Error loading target files:",E),alert("Failed to load files. Please try refreshing the page.")}},Qv=async(E,L)=>{var oe;if(!((oe=E.target.files)!=null&&oe.length)||!y)return;const Q=E.target.files[0];Bh(!0);try{if(Q.size>52428800)throw new Error("File size must be less than 50MB");if(!["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","image/gif","image/webp"].includes(Q.type))throw new Error("File type not supported. Please upload PDF, Word documents, text files, or images.");const ct=Q.name.split(".").pop(),ks=`${L}/${y.id}-${Date.now()}.${ct}`;console.log("Uploading file to storage:",ks);const{data:tt,error:er}=await D.storage.from("attainment-targets").upload(ks,Q,{cacheControl:"3600",upsert:!1});if(er)throw console.error("Storage upload error:",er),new Error(`Storage upload failed: ${er.message}`);if(!(tt!=null&&tt.path))throw new Error("Upload failed - no path returned");console.log("File uploaded to storage, adding to database...");const{error:js}=await D.from("attainment_targets").insert([{name:Q.name,url:tt.path,month:L,created_by:y.id,uploaded_at:new Date().toISOString()}]);if(js)throw console.error("Database insert error:",js),await D.storage.from("attainment-targets").remove([tt.path]),new Error(`Database insert failed: ${js.message}`);console.log("File successfully uploaded and added to database"),await Ml(),E.target.value="",alert("File uploaded successfully!")}catch(Ee){console.error("Error uploading file:",Ee),alert(`Failed to upload file: ${Ee.message}`)}finally{Bh(!1)}},Zv=async(E,L)=>{if(y){Wh(E);try{console.log("Deleting file from storage:",L);const{error:Q}=await D.storage.from("attainment-targets").remove([L]);if(Q)throw console.error("Storage delete error:",Q),new Error(`Storage delete failed: ${Q.message}`);console.log("File deleted from storage, removing from database...");const{error:oe}=await D.from("attainment_targets").delete().eq("id",E);if(oe)throw console.error("Database delete error:",oe),new Error(`Database delete failed: ${oe.message}`);console.log("File successfully deleted from database"),await Ml(),alert("File deleted successfully!")}catch(Q){console.error("Error deleting file:",Q),alert(`Failed to delete file: ${Q.message}`)}finally{Wh(null)}}},ew=async E=>{if(!(!y||y.role!=="admin"&&y.role!=="ultra_admin"))try{const L=new Date;L.setDate(L.getDate()-8);const{error:Q}=await D.from("news").update({created_at:L.toISOString()}).eq("id",E);if(Q)throw Q;Z(oe=>oe.map(Ee=>Ee.id===E?{...Ee,created_at:L.toISOString()}:Ee))}catch(L){console.error("Error moving news to old:",L)}},tw=async E=>{if(!(!y||y.role!=="admin"&&y.role!=="ultra_admin"))try{const L=new Date;L.setDate(L.getDate()-1);const{error:Q}=await D.from("news").update({created_at:L.toISOString()}).eq("id",E);if(Q)throw Q;Z(oe=>oe.map(Ee=>Ee.id===E?{...Ee,created_at:L.toISOString()}:Ee))}catch(L){console.error("Error moving news to recent:",L)}},e0=async()=>{if(_!=null&&_.id)try{const{data:E,error:L}=await D.rpc("get_discussions_with_profiles").eq("class_id",_.id).order("created_at",{ascending:!1});if(L)throw L;r(E||[])}catch(E){console.error("Error loading discussions:",E)}},t0=async()=>{if(!(!(z!=null&&z.id)||!(y!=null&&y.id)))try{const{data:E,error:L}=await D.rpc("get_private_discussions_with_profiles").or(`created_by.eq.${y.id},recipient_id.eq.${y.id}`).order("created_at",{ascending:!0});if(L)throw L;const Q=(E==null?void 0:E.filter(oe=>oe.created_by===y.id&&oe.recipient_id===z.id||oe.created_by===z.id&&oe.recipient_id===y.id))||[];Yh(Q)}catch(E){console.error("Error loading private discussions:",E)}},rw=async()=>{if(!I.trim()||!(y!=null&&y.id)||!(_!=null&&_.id)){console.log("Missing required data for open discussion:",{hasMessage:!!I.trim(),hasUserId:!!(y!=null&&y.id),hasClassId:!!(_!=null&&_.id)});return}try{console.log("Attempting to insert open discussion message into Supabase");const{data:E,error:L}=await D.from("discussions").insert([{content:I,created_by:y.id,class_id:_.id}]).select();if(L)throw console.error("Error from Supabase:",L),L;console.log("Message sent successfully:",E),E&&(await e0(),A(""))}catch(E){console.error("Error sending message:",E),alert(`Failed to send message: ${E.message}`)}},sw=async E=>{try{const{error:L}=await D.from("discussions").delete().eq("id",E);if(L)throw L;r(Q=>Q.filter(Ee=>Ee.id!==E))}catch(L){console.error("Error deleting message:",L)}},aw=async E=>{try{const{error:L}=await D.from("private_discussions").delete().eq("id",E);if(L)throw L;Yh(Pl.filter(Q=>Q.id!==E))}catch(L){console.error("Error deleting private message:",L)}},nw=async()=>{if(console.log("handleSendPrivateMessage called"),console.log("Attempting to send private message:",{newMessage:I,userId:y==null?void 0:y.id,recipientId:z==null?void 0:z.id}),!I.trim()||!(y!=null&&y.id)||!(z!=null&&z.id)){console.log("Missing required data for private discussion:",{hasMessage:!!I.trim(),hasUserId:!!(y!=null&&y.id),hasRecipientId:!!(z!=null&&z.id)});return}try{console.log("Attempting to insert private message into Supabase");const{data:E,error:L}=await D.from("private_discussions").insert([{content:I,created_by:y.id,recipient_id:z.id,class_id:null}]).select();if(L)throw console.error("Error from Supabase:",L),L;console.log("Private message sent successfully:",E),E&&(await t0(),A(""))}catch(E){console.error("Error sending private message:",E),alert(`Failed to send private message: ${E.message}`)}};if(f.useEffect(()=>{ve&&(Nt==="open"?(e0(),Tn("discussions")):Nt==="private"&&z&&(t0(),Tn("private_discussions")))},[ve,Nt,z]),f.useEffect(()=>{y&&Tn("announcements")},[y]),h)return console.error("Error state:",h),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"page-container flex items-center justify-center",children:s.jsxs("div",{className:"card p-8 max-w-md",children:[s.jsx("p",{className:"text-red-600 mb-4",children:h}),s.jsx("button",{onClick:Dl,className:"button-primary",children:"Try Again"})]})});if(d)return console.log("Loading state active"),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"page-container flex items-center justify-center",children:s.jsxs("div",{className:"card p-8",children:[s.jsx(De,{className:"h-12 w-12 animate-spin text-red-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-theme-text-secondary dark:text-gray-300",children:"Loading..."})]})});if(!y||!_){console.log("Missing required data:",{user:y,currentClass:_});let E="Missing required data. Please try logging in again.",L="Go to Login",Q=()=>e("/login");return y&&!_&&(y.role==="student"?(E="Your class information is being loaded. Please wait a moment...",L="Refresh Page",Q=()=>window.location.reload()):(E="Please select a class to continue.",L="Select Class",Q=()=>e("/select-class"))),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"page-container flex items-center justify-center",children:s.jsx("div",{className:"card p-8 max-w-md",children:s.jsxs("div",{className:"text-center",children:[y&&!_&&y.role==="student"?s.jsx(De,{className:"h-8 w-8 animate-spin text-red-600 mx-auto mb-4"}):s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 text-sm font-bold",children:"!"})}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:E}),s.jsx("button",{onClick:Q,className:"button-primary",children:L})]})})})}return console.log("Rendering main content"),s.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#181929] flex items-center justify-center py-2 sm:py-6 px-1 sm:px-2 md:py-10 md:px-0 transition-colors duration-300",children:[s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-7xl bg-gradient-to-br from-red-700 to-red-900 rounded-[24px] sm:rounded-[40px] md:rounded-[48px] shadow-2xl p-2 sm:p-4 md:p-12 lg:p-16 overflow-hidden",children:[s.jsx("div",{className:"w-full mb-4 sm:mb-12 md:mb-16",children:s.jsxs("div",{className:"relative z-10 w-full h-full overflow-hidden",style:{height:"180px",minHeight:"160px",maxHeight:"380px",...window.innerWidth>=768?{height:"380px"}:{}},onMouseEnter:()=>qh(!0),onMouseLeave:()=>{qh(!1),Gh(null)},onMouseMove:E=>{const L=E.currentTarget.getBoundingClientRect();Gh({x:E.clientX-L.left,y:E.clientY-L.top})},children:[s.jsx("div",{className:"absolute inset-0 w-full h-full z-0 rounded-[32px] sm:rounded-[40px] overflow-hidden",style:{backgroundImage:`linear-gradient(90deg, rgba(30,30,30,0.82) 0%, rgba(30,30,30,0.5) 60%, rgba(30,30,30,0.2) 100%), url('${a6}')`,backgroundSize:"cover",backgroundPosition:`center ${Gv}px`,transition:"background-position 0.4s cubic-bezier(.4,0,.2,1)"}}),qv&&Ja&&s.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",style:{pointerEvents:"none"},children:s.jsxs("svg",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1},width:"100%",height:"100%",children:[s.jsxs("defs",{children:[s.jsx("clipPath",{id:"dotClip",children:s.jsx("circle",{cx:Ja.x,cy:Ja.y,r:"160"})}),s.jsx("pattern",{id:"dotPat",patternUnits:"userSpaceOnUse",width:"12",height:"12",children:s.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"rgba(255,255,255,0.18)"})}),s.jsxs("radialGradient",{id:"lightGrad",cx:Ja.x,cy:Ja.y,r:"320",gradientUnits:"userSpaceOnUse",children:[s.jsx("stop",{offset:"0%",stopColor:"rgba(255,100,100,0.32)"}),s.jsx("stop",{offset:"25%",stopColor:"rgba(255,100,100,0.15)"}),s.jsx("stop",{offset:"56%",stopColor:"rgba(255,255,255,0.08)"}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]})]}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#dotPat)",clipPath:"url(#dotClip)"}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#lightGrad)",style:{mixBlendMode:"lighten"}})]})}),s.jsxs(w.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.7},className:"relative z-20 flex flex-col justify-center h-full px-3 sm:px-8 md:px-10 py-4 sm:py-10 md:py-12",children:[s.jsx("h1",{className:"text-xl xs:text-2xl sm:text-4xl md:text-5xl font-extrabold text-white mb-1 sm:mb-2 drop-shadow-2xl tracking-tight text-left",children:"Welcome to LGS JTi Learning Management System"}),_&&s.jsxs("div",{className:"text-sm sm:text-lg text-white/90 font-semibold mb-1 sm:mb-2 text-left",children:["Grade ",_.grade," - ",_.section]}),s.jsx("p",{className:"text-sm xs:text-base sm:text-xl md:text-2xl text-white/90 mb-2 sm:mb-6 md:mb-8 font-medium drop-shadow-lg text-left",children:"Your Learning Dashboard"})]})]})}),s.jsxs("div",{className:"px-2 sm:px-6 lg:px-8 mt-4 sm:mt-10",children:[s.jsx(fe,{mode:"wait",children:h&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-4 sm:mb-6 p-3 sm:p-4 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 flex items-center gap-2 sm:gap-3",children:[s.jsx(Ir,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-sm sm:text-base",children:h}),s.jsx("button",{onClick:()=>m(null),className:"ml-auto p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800/50",children:s.jsx(ce,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]},"error")}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-8",children:[s.jsx(w.div,{variants:Al,initial:"initial",animate:"animate",whileHover:"whileHover",className:"relative overflow-visible rounded-2xl sm:rounded-3xl shadow-2xl p-0 border-0",children:s.jsxs("div",{className:"relative bg-white/30 dark:bg-gray-900/40 backdrop-blur-xl rounded-2xl sm:rounded-3xl p-0 overflow-hidden shadow-xl border border-white/20 dark:border-gray-800/30",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 px-4 sm:px-8 pt-6 sm:pt-8 pb-2",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-red-500/80 to-red-700/80 shadow-lg",children:s.jsx(mc,{className:"w-5 h-5 sm:w-8 sm:h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight mb-0.5 sm:mb-1",children:"Latest News"}),s.jsx("p",{className:"text-xs sm:text-base text-gray-700 dark:text-gray-300",children:"Stay up to date with the latest updates and events."})]})]}),s.jsxs("div",{className:"relative px-4 sm:px-8 pb-6 sm:pb-8 pt-2",children:[Qh.length===0?s.jsx("div",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 py-8 sm:py-12 text-center",children:"No news in the last week."}):s.jsx("div",{className:"space-y-3 sm:space-y-6 max-h-[18vh] min-h-[80px] sm:min-h-[100px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-red-300 dark:scrollbar-thumb-red-900/60 scrollbar-track-transparent",children:s.jsx(fe,{mode:"popLayout",children:Qh.map((E,L)=>s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20,scale:.95},transition:{delay:L*.1,duration:.3},className:"group relative bg-white/70 dark:bg-gray-900/70 rounded-xl p-3 sm:p-4 shadow-md border border-white/20 dark:border-gray-800/30 hover:shadow-lg transition-all duration-300",onClick:()=>{ee(E),ae(!0),Kh(!1)},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[s.jsx("span",{className:"font-semibold text-sm sm:text-lg text-gray-900 dark:text-white",children:E.title}),s.jsx("span",{className:"ml-auto text-xs text-gray-500 dark:text-gray-400 bg-white/40 dark:bg-gray-800/40 px-1.5 sm:px-2 py-0.5 rounded-full",children:new Date(E.created_at).toLocaleDateString()}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin")&&s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx("button",{onClick:()=>ew(E.id),disabled:ge===E.id,className:"p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Move to Old News",children:ge===E.id?s.jsx(De,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin text-blue-600 dark:text-blue-400"}):s.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600 dark:text-blue-400"})}),s.jsx("button",{onClick:Q=>{Q.stopPropagation(),Jh(E.id)},disabled:X===E.id,className:"p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:X===E.id?s.jsx(De,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin text-red-600 dark:text-red-400"}):s.jsx(pe,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-600 dark:text-red-400"})})]})]}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 dark:text-gray-200",children:E.content})]},E.id))})}),s.jsxs("div",{className:"flex justify-between items-center mt-4 sm:mt-8",children:[s.jsx("button",{onClick:()=>B(!0),className:"text-xs sm:text-sm text-red-700 dark:text-red-300 hover:underline font-semibold",children:"View Old News"}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsxs("button",{onClick:()=>Y(!0),className:"fixed bottom-6 sm:bottom-8 right-6 sm:right-8 z-50 bg-gradient-to-br from-red-600 to-red-800 text-white rounded-full shadow-lg w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-xl sm:text-2xl hover:scale-105 transition-transform duration-200 focus:outline-none focus:ring-4 focus:ring-red-400",children:[s.jsx("span",{className:"sr-only",children:"Create News"}),s.jsx($e,{className:"w-5 h-5 sm:w-6 sm:h-6"})]})]})]})]})}),s.jsxs(w.div,{variants:Al,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-2xl sm:rounded-3xl shadow-xl p-4 sm:p-6 border border-white/30 dark:border-gray-800/40",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Due Works"}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:()=>{V(!0),_i()},className:"p-1.5 sm:p-2 rounded-full bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg hover:shadow-xl",children:s.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:d?s.jsx("div",{className:"flex items-center justify-center py-6 sm:py-8",children:s.jsx(w.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"inline-block",children:s.jsx(Bt,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600 dark:text-red-400 animate-spin"})})}):l.length===0?s.jsxs("div",{className:"text-center py-6 sm:py-8",children:[s.jsx(Bt,{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-300 dark:text-gray-600 mx-auto mb-2 sm:mb-4"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"No due works."})]}):s.jsx(fe,{mode:"wait",children:l.map(E=>s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"group relative flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 cursor-pointer hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-700/50 dark:hover:to-gray-600/50 transition-all duration-200 border border-gray-200/50 dark:border-gray-700/50 hover:border-red-200 dark:hover:border-red-800/50",onClick:()=>{N(E),P(!0),k(!1)},children:[s.jsx("div",{className:"p-1.5 sm:p-2 bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 rounded-lg shadow-sm",children:s.jsx(Pe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm sm:text-base text-gray-900 dark:text-white font-medium",children:E.title}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:E.subject_name}),s.jsx("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400 font-medium",children:Zh(E.due_date)})]}),((y==null?void 0:y.id)===E.created_by||(y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:L=>{L.stopPropagation(),confirm("Are you sure you want to delete this due work?")&&Yv(E.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 sm:p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200",children:s.jsx(pe,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]},E.id))})})]}),s.jsxs(w.div,{variants:Al,initial:"initial",animate:"animate",whileHover:"whileHover",className:"lg:col-span-2 bg-white/90 dark:bg-gray-900/80 rounded-2xl sm:rounded-3xl shadow-xl p-4 sm:p-6 border border-white/30 dark:border-gray-800/40",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-6",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Br(!0),Ml()},className:"flex flex-col items-center gap-1.5 sm:gap-2 p-3 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(cy,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600 dark:text-red-400"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Attainment Targets"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{N(null),k(!0),_i()},className:"flex flex-col items-center gap-1.5 sm:gap-2 p-3 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(Pe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Due Works"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Le(!0),Jv()},className:"flex flex-col items-center gap-1.5 sm:gap-2 p-3 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(Us,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Discussions"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("/settings"),className:"flex flex-col items-center gap-1.5 sm:gap-2 p-3 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(ly,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 dark:text-purple-400"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:"Settings"})]})]})]})]})]})]}),x&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 max-w-4xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{k(!1),N(null)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Due Works"}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:()=>{V(!0),k(!1),_i()},className:"p-1.5 sm:p-2 rounded-full bg-red-600 text-white hover:bg-red-700 transition-colors",children:s.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:d?s.jsx("div",{className:"flex items-center justify-center py-6 sm:py-8",children:s.jsx(w.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"inline-block",children:s.jsx(Bt,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600 dark:text-red-400 animate-spin"})})}):l.length===0?s.jsxs("div",{className:"text-center py-6 sm:py-8",children:[s.jsx(Bt,{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-300 dark:text-gray-600 mx-auto mb-2 sm:mb-4"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"No due works."})]}):s.jsx(fe,{mode:"wait",children:l.map(E=>s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{N(E),P(!0),k(!1)},children:[s.jsx("div",{className:"p-1.5 sm:p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(Pe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm sm:text-base text-gray-900 dark:text-white font-medium",children:E.title}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:E.subject_name}),s.jsx("p",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400",children:Zh(E.due_date)})]})]},E.id))})})]})})}),document.body),b&&j&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 max-w-4xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{P(!1),N(null),k(!0)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:j.title}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Subject"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-900 dark:text-white",children:j.subject_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Due Date"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-900 dark:text-white",children:new Date(j.due_date).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Description"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-900 dark:text-white whitespace-pre-wrap",children:j.description})]})]})]})]})})}),document.body),T&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/95 dark:bg-gray-900/95 rounded-3xl shadow-2xl p-6 sm:p-8 max-w-5xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{V(!1),p({title:"",description:"",due_date:"",subject_id:"",class_id:""}),Ni([])},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shadow-lg",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 sm:mb-8",children:[s.jsx("div",{className:"p-3 sm:p-4 bg-gradient-to-r from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 rounded-2xl shadow-lg",children:s.jsx(Pe,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Create Due Work"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Assign work to one or multiple classes"})]})]}),s.jsxs("form",{onSubmit:Kv,className:"space-y-6 sm:space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[s.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 p-4 sm:p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50",children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-2 text-gray-700 dark:text-gray-200",children:"Assignment Title"}),s.jsx("input",{type:"text",value:g.title,onChange:E=>p(L=>({...L,title:E.target.value})),className:"w-full px-4 py-3 text-base sm:text-lg rounded-xl border border-gray-200 dark:border-gray-700 bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all shadow-sm",placeholder:"Enter assignment title",required:!0})]}),s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 p-4 sm:p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50",children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-2 text-gray-700 dark:text-gray-200",children:"Subject"}),s.jsxs("select",{value:g.subject_id,onChange:E=>p(L=>({...L,subject_id:E.target.value})),className:"w-full px-4 py-3 text-base sm:text-lg rounded-xl border border-gray-200 dark:border-gray-700 bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all shadow-sm",required:!0,children:[s.jsx("option",{value:"",children:"Select a subject"}),v.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 p-4 sm:p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50",children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-2 text-gray-700 dark:text-gray-200",children:"Due Date & Time"}),s.jsx("input",{type:"datetime-local",value:g.due_date,onChange:E=>p(L=>({...L,due_date:E.target.value})),className:"w-full px-4 py-3 text-base sm:text-lg rounded-xl border border-gray-200 dark:border-gray-700 bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all shadow-sm",required:!0})]})]}),s.jsx("div",{className:"space-y-6 sm:space-y-8",children:s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 p-4 sm:p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50",children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-3 text-gray-700 dark:text-gray-200",children:"Select Classes"}),s.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto p-3 bg-white/80 dark:bg-gray-800/80 rounded-xl border border-gray-200/50 dark:border-gray-700/50",children:C.length===0?s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No classes available"}):C.map(E=>s.jsxs("label",{className:"flex items-center space-x-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-lg cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",checked:Zt.includes(E.id),onChange:L=>{L.target.checked?Ni(Q=>[...Q,E.id]):Ni(Q=>Q.filter(oe=>oe!==E.id))},className:"w-5 h-5 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:["Grade ",E.grade," - ",E.section]})]},E.id))}),C.length>0&&Zt.length===0&&s.jsx("p",{className:"text-sm text-red-500 mt-2 font-medium",children:"Please select at least one class"}),Zt.length>0&&s.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2 font-medium",children:[" ",Zt.length," ",Zt.length===1?"class":"classes"," selected"]})]})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 p-4 sm:p-6 rounded-2xl border border-gray-200/50 dark:border-gray-700/50",children:[s.jsx("label",{className:"block text-sm sm:text-base font-semibold mb-2 text-gray-700 dark:text-gray-200",children:"Assignment Description"}),s.jsx("textarea",{value:g.description,onChange:E=>p(L=>({...L,description:E.target.value})),className:"w-full px-4 py-3 text-base sm:text-lg rounded-xl border border-gray-200 dark:border-gray-700 bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all shadow-sm",rows:6,placeholder:"Enter detailed assignment description...",required:!0})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:Zt.length>0?s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[" ",Zt.length," ",Zt.length===1?"class":"classes"," selected"]}):"No classes selected"}),s.jsx("button",{type:"submit",disabled:me||Zt.length===0,className:"px-8 py-3 rounded-xl bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed hover:from-red-700 hover:to-red-800 shadow-lg hover:shadow-xl transform hover:scale-105",children:me?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:"Creating..."})]}):"Create Due Work"})]})]})]})]})})}),document.body),ve&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-3 sm:p-8 max-w-4xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{Le(!1),yt(null),re(!1),He(!1)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),Nt?Nt==="private"?s.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Private Discussions"}),s.jsx("button",{onClick:()=>{yt(null),re(!1)},className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Back to Discussion Types"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-6",children:[s.jsx("div",{className:"md:col-span-1 space-y-2 sm:space-y-4",children:s.jsxs("div",{className:"p-2 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[s.jsx("h4",{className:"font-semibold text-sm sm:text-base text-gray-900 dark:text-white mb-2 sm:mb-4",children:"Select User"}),s.jsx("div",{className:"space-y-1 sm:space-y-2 max-h-[40vh] sm:max-h-[60vh] overflow-y-auto",children:we.map(E=>s.jsx("button",{onClick:()=>le(E),className:`w-full p-2 sm:p-3 rounded-lg text-left transition-colors ${(z==null?void 0:z.id)===E.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-xs sm:text-base",children:E.username.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-xs sm:text-base text-gray-900 dark:text-white",children:E.username}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:E.role})]})]})},E.id))})]})}),s.jsx("div",{className:"md:col-span-2",children:z?s.jsxs("div",{className:"h-[40vh] sm:h-[60vh] flex flex-col",children:[s.jsx("div",{className:"flex-1 p-2 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 overflow-y-auto space-y-2 sm:space-y-4",children:Pl.length>0?Pl.map(E=>s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:E.sender_username||"Unknown User"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(E.created_at).toLocaleString()})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300",children:E.content})]}),((y==null?void 0:y.id)===E.created_by||(y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:()=>aw(E.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:s.jsx(pe,{className:"w-4 h-4"})})]},E.id)):s.jsx("div",{className:"text-center text-xs sm:text-base text-gray-500 dark:text-gray-400",children:"No messages yet. Start the conversation!"})}),s.jsxs("div",{className:"mt-2 sm:mt-4 flex gap-2",children:[s.jsx("input",{type:"text",value:I,onChange:E=>A(E.target.value),placeholder:"Type your message...",className:"flex-1 px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),s.jsx("button",{onClick:()=>{console.log("Send button clicked"),nw()},disabled:!I.trim(),className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base rounded-xl bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:"Send"})]})]}):s.jsx("div",{className:"h-[40vh] sm:h-[60vh] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Us,{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-300 dark:text-gray-600 mx-auto mb-2 sm:mb-4"}),s.jsx("p",{className:"text-xs sm:text-base text-gray-600 dark:text-gray-400",children:"Select a user to start chatting"})]})})})]})]}):s.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Open Discussions"}),s.jsx("button",{onClick:()=>{yt(null),He(!1)},className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Back to Discussion Types"})]}),s.jsxs("div",{className:"h-[40vh] sm:h-[60vh] flex flex-col",children:[s.jsx("div",{className:"flex-1 p-2 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 overflow-y-auto space-y-2 sm:space-y-4",children:t.length>0?t.map(E=>{var L;return s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-white dark:bg-gray-800 shadow-sm",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white",children:((L=E.profiles)==null?void 0:L.username)||E.username||"Unknown User"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(E.created_at).toLocaleString()})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300",children:E.content})]}),((y==null?void 0:y.id)===E.created_by||(y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:()=>sw(E.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:s.jsx(pe,{className:"w-4 h-4"})})]},E.id)}):s.jsx("div",{className:"text-center text-xs sm:text-base text-gray-500 dark:text-gray-400",children:"No messages yet. Start a conversation!"})}),s.jsxs("div",{className:"mt-2 sm:mt-4 flex gap-2",children:[s.jsx("input",{type:"text",value:I,onChange:E=>A(E.target.value),placeholder:"Type your message...",className:"flex-1 px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),s.jsx("button",{onClick:()=>{console.log("Send button clicked"),rw()},className:"px-4 py-2 rounded-xl bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold hover:from-red-700 hover:to-red-800 transition-colors",children:"Send"})]})]})]}):s.jsxs("div",{className:"space-y-3 sm:space-y-8",children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white text-center",children:"Choose Discussion Type"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-6",children:[s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{yt("private"),re(!0)},className:"group relative p-3 sm:p-6 rounded-xl sm:rounded-2xl bg-gradient-to-br from-blue-500/10 to-blue-600/10 dark:from-blue-500/20 dark:to-blue-600/20 border border-blue-200/50 dark:border-blue-800/50 hover:border-blue-300 dark:hover:border-blue-700 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/5 dark:from-blue-500/10 dark:to-blue-600/10 rounded-xl sm:rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative flex flex-col items-center gap-2 sm:gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg sm:rounded-xl",children:s.jsx(Us,{className:"w-5 h-5 sm:w-8 sm:h-8 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"text-sm sm:text-lg font-semibold text-gray-900 dark:text-white mb-1 sm:mb-2",children:"Private Discussions"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Chat privately with teachers or students"})]})]})]}),s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{yt("open"),He(!0)},className:"group relative p-3 sm:p-6 rounded-xl sm:rounded-2xl bg-gradient-to-br from-green-500/10 to-green-600/10 dark:from-green-500/20 dark:to-green-600/20 border border-green-200/50 dark:border-green-800/50 hover:border-green-300 dark:hover:border-green-700 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-green-600/5 dark:from-green-500/10 dark:to-green-600/10 rounded-xl sm:rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative flex flex-col items-center gap-2 sm:gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg sm:rounded-xl",children:s.jsx(ft,{className:"w-5 h-5 sm:w-8 sm:h-8 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"text-sm sm:text-lg font-semibold text-gray-900 dark:text-white mb-1 sm:mb-2",children:"Open Discussions"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Join open discussions with everyone"})]})]})]})]})]})]})})}),document.body),Se&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-3 sm:p-8 max-w-6xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{Br(!1),Vh(null)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"space-y-3 sm:space-y-8",children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white text-center",children:"Attainment Targets"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 sm:gap-4",children:Xh.map(E=>{var L;return s.jsx(w.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Vh(E.value),className:`group relative p-2 sm:p-4 rounded-xl sm:rounded-2xl cursor-pointer transition-all ${mr===E.value?"bg-red-100 dark:bg-red-900/30 border-red-200 dark:border-red-800/50":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700/50 hover:border-red-200 dark:hover:border-red-800/50"}`,children:s.jsxs("div",{className:"flex flex-col items-center gap-1 sm:gap-2",children:[s.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg ${mr===E.value?"bg-red-200 dark:bg-red-800/50":"bg-gray-100 dark:bg-gray-700/50 group-hover:bg-red-100 dark:group-hover:bg-red-900/30"}`,children:s.jsx(lr,{className:"w-4 h-4 sm:w-6 sm:h-6 text-red-600 dark:text-red-400"})}),s.jsx("span",{className:"text-xs sm:text-base font-medium text-gray-900 dark:text-white",children:E.name}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((L=ji[E.value])==null?void 0:L.length)||0," files"]})]})},E.value)})}),mr&&s.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-base sm:text-xl font-semibold text-gray-900 dark:text-white",children:[(r0=Xh.find(E=>E.value===mr))==null?void 0:r0.name," Files"]}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsxs("label",{className:"relative",children:[s.jsx("input",{type:"file",onChange:E=>Qv(E,mr),className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx"}),s.jsx("div",{className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base rounded-xl bg-gradient-to-r from-red-600 to-red-700 text-white font-medium cursor-pointer hover:from-red-700 hover:to-red-800 transition-colors",children:Hv?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(De,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),s.jsx("span",{children:"Uploading..."})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.jsx("span",{children:"Upload File"})]})})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4",children:(s0=ji[mr])==null?void 0:s0.map(E=>s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative p-2 sm:p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700/50 hover:border-red-200 dark:hover:border-red-800/50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"p-1.5 sm:p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(Pe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-base font-medium text-gray-900 dark:text-white truncate",children:E.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(E.uploaded_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx("a",{href:E.publicUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:s.jsx(Nl,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-600 dark:text-gray-400"})}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin"||(y==null?void 0:y.role)==="teacher")&&s.jsx("button",{onClick:()=>Zv(E.id,E.url),disabled:Hh===E.id,className:"p-1 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:Hh===E.id?s.jsx(De,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin text-red-600 dark:text-red-400"}):s.jsx(pe,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-600 dark:text-red-400"})})]})]})},E.id))}),(!ji[mr]||ji[mr].length===0)&&s.jsxs("div",{className:"text-center py-6 sm:py-12",children:[s.jsx(Pe,{className:"w-8 h-8 sm:w-12 sm:h-12 text-gray-300 dark:text-gray-600 mx-auto mb-2 sm:mb-4"}),s.jsx("p",{className:"text-xs sm:text-base text-gray-600 dark:text-gray-400",children:"No files uploaded for this month yet."})]})]})]})]})})}),document.body),ye&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 max-w-4xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>Y(!1),className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Create News"}),s.jsxs("form",{onSubmit:Xv,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Title"}),s.jsx("input",{type:"text",value:te,onChange:E=>J(E.target.value),className:"w-full px-3 py-1.5 sm:py-2 text-sm sm:text-base rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 text-gray-700 dark:text-gray-200",children:"Content"}),s.jsx("textarea",{value:$,onChange:E=>O(E.target.value),className:"w-full px-3 py-1.5 sm:py-2 text-sm sm:text-base rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",rows:8,required:!0})]}),s.jsx("button",{type:"submit",disabled:H,className:"w-full py-2 rounded-xl bg-gradient-to-r from-red-600 to-red-700 text-white font-bold text-sm sm:text-base transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:H?"Creating...":"Create News"})]})]})]})})}),document.body),se&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/95 dark:bg-gray-900/95 rounded-3xl shadow-2xl p-8 sm:p-10 max-w-7xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>B(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors shadow-lg",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[s.jsx("div",{className:"p-5 bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/40 dark:to-orange-900/40 rounded-3xl shadow-xl border border-amber-200/50 dark:border-amber-700/30",children:s.jsx(mc,{className:"w-10 h-10 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-4xl sm:text-5xl font-bold text-gray-900 dark:text-white mb-2",children:"News Archive"}),s.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-400 font-medium",children:"Historical news and announcements from the past"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-3 rounded-full text-base font-bold shadow-xl border-2 border-amber-400/30",children:[Ci.length," ",Ci.length===1?"item":"items"]})]}),Ci.length===0?s.jsx("div",{className:"text-center py-20",children:s.jsxs("div",{className:"p-10 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 rounded-3xl border border-gray-200/50 dark:border-gray-700/50 shadow-xl",children:[s.jsx("div",{className:"p-6 bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:s.jsx(mc,{className:"w-12 h-12 text-amber-600 dark:text-amber-400"})}),s.jsx("h4",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300 mb-3",children:"No Archived News"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"There are no old news items in the archive yet."}),s.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-2",children:"News items older than 7 days will appear here automatically."})]})}):s.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8 max-h-[70vh] overflow-y-auto pr-2",children:Ci.map((E,L)=>s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:L*.1},className:"relative bg-gradient-to-br from-white/95 to-gray-50/95 dark:from-gray-800/95 dark:to-gray-700/95 rounded-2xl p-6 shadow-lg border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm",children:[s.jsx("div",{className:"absolute top-4 left-4 w-8 h-8 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg border-2 border-white dark:border-gray-900",children:L+1}),s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 bg-white/90 dark:bg-gray-800/90 px-3 py-1.5 rounded-full font-medium shadow-sm border border-gray-200/50 dark:border-gray-700/50",children:new Date(E.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h4",{className:"font-bold text-lg sm:text-xl text-gray-900 dark:text-white mb-3 leading-tight",children:E.title}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base leading-relaxed mb-4 overflow-hidden",children:E.content.length>150?`${E.content.substring(0,150)}...`:E.content})]}),((y==null?void 0:y.role)==="admin"||(y==null?void 0:y.role)==="ultra_admin")&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:[s.jsxs("button",{onClick:()=>tw(E.id),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gradient-to-r from-green-500 to-emerald-500 text-white text-sm font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200 shadow-md hover:shadow-lg",title:"Move to Recent News",children:[s.jsx(Bt,{className:"w-4 h-4"}),s.jsx("span",{children:"Move to Recent"})]}),s.jsx("button",{onClick:()=>Jh(E.id),disabled:X===E.id,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gradient-to-r from-red-500 to-pink-500 text-white text-sm font-medium hover:from-red-600 hover:to-pink-600 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50",children:X===E.id?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Deleting..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(pe,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]})})]})]},E.id))})]})})}),document.body),R&&F&&xr.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999]",children:s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 max-w-4xl w-full relative border border-white/30 dark:border-gray-800/40 backdrop-blur-xl max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>{ae(!1),ee(null),Kh(!0)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:F.title})}),s.jsx("div",{className:"text-sm sm:text-base text-gray-700 dark:text-gray-200",children:F.content})]})]})})}),document.body)]})}function o6(){const{user:e}=Je();Ga();const t=Qt();zr();const[r,a]=f.useState(!0),[n,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState({totalClasses:0,totalStudents:0,totalAssignments:0,upcomingEvents:0}),[u,h]=f.useState([]),[m,x]=f.useState(!1),k=f.useRef(null);f.useEffect(()=>{if(!e)return;(async()=>{a(!0),i(null);try{const{data:g,error:p}=await D.from("stats").select("*").single();if(p)throw p;d(g);const{data:v,error:S}=await D.from("recent_activity").select("*").order("created_at",{ascending:!1}).limit(5);if(S)throw S;h(v||[])}catch(g){i(g.message)}finally{a(!1)}})()},[e]),f.useEffect(()=>{function N(g){k.current&&!k.current.contains(g.target)&&x(!1)}if(m)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[m]);const j={initial:{opacity:0,y:40,rotateY:-10},animate:{opacity:1,y:0,rotateY:0,transition:{type:"spring",stiffness:80,damping:18}},whileHover:{scale:1.04,rotateY:8,boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}};return s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-red-600/80 to-red-900/90 pb-12 relative overflow-x-hidden",children:[s.jsx(w.div,{initial:{scale:.95,opacity:0,y:-40},animate:{scale:1,opacity:1,y:0},transition:{duration:.7,type:"spring",stiffness:80},className:"relative z-10",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-16 pb-10",children:s.jsxs(w.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.7},className:"backdrop-blur-xl bg-white/20 dark:bg-gray-900/30 rounded-3xl shadow-2xl p-10 flex flex-col items-center border border-white/30 dark:border-gray-800/40 relative overflow-hidden",children:[s.jsx(w.div,{animate:{rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:8,ease:"linear"},className:"absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br from-red-400/40 to-red-800/40 rounded-full blur-2xl z-0"}),s.jsx(w.div,{animate:{rotate:[0,-8,8,0]},transition:{repeat:1/0,duration:10,ease:"linear"},className:"absolute -bottom-10 -left-10 w-40 h-40 bg-gradient-to-br from-red-200/40 to-red-700/40 rounded-full blur-2xl z-0"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx(ny,{className:"w-14 h-14 text-white drop-shadow-lg mb-4"}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white text-center mb-3 drop-shadow-lg",children:"Dashboard"}),s.jsx("p",{className:"text-lg text-white/80 text-center max-w-2xl mb-6",children:"Welcome back! Here's an overview of your LMS activities and important updates."})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[s.jsxs(fe,{children:[n&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 flex items-center gap-3",children:[s.jsx(Ir,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:n}),s.jsx("button",{onClick:()=>i(null),className:"ml-auto p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]}),o&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200 flex items-center gap-3",children:[s.jsx(Nr,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:o}),s.jsx("button",{onClick:()=>l(null),className:"ml-auto p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[s.jsx(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx(cr,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total Classes"}),s.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:c.totalClasses})]})]})}),s.jsx(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:s.jsx(ft,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total Students"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:c.totalStudents})]})]})}),s.jsx(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:s.jsx(Pe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Assignments"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:c.totalAssignments})]})]})}),s.jsx(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:s.jsx(lr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Upcoming Events"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:c.upcomingEvents})]})]})})]}),s.jsxs(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40 mb-10",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),s.jsx("div",{className:"space-y-4",children:u.map((N,g)=>s.jsxs(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(Us,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-900 dark:text-white",children:N.description}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(N.created_at).toLocaleString()})]})]},N.id))})]}),s.jsxs(w.div,{variants:j,initial:"initial",animate:"animate",whileHover:"whileHover",className:"bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl p-6 border border-white/30 dark:border-gray-800/40",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/classes"),className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(ms,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Classes"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/assignments"),className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(Pe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Assignments"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/calendar"),className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(lr,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Calendar"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/settings"),className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx(ly,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Settings"})]})]})]})]})]})}function l6(){const{user:e}=Je();Ga();const t=Qt(),r=zr(),[a,n]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[x,k]=f.useState(null),[j,N]=f.useState({grade:"",section:"",subject:"",teacher:""}),[g,p]=f.useState(""),[v,S]=f.useState("grade"),[y,_]=f.useState("asc"),[C,M]=f.useState(null),W=B=>{v===B?_(y==="asc"?"desc":"asc"):(S(B),_("asc"))},q=async()=>{if(e){if(!j.grade.trim()||!j.section.trim()||!j.subject.trim()||!j.teacher.trim()){o("All fields are required");return}try{const{data:B,error:ye}=await D.from("classes").insert([{grade:j.grade.trim(),section:j.section.trim(),subject:j.subject.trim(),teacher:j.teacher.trim()}]).select().single();if(ye)throw ye;c("Class created successfully!"),setTimeout(()=>c(null),3e3),u(!1),N({grade:"",section:"",subject:"",teacher:""})}catch(B){o(B.message)}}},Z=async()=>{if(x)try{const{error:B}=await D.from("classes").delete().eq("id",x.id);if(B)throw B;c("Class deleted successfully!"),setTimeout(()=>c(null),3e3),m(!1),k(null)}catch(B){o(B.message)}},se={initial:{opacity:0,y:40,rotateY:-10},animate:{opacity:1,y:0,rotateY:0,transition:{type:"spring",stiffness:80,damping:18}},whileHover:{scale:1.04,rotateY:8,boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}};return s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-red-600/80 to-red-900/90 pb-12 relative overflow-x-hidden",children:[s.jsx(w.div,{initial:{scale:.95,opacity:0,y:-40},animate:{scale:1,opacity:1,y:0},transition:{duration:.7,type:"spring",stiffness:80},className:"relative z-10",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-16 pb-10",children:s.jsxs(w.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.7},className:"backdrop-blur-xl bg-white/20 dark:bg-gray-900/30 rounded-3xl shadow-2xl p-10 flex flex-col items-center border border-white/30 dark:border-gray-800/40 relative overflow-hidden",children:[s.jsx(w.div,{animate:{rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:8,ease:"linear"},className:"absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br from-red-400/40 to-red-800/40 rounded-full blur-2xl z-0"}),s.jsx(w.div,{animate:{rotate:[0,-8,8,0]},transition:{repeat:1/0,duration:10,ease:"linear"},className:"absolute -bottom-10 -left-10 w-40 h-40 bg-gradient-to-br from-red-200/40 to-red-700/40 rounded-full blur-2xl z-0"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx(cr,{className:"w-14 h-14 text-white drop-shadow-lg mb-4"}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white text-center mb-3 drop-shadow-lg",children:"Classes"}),s.jsx("p",{className:"text-lg text-white/80 text-center max-w-2xl mb-6",children:"Manage your classes, view student progress, and organize course materials."}),s.jsxs(w.button,{whileHover:{scale:1.07,rotate:2},whileTap:{scale:.97},onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-8 py-4 bg-white/90 text-red-700 rounded-2xl font-bold text-lg shadow-lg hover:bg-white/100 transition-all",children:[s.jsx($e,{className:"w-6 h-6"})," Create New Class"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[s.jsxs(w.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("input",{type:"text",placeholder:"Search classes...",value:g,onChange:B=>p(B.target.value),className:"w-full sm:w-80 px-4 py-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200","aria-label":"Search classes"}),s.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:()=>W("grade"),className:`px-4 py-2 rounded-xl border transition-colors ${v==="grade"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Grade"})," ",v==="grade"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${y==="desc"?"rotate-180":""}`})," "]}),s.jsxs("button",{onClick:()=>W("section"),className:`px-4 py-2 rounded-xl border transition-colors ${v==="section"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Section"})," ",v==="section"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${y==="desc"?"rotate-180":""}`})," "]}),s.jsxs("button",{onClick:()=>W("subject"),className:`px-4 py-2 rounded-xl border transition-colors ${v==="subject"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Subject"})," ",v==="subject"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${y==="desc"?"rotate-180":""}`})," "]})]})]}),s.jsxs(fe,{children:[i&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 flex items-center gap-3",children:[s.jsx(Ir,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:i}),s.jsx("button",{onClick:()=>o(null),className:"ml-auto p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]}),l&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200 flex items-center gap-3",children:[s.jsx(Nr,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:l}),s.jsx("button",{onClick:()=>c(null),className:"ml-auto p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]})]}),a?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx(w.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"inline-block",children:s.jsx(cr,{className:"w-12 h-12 text-red-600 mx-auto mb-4 animate-spin"})}),s.jsx("p",{className:"text-gray-100 dark:text-gray-300",children:"Loading classes..."})]})}):r.classes.length===0?s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center py-20 bg-white/80 dark:bg-gray-800/80 rounded-2xl shadow-md",children:[s.jsx(cr,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No classes found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:g?"No classes match your search criteria.":"Create your first class to get started."}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-colors",children:[s.jsx($e,{className:"w-5 h-5"}),"Create New Class"]})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:r.classes.map((B,ye)=>s.jsxs(w.div,{variants:se,initial:"initial",whileInView:"animate",whileHover:"whileHover",viewport:{once:!0,amount:.3},transition:{delay:ye*.06},className:"group relative bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl overflow-hidden border border-white/30 dark:border-gray-800/40 transition-all duration-300 hover:shadow-2xl cursor-pointer",tabIndex:0,"aria-label":`View or edit class ${B.grade}-${B.section}`,children:[s.jsxs("div",{className:"h-24 bg-gradient-to-r from-red-500 to-red-700 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(cr,{className:"w-5 h-5 text-white"})}),s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Grade ",B.grade,"-",B.section]})]}),s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(ms,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Subject"}),s.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:B.subject})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Teacher"}),s.jsx("div",{className:"text-gray-900 dark:text-white",children:B.teacher})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"24 Students"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-4 h-4"}),s.jsx("span",{children:"Mon-Fri, 9:00 AM"})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-white/30 dark:border-gray-800/40 flex justify-between",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/classes/${B.id}`),className:"px-4 py-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[s.jsx(nh,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k(B),m(!0)},className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(pe,{className:"w-4 h-4"})}),s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/classes/${B.id}/edit`),className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(yi,{className:"w-4 h-4"})})]})]}),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:C===B.id?.08:0},className:"absolute inset-0 bg-white dark:bg-black pointer-events-none"})]},B.id))})]}),s.jsx(fe,{children:d&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-6 w-full max-w-lg relative border border-white/30 dark:border-gray-800/40 max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:"Create New Class"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Grade"}),s.jsx("input",{type:"text",value:j.grade,onChange:B=>N({...j,grade:B.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Grade","aria-label":"Grade"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Section"}),s.jsx("input",{type:"text",value:j.section,onChange:B=>N({...j,section:B.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Section","aria-label":"Section"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:j.subject,onChange:B=>N({...j,subject:B.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Subject","aria-label":"Subject"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Teacher"}),s.jsx("input",{type:"text",value:j.teacher,onChange:B=>N({...j,teacher:B.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Teacher","aria-label":"Teacher"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:q,className:"w-full mt-4 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold text-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx($e,{className:"w-5 h-5"})," Create Class"]})]})]})})}),s.jsx(fe,{children:h&&x&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-6 w-full max-w-md relative border border-white/30 dark:border-gray-800/40",children:[s.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:"Delete Class"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-200 mb-6 text-center",children:["Are you sure you want to delete Grade ",x.grade,"-",x.section,"? This action cannot be undone."]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,className:"px-6 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold transition-colors flex items-center gap-2",children:[s.jsx(pe,{className:"w-5 h-5"}),"Delete"]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(!1),className:"px-6 py-2 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white font-bold transition-colors flex items-center gap-2",children:[s.jsx(ce,{className:"w-5 h-5"}),"Cancel"]})]})]})})})]})}async function Tl(){try{const{data:e,error:t}=await D.rpc("get_classes");return t?(console.error("Error loading classes:",t),{classes:[],error:`Failed to load classes: ${t.message}`}):{classes:e||[]}}catch(e){return console.error("Unexpected error in loadClasses:",e),{classes:[],error:(e==null?void 0:e.message)||"An unexpected error occurred while loading classes"}}}async function c6(e){try{const{data:t,error:r}=await D.from("class_assignments").select("class_id").eq("user_id",e);if(r)return console.error(`Error fetching class assignments for student ${e}:`,r),{classes:[],error:`Failed to fetch student class assignments: ${r.message}`};if(!t||t.length===0)return{classes:[]};const a=t.map(o=>o.class_id),{data:n,error:i}=await D.from("classes").select().in("id",a);return i?(console.error(`Error fetching classes for student ${e}:`,i),{classes:[],error:`Failed to fetch student classes: ${i.message}`}):{classes:n||[]}}catch(t){return console.error(`Unexpected error fetching classes for student ${e}:`,t),{classes:[],error:(t==null?void 0:t.message)||"An unexpected error occurred while fetching student classes"}}}function tg(){const e=Qt(),{user:t}=Je(),[r,a]=f.useState([]),[n,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState([]);f.useEffect(()=>{if(!t){e("/login");return}t.role==="student"?m():x()},[t,e]);const m=async()=>{if(t)try{i(!0),d(null);const{classes:g,error:p}=await c6(t.id);if(p)throw new Error(p);if(!g||g.length===0){d("No classes have been assigned to you yet. Please contact your administrator."),i(!1);return}const v=[...g].sort((S,y)=>S.grade===y.grade?S.section.localeCompare(y.section):S.grade-y.grade);if(a(v),h(v),v.length===1){e(`/class/${v[0].id}`);return}}catch(g){console.error("Error loading student assignments:",g),d(g.message||"Failed to load your class assignments")}finally{i(!1)}},x=async()=>{if(t){i(!0),d(null);try{const{classes:g,error:p}=await Tl();if(p)throw new Error(p);if(!g||g.length===0){d("No classes found in the system"),i(!1);return}const v=[...g].sort((S,y)=>S.grade===y.grade?S.section.localeCompare(y.section):S.grade-y.grade);a(v)}catch(g){console.error("Error loading classes:",g),d(g.message||"Failed to load classes")}finally{i(!1)}}},k=async g=>{try{i(!0),d(null);const{data:p,error:v}=await D.from("classes").select("*").eq("id",g).single();if(v||!p)throw new Error("Invalid class selection");if((t==null?void 0:t.role)==="student"){const{data:S,error:y}=await D.from("class_assignments").select("*").eq("user_id",t.id).eq("class_id",g).single();if(y||!S)throw new Error("You are not assigned to this class")}localStorage.setItem("selectedClassId",g),console.log("Selected class ID stored:",g),l(p),e("/"),console.log("Navigating to home page with class ID:",g)}catch(p){console.error("Error selecting class:",p),d(p.message||"Failed to select class"),i(!1)}};if(n)return s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs(w.div,{initial:{scale:.9},animate:{scale:1},className:"text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[s.jsx(De,{className:"w-12 h-12 text-primary animate-spin mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading classes..."})]})});if(c)return s.jsx(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs(w.div,{initial:{scale:.9},animate:{scale:1},className:"text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg max-w-md w-full",children:[s.jsx("div",{className:"w-16 h-16 bg-primary/10 dark:bg-primary/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(Um,{className:"w-8 h-8 text-primary"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:(t==null?void 0:t.role)==="student"?"No Classes Assigned":"Error"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:c}),s.jsx("button",{onClick:()=>e("/"),className:"px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary/90 transition-colors",children:"Return to Dashboard"})]})});const j=r.reduce((g,p)=>(g[p.grade]||(g[p.grade]=[]),g[p.grade].push(p),g),{}),N=["A","B","C","D","E","F","G","H"];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-12 px-4 sm:px-6 lg:px-8",children:[s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12 bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[s.jsx(w.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-16 h-16 bg-primary/10 dark:bg-primary/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:s.jsx(Um,{className:"w-8 h-8 text-primary"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:(t==null?void 0:t.role)==="student"?"Your Classes":"Select a Class"}),s.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:(t==null?void 0:t.role)==="student"?"Choose a class to view":"Select a class to manage"})]}),s.jsx("div",{className:"max-w-7xl mx-auto",children:Object.entries(j).map(([g,p])=>{const v=parseInt(g);return s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:v*.05},className:"mb-10",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[s.jsx(cr,{className:"w-6 h-6 mr-2 text-primary"}),"Grade ",g]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:N.map(S=>{const y=p.find(W=>W.section.toUpperCase()===S),_=!!y,C=(o==null?void 0:o.id)===(y==null?void 0:y.id),M=_&&((t==null?void 0:t.role)==="ultra_admin"||(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="teacher"||u.some(W=>y&&W.id===y.id));return s.jsx(w.button,{onClick:()=>M&&y&&k(y.id),whileHover:M?{scale:1.03}:{scale:1},whileTap:M?{scale:.98}:{scale:1},disabled:!M,className:`
                        p-6 rounded-2xl shadow-md text-center 
                        ${C?"bg-primary text-white":M?"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-white":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}
                        transition-all duration-300
                      `,children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-2xl md:text-3xl font-bold mb-2",children:S}),C?s.jsx(w.div,{initial:{scale:0},animate:{scale:1},className:"mt-2",children:s.jsx(Nr,{className:"w-6 h-6"})}):M?s.jsx("span",{className:"text-xs mt-1",children:(t==null?void 0:t.role)==="student"?"Your class":"Select"}):s.jsx("span",{className:"text-xs mt-1",children:"Not available"})]})},`${g}-${S}`)})})]},g)})})]})}function d6(){const{user:e}=Je(),{currentClass:t,classes:r}=zr(),[a,n]=f.useState([]),[i,o]=f.useState(!0),[l,c]=f.useState(null),[d,u]=f.useState(null),[h,m]=f.useState(""),[x,k]=f.useState(!1),[j,N]=f.useState(!1),[g,p]=f.useState(null),[v,S]=f.useState({name:"",description:"",image_url:""}),[y,_]=f.useState(!1),[C,M]=f.useState({name:"",description:"",image_url:""}),[W,q]=f.useState([]),[Z,se]=f.useState(!1),[B,ye]=f.useState([]),[Y,te]=f.useState(!1),J=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin";e==null||e.role;const $=J;f.useEffect(()=>{t&&O()},[t]);const O=async()=>{if(t){o(!0),u(null);try{const{data:T,error:V}=await D.rpc("get_subjects_for_class",{class_uuid:t.id});if(V){if(aN(V)){n([]);return}throw V}n(T||[])}catch(T){console.error("Error loading subjects:",T),u({type:"error",text:"Failed to load subjects. Please try again."})}finally{o(!1)}}},H=async T=>{if(confirm("Are you sure you want to delete this subject?"))try{c(T);const{error:V}=await D.from("subjects").delete().eq("id",T);if(V)throw V;n(a.filter(R=>R.id!==T)),u({type:"success",text:"Subject deleted successfully"})}catch(V){console.error("Error deleting subject:",V),u({type:"error",text:"Failed to delete subject. Please try again."})}finally{c(null)}},U=async T=>{if(T.preventDefault(),!t){u({type:"error",text:"No class selected. Please select a class first."});return}o(!0),u(null);try{const{data:V,error:R}=await D.from("subjects").insert([{...v,class_id:t.id}]).select().single();if(R)throw R;n([V,...a]),S({name:"",description:"",image_url:""}),k(!1),u({type:"success",text:"Subject created successfully"})}catch(V){console.error("Error creating subject:",V),u({type:"error",text:"Failed to create subject. Please try again."})}finally{o(!1)}},X=async T=>{if(T.preventDefault(),!!g){o(!0),u(null);try{const{data:V,error:R}=await D.from("subjects").update({name:g.name,description:g.description,image_url:g.image_url}).eq("id",g.id).select().single();if(R)throw R;n(a.map(ae=>ae.id===V.id?V:ae)),p(null),N(!1),u({type:"success",text:"Subject updated successfully"})}catch(V){console.error("Error updating subject:",V),u({type:"error",text:"Failed to update subject. Please try again."})}finally{o(!1)}}},ue=async T=>{if(T.preventDefault(),W.length===0){u({type:"error",text:"Please select at least one class."});return}se(!0),u(null);try{const V=W.map(F=>({name:C.name,description:C.description,image_url:C.image_url,class_id:F})),{data:R,error:ae}=await D.from("subjects").insert(V).select();if(ae)throw ae;t&&W.includes(t.id)&&await O(),M({name:"",description:"",image_url:""}),q([]),_(!1),u({type:"success",text:`Subject "${C.name}" created successfully in ${W.length} class${W.length>1?"es":""}`})}catch(V){console.error("Error creating multi-class subject:",V),u({type:"error",text:"Failed to create subject. Please try again."})}finally{se(!1)}},ge=async T=>{if(confirm(`Are you sure you want to delete "${T}" from all classes?`)){se(!0),u(null);try{const{error:V}=await D.from("subjects").delete().eq("name",T);if(V)throw V;t&&a.some(R=>R.name===T)&&await O(),u({type:"success",text:`Subject "${T}" deleted successfully from all classes`})}catch(V){console.error("Error deleting multi-class subject:",V),u({type:"error",text:"Failed to delete subject. Please try again."})}finally{se(!1)}}},de=T=>{q(V=>V.includes(T)?V.filter(R=>R!==T):[...V,T])},me=()=>{q(r.map(T=>T.id))},_e=()=>{q([])},b=async()=>{te(!0);try{const{data:T,error:V}=await D.from("subjects").select("name").order("name");if(V)throw V;const R=T.reduce((F,ee)=>(F[ee.name]=(F[ee.name]||0)+1,F),{}),ae=Object.entries(R).map(([F,ee])=>({name:F,class_count:ee}));ye(ae)}catch(T){console.error("Error loading all subjects:",T),u({type:"error",text:"Failed to load subjects. Please try again."})}finally{te(!1)}};f.useEffect(()=>{y&&b()},[y]);const P=a.filter(T=>T.name.toLowerCase().includes(h.toLowerCase())||T.description.toLowerCase().includes(h.toLowerCase()));return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subjects"}),s.jsx("div",{className:"flex items-center space-x-4",children:$&&s.jsxs(s.Fragment,{children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{N(!1),_(!1),k(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 dark:bg-gray-700 dark:hover:bg-gray-600",children:[s.jsx(AN,{className:"h-5 w-5 mr-2"}),"Add Subject"]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k(!1),N(!1),_(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600",children:[s.jsx(qo,{className:"h-5 w-5 mr-2"}),"Multi-Class Subject"]})]})})]}),!t&&s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ms,{className:"h-5 w-5 text-yellow-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"No Class Selected"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:s.jsx("p",{children:"Please select a class to view its subjects and materials."})})]})]})}),s.jsx(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(xi,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search subjects...",value:h,onChange:T=>m(T.target.value),className:"pl-10 w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-gray-500 focus:ring-gray-500"})]})}),i?s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center items-center h-64",children:s.jsx(De,{className:"h-8 w-8 animate-spin text-gray-600 dark:text-gray-400"})}):s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map((T,V)=>s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:V*.1},whileHover:{scale:1.02},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[T.image_url?s.jsx("img",{src:T.image_url,alt:T.name,className:"h-12 w-12 rounded-lg object-cover"}):s.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:s.jsx(sy,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:T.name}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:T.description})]})]}),$&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{k(!1),_(!1),p(T),N(!0)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(Go,{className:"h-5 w-5"})}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>H(T.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400",disabled:l===T.id,children:l===T.id?s.jsx(De,{className:"h-5 w-5 animate-spin"}):s.jsx(pe,{className:"h-5 w-5"})})]})]}),s.jsxs(mn,{to:`/subjects/${T.id}`,className:"mt-4 inline-flex items-center text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:["View Details",s.jsx(ay,{className:"ml-1 h-4 w-4"})]})]})},T.id))}),s.jsx(fe,{children:x&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto",onClick:T=>{T.target===T.currentTarget&&k(!1)},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsxs("button",{type:"button",onClick:()=>k(!1),className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx(ce,{className:"h-6 w-6"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Create New Subject"}),s.jsxs("form",{onSubmit:U,className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subject Name"}),s.jsx("input",{type:"text",id:"name",value:v.name,onChange:T=>S({...v,name:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),s.jsx("textarea",{id:"description",value:v.description,onChange:T=>S({...v,description:T.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"image_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image URL (optional)"}),s.jsx("input",{type:"url",id:"image_url",value:v.image_url,onChange:T=>S({...v,image_url:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",children:i?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"h-5 w-5 mr-2 animate-spin"}),"Creating..."]}):"Create Subject"}),s.jsx("button",{type:"button",onClick:()=>k(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})})]})]})})}),s.jsx(fe,{children:j&&g&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto",onClick:T=>{T.target===T.currentTarget&&N(!1)},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsxs("button",{type:"button",onClick:()=>N(!1),className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx(ce,{className:"h-6 w-6"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Edit Subject"}),s.jsxs("form",{onSubmit:X,className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subject Name"}),s.jsx("input",{type:"text",id:"edit_name",value:g.name,onChange:T=>p({...g,name:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),s.jsx("textarea",{id:"edit_description",value:g.description,onChange:T=>p({...g,description:T.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit_image_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image URL (optional)"}),s.jsx("input",{type:"url",id:"edit_image_url",value:g.image_url,onChange:T=>p({...g,image_url:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",children:i?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"h-5 w-5 mr-2 animate-spin"}),"Updating..."]}):"Update Subject"}),s.jsx("button",{type:"button",onClick:()=>N(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})})]})]})})}),s.jsx(fe,{children:y&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] overflow-y-auto",onClick:T=>{T.target===T.currentTarget&&_(!1)},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full relative z-[70]",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsxs("button",{type:"button",onClick:()=>_(!1),className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx(ce,{className:"h-6 w-6"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Create Subject for Multiple Classes"}),s.jsxs("form",{onSubmit:ue,className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"multi_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subject Name"}),s.jsx("input",{type:"text",id:"multi_name",value:C.name,onChange:T=>M({...C,name:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"multi_description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),s.jsx("textarea",{id:"multi_description",value:C.description,onChange:T=>M({...C,description:T.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"multi_image_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image URL (optional)"}),s.jsx("input",{type:"url",id:"multi_image_url",value:C.image_url,onChange:T=>M({...C,image_url:T.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Classes"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("button",{type:"button",onClick:me,className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-md hover:bg-blue-200 dark:hover:bg-blue-800",children:"Select All"}),s.jsx("button",{type:"button",onClick:_e,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Clear All"})]}),s.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-gray-50 dark:bg-gray-700",children:r.map(T=>s.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:W.includes(T.id),onChange:()=>de(T.id),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Grade ",T.grade,"-",T.section]})]},T.id))}),W.length>0&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Selected: ",W.length," class",W.length>1?"es":""]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-6",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-3",children:"Existing Subjects"}),Y?s.jsx("div",{className:"flex justify-center py-4",children:s.jsx(De,{className:"h-5 w-5 animate-spin text-gray-600 dark:text-gray-400"})}):B.length>0?s.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:B.map(T=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-md",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:T.name}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",T.class_count," class",T.class_count>1?"es":"",")"]})]}),s.jsx("button",{type:"button",onClick:()=>ge(T.name),disabled:Z,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 disabled:opacity-50",title:`Delete "${T.name}" from all classes`,children:s.jsx(pe,{className:"h-4 w-4"})})]},T.name))}):s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-2",children:"No subjects found"})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"submit",disabled:Z||W.length===0,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:Z?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"h-5 w-5 mr-2 animate-spin"}),"Creating..."]}):`Create in ${W.length} Class${W.length!==1?"es":""}`}),s.jsx("button",{type:"button",onClick:()=>_(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})})]})]})})}),s.jsx(fe,{children:d&&s.jsx(w.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 px-4 py-2 rounded-md shadow-lg ${d.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:s.jsxs("div",{className:"flex items-center",children:[d.type==="success"?s.jsx(Nr,{className:"h-5 w-5 mr-2"}):s.jsx(ce,{className:"h-5 w-5 mr-2"}),d.text]})})})]})}const rg={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},u6={hidden:{opacity:0,x:-20},show:{opacity:1,x:0},exit:{opacity:0,x:-20}},Cc={hidden:{opacity:0,scale:.8},show:{opacity:1,scale:1},exit:{opacity:0,scale:.8}};function h6(){const{id:e}=Sx(),t=Qt(),[r,a]=f.useState(null),[n,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState([]),[u,h]=f.useState(new Set),[m,x]=f.useState(""),[k,j]=f.useState(""),[N,g]=f.useState(!0),[p,v]=f.useState(null),[S,y]=f.useState(""),[_,C]=f.useState(""),[M,W]=f.useState(""),[q,Z]=f.useState(!1),{currentClass:se}=zr(),{user:B}=Je(),ye=(B==null?void 0:B.role)==="admin"||(B==null?void 0:B.role)==="ultra_admin",Y=(B==null?void 0:B.role)==="teacher",te=ye||Y,[J,$]=f.useState(null),[O,H]=f.useState(!1),[U,X]=f.useState(!1),[ue,ge]=f.useState({name:"",description:"",parent_folder_id:null}),[de,me]=f.useState({title:"",description:"",file_url:"",due_date:"",folder_id:null}),[_e,b]=f.useState(new Set),[P,T]=f.useState(!1),[V,R]=f.useState(null);f.useEffect(()=>{ae(),F(),se&&(ve(),ee())},[e,se]);const ae=async()=>{if(!e)return;const{data:I}=await D.from("subjects").select("*").eq("id",e).single();I&&(a(I),y(I.name),C(I.description),W(I.image_url||""))},F=async()=>{if(e){g(!0);try{const{data:I}=await D.from("subject_links").select(`
          *,
          profiles:created_by (username)
        `).eq("subject_id",e).order("created_at",{ascending:!1});I&&i(I)}finally{g(!1)}}},ee=async()=>{if(!(!e||!se))try{const{data:I,error:A}=await D.rpc("get_folders_for_class_subject",{class_uuid:se.id,subject_uuid:e});if(A)throw A;I&&d(I)}catch(I){console.error("Error loading folders:",I),$({type:"error",text:"Failed to load folders"})}},ve=async()=>{if(!(!e||!se))try{const{data:I,error:A}=await D.from("subject_materials").select(`
          *,
          folder:folders(*)
        `).eq("subject_id",e).eq("class_id",se.id).order("created_at",{ascending:!1});if(A)throw A;I&&l(I)}catch(I){console.error("Error loading materials:",I),$({type:"error",text:"Failed to load materials"})}finally{g(!1)}},Le=async()=>{try{if(!de.title||!de.description||!se){$({type:"error",text:"Title and description are required"});return}const I=de.due_date===""?null:de.due_date,{data:A,error:z}=await D.from("subject_materials").insert([{...de,due_date:I,subject_id:e,class_id:se.id,created_by:(B==null?void 0:B.id)||null}]).select().single();if(z)throw z;$({type:"success",text:"Material created successfully"}),H(!1),me({title:"",description:"",file_url:"",due_date:"",folder_id:null}),l(le=>[A,...le])}catch(I){console.error("Error creating material:",I),$({type:"error",text:"Failed to create material"})}},K=async I=>{try{const{error:A}=await D.from("subject_materials").delete().eq("id",I);if(A)throw A;$({type:"success",text:"Material deleted successfully"}),l(o.filter(z=>z.id!==I))}catch(A){console.error("Error deleting material:",A),$({type:"error",text:"Failed to delete material"})}},re=I=>{v(I.id),me({title:I.title,description:I.description,file_url:I.file_url||"",due_date:I.due_date||"",folder_id:I.folder_id||null})},ke=async()=>{if(se){X(!0);try{const{data:I,error:A}=await D.from("folders").insert([{...ue,subject_id:e,class_id:se.id,created_by:B==null?void 0:B.id}]).select().single();if(A)throw A;I&&d(z=>[...z,I]),ge({name:"",description:"",parent_folder_id:null})}catch(I){console.error("Error creating folder:",I),$({type:"error",text:"Failed to create folder"})}finally{X(!1)}}},He=async I=>{if(confirm("Are you sure you want to delete this folder? All materials inside will be moved to the root level."))try{const{error:A}=await D.from("folders").delete().eq("id",I);if(A)throw A;const{error:z}=await D.from("subject_materials").update({folder_id:null}).eq("folder_id",I);if(z)throw z;$({type:"success",text:"Folder deleted successfully"}),d(c.filter(le=>le.id!==I)),l(o.map(le=>le.folder_id===I?{...le,folder_id:null}:le))}catch(A){console.error("Error deleting folder:",A),$({type:"error",text:"Failed to delete folder"})}},Nt=I=>{h(A=>{const z=new Set(A);return z.has(I)?z.delete(I):z.add(I),z})},yt=(I=null,A=0)=>c.filter(le=>le.parent_folder_id===I).map(le=>s.jsxs("div",{style:{marginLeft:`${A*20}px`},children:[s.jsxs(w.div,{variants:u6,className:"group flex items-center py-2 px-3 rounded-xl mb-1 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all cursor-pointer",onClick:()=>Nt(le.id),children:[s.jsxs("div",{className:"flex items-center flex-grow",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30 mr-3",children:s.jsx(Fm,{className:"h-5 w-5 text-red-500 dark:text-red-400"})}),s.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:le.name})]}),te&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:we=>{we.stopPropagation(),He(le.id)},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(pe,{className:"h-4 w-4"})})]}),u.has(le.id)&&s.jsxs(s.Fragment,{children:[yt(le.id,A+1),o.filter(we=>we.folder_id===le.id).map(we=>s.jsxs(w.div,{variants:Cc,layout:!0,className:"group flex items-center py-2 px-3 ml-8 rounded-xl mb-1 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-all",style:{marginLeft:`${(A+1)*20}px`},children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 mr-3",children:s.jsx(Pe,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:we.title}),te&&s.jsxs("div",{className:"flex items-center space-x-2 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>re(we),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:s.jsx(Go,{className:"h-4 w-4"})}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>K(we.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:s.jsx(pe,{className:"h-4 w-4"})})]})]},we.id))]})]},le.id));return N?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(De,{className:"h-8 w-8 animate-spin text-red-600"})}):r?s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(w.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-red-600 to-red-800 p-8 mb-8 shadow-xl",children:[s.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]"}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(w.h1,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"text-4xl font-bold text-white mb-2",children:r.name}),s.jsx(w.p,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1},className:"text-red-100 text-lg",children:r.description})]}),s.jsx("div",{className:"flex items-center gap-4",children:te&&s.jsxs(s.Fragment,{children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>X(!0),className:"flex items-center px-4 py-2 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-white/20 transition-all",children:[s.jsx(HN,{className:"h-5 w-5 mr-2"}),"New Folder"]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:"flex items-center px-4 py-2 bg-white text-red-600 rounded-xl hover:bg-red-50 transition-all",children:[s.jsx($e,{className:"h-5 w-5 mr-2"}),"Add Material"]})]})})]})})]}),s.jsx(fe,{children:J&&s.jsx(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`p-4 rounded-xl mb-6 backdrop-blur-sm ${J.type==="success"?"bg-green-100/80 dark:bg-green-900/50 text-green-800 dark:text-green-200":"bg-red-100/80 dark:bg-red-900/50 text-red-800 dark:text-red-200"}`,children:J.text})}),!se&&s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ms,{className:"h-5 w-5 text-yellow-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"No Class Selected"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:s.jsx("p",{children:"Please select a class to view folders and materials for this subject."})})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs(w.div,{variants:rg,className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Fm,{className:"h-5 w-5 mr-2 text-red-500"}),"Folders"]})}),s.jsx("div",{className:"p-4",children:s.jsxs(rv,{children:[yt(),o.filter(I=>!I.folder_id).map(I=>s.jsxs(w.div,{variants:Cc,layout:!0,className:"group flex items-center py-2 px-3 rounded-xl mb-1 hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-all",children:[s.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 mr-3",children:s.jsx(Pe,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:I.title}),te&&s.jsxs("div",{className:"flex items-center space-x-2 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>re(I),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",children:s.jsx(Go,{className:"h-4 w-4"})}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>K(I.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:s.jsx(pe,{className:"h-4 w-4"})})]})]},I.id))]})})]}),s.jsxs(w.div,{variants:rg,className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(ms,{className:"h-5 w-5 mr-2 text-red-500"}),"Materials"]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(I=>s.jsxs(w.div,{variants:Cc,layout:!0,className:"group relative bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 hover:shadow-lg transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-red-600/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:I.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:I.description})]}),te&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1 ${_e.has(I.id)?"text-yellow-500 dark:text-yellow-400":"text-gray-400 hover:text-yellow-500 dark:hover:text-yellow-400"}`,onClick:()=>{b(A=>{const z=new Set(A);return z.has(I.id)?z.delete(I.id):z.add(I.id),z})},title:_e.has(I.id)?"Unstar":"Star",children:_e.has(I.id)?s.jsx(Ko,{className:"h-4 w-4 fill-yellow-500 text-yellow-500 dark:fill-yellow-400 dark:text-yellow-400"}):s.jsx(Ko,{className:"h-4 w-4"})}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>K(I.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:s.jsx(pe,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex items-center justify-between mt-4",children:s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[I.file_url&&s.jsxs("a",{href:I.file_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:text-red-500 transition-colors",children:[s.jsx(Pe,{className:"h-4 w-4 mr-1"}),"View File"]}),I.due_date&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(lr,{className:"h-4 w-4 mr-1"}),new Date(I.due_date).toLocaleDateString()]})]})})]})]},I.id))})})]})]}),s.jsx(fe,{children:U&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto",onClick:I=>{I.target===I.currentTarget&&X(!1)},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsxs("button",{type:"button",onClick:()=>X(!1),className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx(ce,{className:"h-6 w-6"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Create New Folder"}),s.jsxs("form",{onSubmit:I=>{I.preventDefault(),ke()},className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"folder_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Folder Name"}),s.jsx("input",{type:"text",id:"folder_name",value:ue.name,onChange:I=>ge({...ue,name:I.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"folder_description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description (optional)"}),s.jsx("textarea",{id:"folder_description",value:ue.description,onChange:I=>ge({...ue,description:I.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"parent_folder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Parent Folder (optional)"}),s.jsxs("select",{id:"parent_folder",value:ue.parent_folder_id||"",onChange:I=>ge({...ue,parent_folder_id:I.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:"None (Root Level)"}),c.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Create Folder"}),s.jsx("button",{type:"button",onClick:()=>X(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})})]})]})})}),s.jsx(fe,{children:O&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 overflow-y-auto",onClick:I=>{I.target===I.currentTarget&&H(!1)},children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:s.jsx("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),s.jsxs(w.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsxs("button",{type:"button",onClick:()=>H(!1),className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx(ce,{className:"h-6 w-6"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Add New Material"}),s.jsxs("form",{onSubmit:I=>{I.preventDefault(),Le()},className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),s.jsx("input",{type:"text",id:"title",value:de.title,onChange:I=>me({...de,title:I.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),s.jsx("textarea",{id:"description",value:de.description,onChange:I=>me({...de,description:I.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file_url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"File URL (optional)"}),s.jsx("input",{type:"url",id:"file_url",value:de.file_url,onChange:I=>me({...de,file_url:I.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file_upload",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload File (optional)"}),s.jsx("input",{type:"file",id:"file_upload",accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg,.zip,.rar,.txt",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:async I=>{var Br;if(!((Br=I.target.files)!=null&&Br.length))return;T(!0);const A=I.target.files[0],z=A.name.split(".").pop(),le=`materials/${(B==null?void 0:B.id)||"anon"}-${Date.now()}.${z}`,{data:we,error:be}=await D.storage.from("subject-materials").upload(le,A);if(T(!1),be){alert("Failed to upload file: "+be.message);return}const Se=D.storage.from("subject-materials").getPublicUrl(le).data.publicUrl;me(mr=>({...mr,file_url:Se})),R(A.name)},disabled:P}),P&&s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Uploading..."}),V&&s.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["Uploaded: ",V]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Due Date (optional)"}),s.jsx("input",{type:"datetime-local",id:"due_date",value:de.due_date,onChange:I=>me({...de,due_date:I.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"folder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Folder (optional)"}),s.jsxs("select",{id:"folder",value:de.folder_id||"",onChange:I=>me({...de,folder_id:I.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:"None (Root Level)"}),c.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[s.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Create Material"}),s.jsx("button",{type:"button",onClick:()=>H(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})})]})]})})})]})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Subject not found"}),s.jsx("button",{onClick:()=>t("/subjects"),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Back to Subjects"})]})}function m6(){var O,H;const{user:e}=Je();Ga();const t=Qt(),r=zr(),[a,n]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState(!1),[h,m]=f.useState(!1),[x,k]=f.useState(null),[j,N]=f.useState([]),[g,p]=f.useState({title:"",description:"",due_date:"",class_id:"",points:100}),[v,S]=f.useState(""),[y,_]=f.useState("due_date"),[C,M]=f.useState("asc"),[W,q]=f.useState(null),[Z,se]=f.useState(!1),B=f.useRef(null),ye={initial:{opacity:0,y:40,rotateY:-10},animate:{opacity:1,y:0,rotateY:0,transition:{type:"spring",stiffness:80,damping:18}},whileHover:{scale:1.04,rotateY:8,boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}};f.useEffect(()=>{(async()=>{try{const{data:X,error:ue}=await D.from("assignments").select("*").order(y,{ascending:C==="asc"});if(ue)throw ue;N(X||[])}catch(X){o("Failed to load assignments"),console.error("Error loading assignments:",X)}finally{n(!1)}})()},[y,C]);const Y=U=>{y===U?M(X=>X==="asc"?"desc":"asc"):(_(U),M("asc"))},te=async()=>{if(!g.title||!g.class_id){o("Please fill in all required fields");return}try{const{data:U,error:X}=await D.from("assignments").insert([g]).select().single();if(X)throw X;N(ue=>[...ue,U]),c("Assignment created successfully"),u(!1),p({title:"",description:"",due_date:"",class_id:"",points:100})}catch(U){o("Failed to create assignment"),console.error("Error creating assignment:",U)}},J=async()=>{if(x)try{const{error:U}=await D.from("assignments").delete().eq("id",x.id);if(U)throw U;N(X=>X.filter(ue=>ue.id!==x.id)),c("Assignment deleted successfully"),m(!1),k(null)}catch(U){o("Failed to delete assignment"),console.error("Error deleting assignment:",U)}},$=j.filter(U=>U.title.toLowerCase().includes(v.toLowerCase())||U.description.toLowerCase().includes(v.toLowerCase())).sort((U,X)=>y==="title"?C==="asc"?U.title.localeCompare(X.title):X.title.localeCompare(U.title):y==="due_date"?C==="asc"?new Date(U.due_date).getTime()-new Date(X.due_date).getTime():new Date(X.due_date).getTime()-new Date(U.due_date).getTime():C==="asc"?U.points-X.points:X.points-U.points);return s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-red-600/80 to-red-900/90 pb-12 relative overflow-x-hidden",children:[s.jsx(w.div,{initial:{scale:.95,opacity:0,y:-40},animate:{scale:1,opacity:1,y:0},transition:{duration:.7,type:"spring",stiffness:80},className:"relative z-10",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-16 pb-10",children:s.jsxs(w.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.7},className:"backdrop-blur-xl bg-white/20 dark:bg-gray-900/30 rounded-3xl shadow-2xl p-10 flex flex-col items-center border border-white/30 dark:border-gray-800/40 relative overflow-hidden",children:[s.jsx(w.div,{animate:{rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:8,ease:"linear"},className:"absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br from-red-400/40 to-red-800/40 rounded-full blur-2xl z-0"}),s.jsx(w.div,{animate:{rotate:[0,-8,8,0]},transition:{repeat:1/0,duration:10,ease:"linear"},className:"absolute -bottom-10 -left-10 w-40 h-40 bg-gradient-to-br from-red-200/40 to-red-700/40 rounded-full blur-2xl z-0"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx(Pe,{className:"w-14 h-14 text-white drop-shadow-lg mb-4"}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white text-center mb-3 drop-shadow-lg",children:"Assignments"}),s.jsx("p",{className:"text-lg text-white/80 text-center max-w-2xl mb-6",children:"Create and manage assignments, track submissions, and grade student work."}),s.jsxs(w.button,{whileHover:{scale:1.07,rotate:2},whileTap:{scale:.97},onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-8 py-4 bg-white/90 text-red-700 rounded-2xl font-bold text-lg shadow-lg hover:bg-white/100 transition-all",children:[s.jsx($e,{className:"w-6 h-6"})," Create New Assignment"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[s.jsxs(w.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("input",{type:"text",placeholder:"Search assignments...",value:v,onChange:U=>S(U.target.value),className:"w-full sm:w-80 px-4 py-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200","aria-label":"Search assignments"}),s.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:()=>Y("title"),className:`px-4 py-2 rounded-xl border transition-colors ${y==="title"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Title"})," ",y==="title"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${C==="desc"?"rotate-180":""}`})," "]}),s.jsxs("button",{onClick:()=>Y("due_date"),className:`px-4 py-2 rounded-xl border transition-colors ${y==="due_date"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Due Date"})," ",y==="due_date"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${C==="desc"?"rotate-180":""}`})," "]}),s.jsxs("button",{onClick:()=>Y("points"),className:`px-4 py-2 rounded-xl border transition-colors ${y==="points"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Points"})," ",y==="points"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${C==="desc"?"rotate-180":""}`})," "]})]})]}),s.jsxs(fe,{children:[i&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 flex items-center gap-3",children:[s.jsx(Ir,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:i}),s.jsx("button",{onClick:()=>o(null),className:"ml-auto p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]}),l&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200 flex items-center gap-3",children:[s.jsx(Nr,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:l}),s.jsx("button",{onClick:()=>c(null),className:"ml-auto p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]})]}),a?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx(w.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"inline-block",children:s.jsx(Pe,{className:"w-12 h-12 text-red-600 mx-auto mb-4 animate-spin"})}),s.jsx("p",{className:"text-gray-100 dark:text-gray-300",children:"Loading assignments..."})]})}):$.length===0?s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center py-20 bg-white/80 dark:bg-gray-800/80 rounded-2xl shadow-md",children:[s.jsx(Pe,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No assignments found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:v?"No assignments match your search criteria.":"Create your first assignment to get started."}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-colors",children:[s.jsx($e,{className:"w-5 h-5"}),"Create New Assignment"]})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map((U,X)=>{var ue,ge;return s.jsxs(w.div,{variants:ye,initial:"initial",whileInView:"animate",whileHover:"whileHover",viewport:{once:!0,amount:.3},transition:{delay:X*.06},className:"group relative bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl overflow-hidden border border-white/30 dark:border-gray-800/40 transition-all duration-300 hover:shadow-2xl cursor-pointer",tabIndex:0,"aria-label":`View or edit assignment ${U.title}`,children:[s.jsxs("div",{className:"h-24 bg-gradient-to-r from-red-500 to-red-700 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(Pe,{className:"w-5 h-5 text-white"})}),s.jsx("h3",{className:"text-lg font-semibold text-white truncate max-w-[150px]",children:U.title})]}),s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(cr,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Class"}),s.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:r.classes.find(de=>de.id===U.class_id)?`Grade ${(ue=r.classes.find(de=>de.id===U.class_id))==null?void 0:ue.grade}-${(ge=r.classes.find(de=>de.id===U.class_id))==null?void 0:ge.section}`:"Unknown Class"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Due Date"}),s.jsx("div",{className:"text-gray-900 dark:text-white",children:new Date(U.due_date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bt,{className:"w-4 h-4"}),s.jsxs("span",{children:[U.points," Points"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qo,{className:"w-4 h-4"}),s.jsx("span",{children:"24 Submissions"})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-white/30 dark:border-gray-800/40 flex justify-between",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/assignments/${U.id}`),className:"px-4 py-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[s.jsx(nh,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k(U),m(!0)},className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(pe,{className:"w-4 h-4"})}),s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/assignments/${U.id}/edit`),className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(yi,{className:"w-4 h-4"})})]})]}),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:W===U.id?.08:0},className:"absolute inset-0 bg-white dark:bg-black pointer-events-none"})]},U.id)})})]}),s.jsx(fe,{children:d&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-6 w-full max-w-lg relative border border-white/30 dark:border-gray-800/40 max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:"Create New Assignment"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Title"}),s.jsx("input",{type:"text",value:g.title,onChange:U=>p({...g,title:U.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Assignment title","aria-label":"Assignment title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Description"}),s.jsx("textarea",{value:g.description,onChange:U=>p({...g,description:U.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Assignment description","aria-label":"Assignment description",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Due Date"}),s.jsx("input",{type:"datetime-local",value:g.due_date,onChange:U=>p({...g,due_date:U.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all","aria-label":"Due date"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Class"}),s.jsxs("div",{className:"relative",ref:B,children:[s.jsxs("button",{type:"button",onClick:()=>se(U=>!U),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white flex items-center justify-between focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all","aria-haspopup":"listbox","aria-expanded":Z,"aria-label":"Select class",children:[g.class_id?`Grade ${(O=r.classes.find(U=>U.id===g.class_id))==null?void 0:O.grade}-${(H=r.classes.find(U=>U.id===g.class_id))==null?void 0:H.section}`:"Select Class",s.jsx(Wt,{className:"w-4 h-4 ml-2"})]}),s.jsx(fe,{children:Z&&s.jsx(w.ul,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute z-10 mt-2 w-full bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 max-h-48 overflow-y-auto",role:"listbox",children:r.classes.map(U=>s.jsxs("li",{onClick:()=>{p({...g,class_id:U.id}),se(!1)},className:"px-3 py-2 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-900 dark:text-white",role:"option","aria-selected":g.class_id===U.id,children:["Grade ",U.grade,"-",U.section]},U.id))})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Points"}),s.jsx("input",{type:"number",value:g.points,onChange:U=>p({...g,points:parseInt(U.target.value)}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"100","aria-label":"Points",min:"0",max:"100"})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:te,className:"w-full mt-4 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold text-lg transition-colors flex items-center justify-center gap-2",children:[s.jsx($e,{className:"w-5 h-5"})," Create Assignment"]})]})]})})}),s.jsx(fe,{children:h&&x&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-6 w-full max-w-md relative border border-white/30 dark:border-gray-800/40",children:[s.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:"Delete Assignment"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-200 mb-6 text-center",children:['Are you sure you want to delete "',x.title,'"? This action cannot be undone.']}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:J,className:"px-6 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold transition-colors flex items-center gap-2",children:[s.jsx(pe,{className:"w-5 h-5"}),"Delete"]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(!1),className:"px-6 py-2 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white font-bold transition-colors flex items-center gap-2",children:[s.jsx(ce,{className:"w-5 h-5"}),"Cancel"]})]})]})})})]})}function f6(){var ve,Le;const{user:e}=Je();Ga(),Qt(),zr();const[t,r]=f.useState(!0),[a,n]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState([]),[d,u]=f.useState({title:"",content:""}),[h,m]=f.useState([]),[x,k]=f.useState(0),[j,N]=f.useState(!1),[g,p]=f.useState({student_id:"",achievement:"",description:"",date:new Date().toISOString().split("T")[0]}),[v,S]=f.useState([]),[y,_]=f.useState(!1),[C,M]=f.useState(""),[W,q]=f.useState(null),[Z,se]=f.useState(null),[B,ye]=f.useState(!1),[Y,te]=f.useState(!1),[J,$]=f.useState(null),[O,H]=f.useState(null),[U,X]=f.useState(!1),[ue,ge]=f.useState(!1),de={initial:{opacity:0},animate:{opacity:1,transition:{duration:.4,staggerChildren:.1}},exit:{opacity:0,transition:{duration:.2}}},me={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:150,damping:20}},hover:{y:-5,transition:{type:"spring",stiffness:400,damping:10}}},_e={enter:K=>({x:K>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:K=>({x:K<0?300:-300,opacity:0})},b=Pc.useMemo(()=>h,[h]),P=Pc.useMemo(()=>l,[l]);f.useEffect(()=>{if(h.length<=1||ue)return;const K=setInterval(()=>{k(re=>(re+1)%h.length)},2500);return()=>clearInterval(K)},[h.length,ue]),f.useEffect(()=>{(async()=>{try{const{data:re,error:ke}=await D.from("announcements").select(`
            *,
            profiles:created_by (
              username,
              photo_url
            )
          `).order("created_at",{ascending:!1});if(ke)throw ke;c(re||[])}catch(re){console.error(re.message)}finally{r(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const{data:re,error:ke}=await D.from("achievers").select(`
            *,
            profiles:student_id (
              username,
              photo_url
            )
          `).order("date",{ascending:!1});if(ke)throw ke;m(re||[])}catch(re){console.error(re.message)}})()},[]),f.useEffect(()=>{e&&Tn("announcements")},[e]);const T=async()=>{if(!d.title.trim()||!d.content.trim()){console.error("Please fill in all fields");return}const K={title:d.title.trim(),content:d.content.trim()};e!=null&&e.id&&(K.created_by=e.id);const{data:re,error:ke}=await D.from("announcements").insert([K]).select().single();if(console.log("Insert data:",re),console.log("Insert error:",ke),ke){alert("Insert error: "+ke.message);return}c(He=>[re,...He]),console.log("Announcement created successfully!"),setTimeout(()=>{n(!1),u({title:"",content:""})},3e3)},V=async()=>{if(W)try{const{error:K}=await D.from("announcements").delete().eq("id",W.id);if(K)throw K;c(re=>re.filter(ke=>ke.id!==W.id)),console.log("Announcement deleted successfully!"),setTimeout(()=>{o(!1)},3e3)}catch(K){console.error(K.message)}},R=async()=>{if(!C.trim()){S([]);return}_(!0);try{const{data:K,error:re}=await D.from("profiles").select("id, username, photo_url").ilike("username",`%${C}%`).limit(5);if(re)throw re;S(K||[])}catch(K){console.error(K.message)}finally{_(!1)}},ae=async()=>{if(!g.student_id||!g.achievement){console.error("Please fill in all required fields");return}let K=null;if(Z){ye(!0);const re=Z.name.split(".").pop(),ke=`certificates/${g.student_id}-${Date.now()}.${re}`,{data:He,error:Nt}=await D.storage.from("achiever-certificates").upload(ke,Z);if(ye(!1),Nt){alert("Failed to upload certificate");return}K=D.storage.from("achiever-certificates").getPublicUrl(ke).data.publicUrl}try{const{data:re,error:ke}=await D.from("achievers").insert([{student_id:g.student_id,achievement:g.achievement,description:g.description,date:g.date,certificate_url:K}]).select().single();if(ke)throw ke;m(He=>[re,...He]),setTimeout(()=>{N(!1),p({student_id:"",achievement:"",description:"",date:new Date().toISOString().split("T")[0]}),se(null)},3e3)}catch(re){console.error(re.message)}},F=async K=>{if(window.confirm("Are you sure you want to delete this achievement?"))try{const{error:re}=await D.from("achievers").delete().eq("id",K);if(re)throw re;m(ke=>ke.filter(He=>He.id!==K))}catch{alert("Failed to delete achievement")}},ee=K=>{var ke;const re=(ke=K==null?void 0:K.profiles)==null?void 0:ke.photo_url;return!re||re.trim()===""||re==="null"||re==="undefined"?"/default-avatar.png":re};return s.jsxs(w.div,{initial:"initial",animate:"animate",exit:"exit",variants:de,className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-4 sm:py-8 px-2 sm:px-6 lg:px-8",children:[s.jsx(w.div,{variants:me,className:"max-w-7xl mx-auto mb-4 sm:mb-8",children:s.jsxs("div",{className:"relative overflow-hidden rounded-2xl sm:rounded-3xl bg-gradient-to-r from-red-600 to-red-800 shadow-2xl",children:[s.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,transparent)]"}),s.jsx("div",{className:"relative px-4 sm:px-8 py-6 sm:py-10",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx(w.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15},className:"mb-3 sm:mb-4 p-2 sm:p-3 bg-white/10 rounded-xl sm:rounded-2xl backdrop-blur-sm",children:s.jsx(pa,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),s.jsx(w.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-2 sm:mb-3",children:"Announcements"}),s.jsx(w.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-sm sm:text-base text-white/90 max-w-2xl mb-4 sm:mb-6",children:"Stay updated with the latest news and important information from your school."}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="teacher")&&s.jsxs(w.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>n(!0),className:"inline-flex items-center gap-2 px-4 sm:px-5 py-2 sm:py-2.5 bg-white text-red-600 rounded-lg sm:rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all text-sm sm:text-base",children:[s.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Create New Announcement"]})]})})]})}),s.jsx(w.div,{variants:me,className:"max-w-7xl mx-auto mb-4 sm:mb-8",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-xl overflow-hidden",children:s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx(w.div,{whileHover:{rotate:15,scale:1.1},className:"p-2 sm:p-2.5 bg-gradient-to-br from-red-500 to-red-600 rounded-lg sm:rounded-xl shadow-lg",children:s.jsx(G4,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Outstanding Achievers"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:"Celebrating student excellence"})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="teacher")&&s.jsxs(w.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>N(!0),className:"inline-flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg sm:rounded-xl font-medium shadow-lg hover:shadow-xl transition-all text-xs sm:text-sm",children:[s.jsx($e,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Add Achievement"]})]}),s.jsxs("div",{className:"relative h-[280px] sm:h-[320px] overflow-hidden rounded-xl sm:rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",onMouseEnter:()=>ge(!0),onMouseLeave:()=>ge(!1),children:[s.jsx(fe,{mode:"wait",custom:x,children:b.length>0&&s.jsx(w.div,{custom:x,variants:_e,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},className:"absolute inset-0 flex items-center justify-center p-4 sm:p-6",children:s.jsx(w.div,{whileHover:{scale:1.02},className:"w-full max-w-2xl",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl shadow-xl overflow-hidden",children:s.jsxs("div",{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full overflow-hidden ring-2 sm:ring-3 ring-red-500/20 relative",children:[s.jsx("img",{src:ee(b[x]),alt:(ve=b[x].profiles)==null?void 0:ve.username,className:"w-full h-full object-cover",onError:K=>{K.currentTarget.src="/default-avatar.png"}}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="teacher")&&s.jsxs("div",{className:"absolute top-0 right-0 flex flex-col gap-1 p-1",children:[s.jsx("button",{onClick:()=>F(b[x].id),className:"bg-red-100 hover:bg-red-200 text-red-600 rounded-full p-1 shadow",title:"Delete Achievement",children:s.jsx(pe,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{$(b[x]),te(!0)},className:"bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full p-1 shadow",title:"Edit Achievement",children:s.jsx(yi,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white",children:(Le=b[x].profiles)==null?void 0:Le.username}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:new Date(b[x].date).toLocaleDateString()})]})]}),s.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold text-red-600 dark:text-red-400",children:b[x].achievement}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300",children:b[x].description})]}),b[x].certificate_url&&s.jsx("a",{href:b[x].certificate_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-3 px-3 py-1 rounded bg-blue-100 text-blue-600 hover:bg-blue-200 text-xs font-medium transition-colors",children:"View Certificate"})]})})})},x)}),b.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(w.button,{whileHover:{scale:1.1,x:-2},whileTap:{scale:.9},onClick:()=>k(K=>(K-1+b.length)%b.length),className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 p-1.5 sm:p-2 rounded-full bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white hover:bg-white dark:hover:bg-gray-800 shadow-lg hover:shadow-xl transition-all",children:s.jsx(jN,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsx(w.button,{whileHover:{scale:1.1,x:2},whileTap:{scale:.9},onClick:()=>k(K=>(K+1)%b.length),className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 p-1.5 sm:p-2 rounded-full bg-white/90 dark:bg-gray-800/90 text-gray-900 dark:text-white hover:bg-white dark:hover:bg-gray-800 shadow-lg hover:shadow-xl transition-all",children:s.jsx(ay,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),b.length>1&&s.jsx("div",{className:"absolute bottom-3 sm:bottom-4 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-1.5",children:b.map((K,re)=>s.jsx(w.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>k(re),className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all ${re===x?"bg-red-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"}`},re))})]})]})})}),s.jsx(w.div,{variants:me,className:"max-w-7xl mx-auto",children:t?s.jsx("div",{className:"flex items-center justify-center py-12 sm:py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx(w.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{rotate:{repeat:1/0,duration:1,ease:"linear"},scale:{repeat:1/0,duration:1.5,ease:"easeInOut"}},className:"inline-block",children:s.jsx(pa,{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-500 mx-auto mb-3 sm:mb-4"})}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Loading announcements..."})]})}):P.length===0?s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,damping:15},className:"text-center py-12 sm:py-16 bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-xl",children:[s.jsx(w.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"p-3 sm:p-4 bg-red-50 dark:bg-red-900/20 rounded-full w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center",children:s.jsx(pa,{className:"w-7 h-7 sm:w-8 sm:h-8 text-red-500"})}),s.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3",children:"No Announcements Yet"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 sm:mb-8 max-w-md mx-auto",children:"Be the first to create an announcement and keep everyone informed."}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin")&&s.jsxs(w.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>n(!0),className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg sm:rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all text-sm sm:text-base",children:[s.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Create New Announcement"]})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:s.jsx(fe,{mode:"wait",children:P.map(K=>{var re;return s.jsxs(w.div,{variants:me,whileHover:"hover",className:"group relative bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-xl overflow-hidden",children:[s.jsxs(w.div,{whileHover:{scale:1.02},className:"h-24 sm:h-28 bg-gradient-to-r from-red-500 to-red-600 p-4 sm:p-5 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx(w.div,{whileHover:{rotate:15,scale:1.1},className:"p-2 sm:p-2.5 bg-white/10 rounded-lg sm:rounded-xl backdrop-blur-sm",children:s.jsx(pa,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-white truncate max-w-[180px] sm:max-w-[200px]",children:K.title})]}),s.jsx(w.div,{whileHover:{rotate:15,scale:1.1},className:"p-2 sm:p-2.5 bg-white/10 rounded-lg sm:rounded-xl backdrop-blur-sm",children:s.jsx(qt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})]}),s.jsxs("div",{className:"p-4 sm:p-5",children:[s.jsxs("div",{className:"mb-3 sm:mb-4",children:[s.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1.5 sm:mb-2",children:"Content"}),s.jsx("div",{className:"text-sm sm:text-base text-gray-900 dark:text-white",children:K.content})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx(qt,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{children:((re=K.profiles)==null?void 0:re.username)||"Unknown User"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx(lr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),s.jsx("span",{children:new Date(K.created_at).toLocaleDateString()})]})]})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="ultra_admin")&&s.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-100 dark:border-gray-700 flex justify-end gap-2 sm:gap-3",children:s.jsx(w.button,{whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},onClick:()=>{q(K),o(!0)},className:"p-1.5 sm:p-2 rounded-lg sm:rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(pe,{className:"w-4 h-4 sm:w-5 sm:h-5"})})})]},K.id)})})})}),s.jsx(fe,{children:a&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-3 sm:p-4",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-lg p-5 sm:p-8 relative",children:[s.jsx("button",{onClick:()=>n(!1),className:"absolute top-3 sm:top-4 right-3 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 dark:text-gray-400"})}),s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-6",children:"Create New Announcement"}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 sm:mb-2",children:"Title"}),s.jsx("input",{type:"text",value:d.title,onChange:K=>u({...d,title:K.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all text-sm sm:text-base",placeholder:"Enter announcement title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 sm:mb-2",children:"Content"}),s.jsx("textarea",{value:d.content,onChange:K=>u({...d,content:K.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all text-sm sm:text-base",placeholder:"Enter announcement content",rows:4})]}),s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"w-full mt-4 sm:mt-6 py-2.5 sm:py-3 rounded-lg sm:rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold text-base sm:text-lg shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2",children:[s.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Create Announcement"]})]})]})})}),s.jsx(fe,{children:i&&W&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-3 sm:p-4",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-md p-5 sm:p-8 relative",children:[s.jsx("button",{onClick:()=>o(!1),className:"absolute top-3 sm:top-4 right-3 sm:right-4 p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500 dark:text-gray-400"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 sm:w-16 sm:h-16 mb-4 sm:mb-6 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:s.jsx(pe,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600 dark:text-red-400"})}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-3",children:"Delete Announcement"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 sm:mb-8",children:"Are you sure you want to delete this announcement? This action cannot be undone."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!1),className:"flex-1 py-2.5 sm:py-3 rounded-lg sm:rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white font-medium text-sm sm:text-base transition-colors",children:"Cancel"}),s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:V,className:"flex-1 py-2.5 sm:py-3 rounded-lg sm:rounded-xl bg-red-600 text-white font-medium text-sm sm:text-base transition-colors",children:"Delete"})]})]})]})})}),s.jsx(fe,{children:j&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-lg p-8 relative",children:[s.jsx("button",{onClick:()=>N(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ce,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add Achievement"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Student"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"text",value:C,onChange:K=>M(K.target.value),onKeyDown:K=>K.key==="Enter"&&R(),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Search by username"}),s.jsx(xi,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"})]}),s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:R,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-medium shadow-lg hover:shadow-xl transition-all",children:"Search"})]}),y&&s.jsx("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Searching..."}),v.length>0&&s.jsx("div",{className:"mt-4 space-y-2 max-h-48 overflow-y-auto",children:v.map(K=>s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{p(re=>({...re,student_id:K.id})),S([]),M(K.username)},className:"w-full p-3 flex items-center gap-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700",children:s.jsx("img",{src:K.photo_url||"/default-avatar.png",alt:K.username,className:"w-full h-full object-cover"})}),s.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:K.username})]},K.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Achievement *"}),s.jsx("input",{type:"text",value:g.achievement,onChange:K=>p(re=>({...re,achievement:K.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Enter achievement title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{value:g.description,onChange:K=>p(re=>({...re,description:K.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",rows:3,placeholder:"Enter achievement description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),s.jsx("input",{type:"date",value:g.date,onChange:K=>p(re=>({...re,date:K.target.value})),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Certificate (optional)"}),s.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:K=>{var re;return se(((re=K.target.files)==null?void 0:re[0])||null)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>N(!1),className:"px-6 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-colors",children:"Cancel"}),s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ae,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-medium shadow-lg hover:shadow-xl transition-all",children:"Add Achievement"})]})]})})}),s.jsx(fe,{children:Y&&J&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:200,damping:20},className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-lg p-8 relative",children:[s.jsx("button",{onClick:()=>te(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(ce,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Edit Achievement"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Achievement"}),s.jsx("input",{type:"text",value:J.achievement,onChange:K=>$({...J,achievement:K.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{value:J.description,onChange:K=>$({...J,description:K.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),s.jsx("input",{type:"date",value:J.date,onChange:K=>$({...J,date:K.target.value}),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Certificate (optional)"}),s.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:K=>{var re;return H(((re=K.target.files)==null?void 0:re[0])||null)},className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"}),J.certificate_url&&s.jsx("a",{href:J.certificate_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 px-2 py-1 rounded bg-blue-100 text-blue-600 hover:bg-blue-200 text-xs",children:"View Current Certificate"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>te(!1),className:"px-6 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white font-medium transition-colors",children:"Cancel"}),s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{X(!0);let K=J.certificate_url;if(O){const ke=O.name.split(".").pop(),He=`certificates/${J.student_id}-${Date.now()}.${ke}`,{data:Nt,error:yt}=await D.storage.from("achiever-certificates").upload(He,O);yt||(K=D.storage.from("achiever-certificates").getPublicUrl(He).data.publicUrl)}const{error:re}=await D.from("achievers").update({achievement:J.achievement,description:J.description,date:J.date,certificate_url:K}).eq("id",J.id);if(X(!1),re)alert("Failed to update achievement");else{const{data:ke,error:He}=await D.from("achievers").select(`
                          *,
                          profiles:student_id (
                            username,
                            photo_url
                          )
                        `).eq("id",J.id).single();!He&&ke?(m(Nt=>Nt.map(yt=>yt.id===ke.id?ke:yt)),te(!1),$(null),H(null)):alert("Failed to fetch updated achievement")}},disabled:U,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 text-white font-medium shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:U?"Saving...":"Save Changes"})]})]})})})]})}const gr=[{key:"resource",label:"Resources",icon:s.jsx(sy,{className:"h-5 w-5 mr-2 text-red-600"})},{key:"gallery",label:"Gallery",icon:s.jsx(iy,{className:"h-5 w-5 mr-2 text-blue-600"})},{key:"counselling",label:"Counselling",icon:s.jsx(ft,{className:"h-5 w-5 mr-2 text-green-600"})}];function g6(){var se,B,ye,Y,te,J,$;const[e,t]=f.useState([]),[r,a]=f.useState("resource"),[n,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,h]=f.useState(!1),[m,x]=f.useState(""),[k,j]=f.useState(""),[N,g]=f.useState(!1),{user:p}=Je(),v=(p==null?void 0:p.role)==="ultra_admin"||(p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="teacher";f.useEffect(()=>{S()},[]);const S=async()=>{i(!0);try{const{data:O,error:H}=await D.from("library_resources").select("*").order("created_at",{ascending:!1});if(H)throw H;t(O||[])}catch(O){l({type:"error",text:"Failed to load resources."}),console.error("Error loading resources:",O)}finally{i(!1)}},y=async O=>{var H;if(O.preventDefault(),!(!m.trim()||!k.trim()||!(p!=null&&p.id))){g(!0);try{const{error:U}=await D.from("library_resources").insert([{title:m,content:k,type:r,created_by:p.id}]);if(U)throw U;h(!1),x(""),j(""),l({type:"success",text:`${(H=gr.find(X=>X.key===r))==null?void 0:H.label} added successfully!`}),await S()}catch(U){l({type:"error",text:U.message}),console.error("Error creating resource:",U)}finally{g(!1)}}},_=async O=>{d(O);try{const{error:H}=await D.from("library_resources").delete().eq("id",O);if(H)throw H;l({type:"success",text:"Deleted successfully!"}),await S()}catch(H){l({type:"error",text:H.message}),console.error("Error deleting resource:",H)}finally{d(null)}},C={initial:{width:0,x:0},animate:O=>O?{width:O.offsetWidth,x:O.offsetLeft,transition:{type:"spring",stiffness:300,damping:30}}:{}},M={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:120,damping:18}},exit:{opacity:0,y:40,transition:{duration:.2}},hover:{scale:1.03,boxShadow:"0 8px 32px rgba(0,0,0,0.10)"}},W=e.filter(O=>O.type===r),q=f.useRef([]),Z=gr.findIndex(O=>O.key===r);return s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-gray-50/80 to-gray-100/90 dark:from-gray-900/90 dark:to-gray-800/80 py-6 px-2 xs:px-3 sm:px-6 lg:px-8 relative",children:[s.jsxs("div",{className:"max-w-5xl mx-auto w-full",children:[s.jsxs("div",{className:"flex gap-2 sm:gap-4 mb-8 relative",children:[gr.map((O,H)=>s.jsxs("button",{ref:U=>{q.current[H]=U},className:`relative flex items-center px-4 py-2 rounded-full font-semibold text-base transition-colors z-10 select-none ${r===O.key?"bg-white/90 dark:bg-gray-900/90 text-red-600 dark:text-red-400 shadow":"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-100/70 dark:hover:bg-gray-800/70"} focus:outline-none`,onClick:()=>a(O.key),tabIndex:0,children:[O.icon,s.jsx("span",{className:"hidden sm:inline",children:O.label})]},O.key)),s.jsx(w.div,{className:"absolute bottom-0 left-0 h-2 rounded-full bg-gradient-to-r from-red-500 to-red-400 z-20 shadow-lg shadow-red-200/30",style:{pointerEvents:"none"},initial:"initial",animate:C.animate(q.current[Z])})]}),s.jsx(fe,{children:o&&s.jsx(w.div,{className:`mb-4 rounded-lg px-3 py-2 sm:px-4 sm:py-3 font-medium shadow-md ${o.type==="error"?"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-200":"bg-green-50 dark:bg-green-900/50 text-green-600 dark:text-green-200"}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:o.text})}),s.jsx(rv,{children:s.jsx(w.div,{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3",layout:!0,children:s.jsx(fe,{children:n?s.jsx(w.div,{className:"col-span-full text-center text-gray-500 dark:text-gray-400 py-16",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:"Loading..."}):W.length>0?W.map(O=>{var H;return s.jsxs(w.div,{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur rounded-2xl shadow-lg p-5 flex flex-col justify-between group hover:shadow-2xl hover:shadow-red-200/30 transition-shadow relative",variants:M,initial:"hidden",animate:"visible",exit:"exit",whileHover:"hover",layout:!0,children:[v&&s.jsx(w.button,{onClick:()=>_(O.id),className:`absolute top-3 right-3 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-full transition-colors z-20 ${c===O.id?"opacity-50 pointer-events-none":""}`,"aria-label":"Delete resource",whileTap:{scale:.9},disabled:!!c,children:s.jsx(pe,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2 group-hover:text-red-600 transition-colors",children:O.title}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 whitespace-pre-wrap text-sm flex-1",children:O.content})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.type==="resource"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":O.type==="gallery"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:(H=gr.find(U=>U.key===O.type))==null?void 0:H.label}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:new Date(O.created_at).toLocaleString()})]})]},O.id)}):s.jsxs(w.div,{className:"col-span-full flex flex-col items-center justify-center py-20",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx(iy,{className:"w-24 h-24 text-gray-200 dark:text-gray-700 mb-6"}),s.jsxs("div",{className:"text-2xl font-semibold text-gray-400 dark:text-gray-600 mb-2",children:["No ",(se=gr.find(O=>O.key===r))==null?void 0:se.label," found."]}),s.jsxs("div",{className:"text-base text-gray-400 dark:text-gray-600",children:["Add your first ",(ye=(B=gr.find(O=>O.key===r))==null?void 0:B.label)==null?void 0:ye.toLowerCase(),"!"]})]})})})})]}),v&&s.jsx(w.button,{className:"fixed bottom-8 right-8 z-50 bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-full shadow-2xl p-5 flex items-center justify-center focus:outline-none",style:{boxShadow:"0 12px 36px 0 rgba(239,68,68,0.22)"},onClick:()=>h(!0),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},whileHover:{scale:1.12,y:-4},whileTap:{scale:.95},children:s.jsx($e,{className:"h-8 w-8"})}),s.jsx(fe,{children:u&&s.jsx(w.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsxs(w.div,{className:"bg-white/90 dark:bg-gray-900/90 backdrop-blur rounded-2xl shadow-2xl w-full max-w-md p-8 relative",initial:{scale:.95,opacity:0,y:40},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:40},transition:{type:"spring",stiffness:200,damping:22},children:[s.jsx("button",{className:"absolute top-3 right-3 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-red-500 transition-colors focus:outline-none",onClick:()=>h(!1),"aria-label":"Close",children:s.jsx(ce,{className:"h-5 w-5"})}),s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:["Add ",(Y=gr.find(O=>O.key===r))==null?void 0:Y.label]}),s.jsxs("form",{onSubmit:y,className:"space-y-5",children:[s.jsx("div",{children:s.jsx("input",{type:"text",value:m,onChange:O=>x(O.target.value),placeholder:`Title for ${(te=gr.find(O=>O.key===r))==null?void 0:te.label}`,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all text-lg",required:!0})}),s.jsx("div",{children:s.jsx("textarea",{value:k,onChange:O=>j(O.target.value),placeholder:`Content for ${(J=gr.find(O=>O.key===r))==null?void 0:J.label}`,rows:5,className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all resize-none text-lg",required:!0})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:!m.trim()||!k.trim()||N,className:"inline-flex items-center px-6 py-3 rounded-lg bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold shadow-lg hover:from-red-700 hover:to-red-800 transition-colors text-lg disabled:opacity-60",children:[s.jsx($e,{className:"h-5 w-5 mr-2"}),"Add ",($=gr.find(O=>O.key===r))==null?void 0:$.label]})})]})]})})})]})}function p6(){const[e,t]=f.useState([]),[r,a]=f.useState([]),[n,i]=f.useState(new Map),[o,l]=f.useState([]),[c,d]=f.useState(""),[u,h]=f.useState("all"),[m,x]=f.useState(!1),[k,j]=f.useState("username"),[N,g]=f.useState("asc"),[p,v]=f.useState(!1),[S,y]=f.useState(null),[_,C]=f.useState(null),[M,W]=f.useState(null),[q,Z]=f.useState(!1);f.useEffect(()=>{const b=P=>{P.target.closest(".dropdown-container")||W(null)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const[se,B]=f.useState([]),[ye,Y]=f.useState(!1);f.useEffect(()=>{te()},[]),f.useEffect(()=>{J()},[k,N]);const te=async()=>{try{const{classes:b,error:P}=await Tl();if(P){console.error("Error loading classes:",P);return}if(b){a(b);const T=new Map;b.forEach(V=>T.set(V.id,V)),i(T)}}catch(b){console.error("Error in loadClasses:",b)}},J=async()=>{v(!0),y(null);try{let b=D.from("profiles").select(`
          *,
          class_assignments (
            id,
            class_id,
            created_at,
            class_details:classes (*)
          )
        `).order(k,{ascending:N==="asc"});const{data:P,error:T}=await b;if(T)throw T;if(P){const V=P.map(R=>{var ae;return{...R,class_assignments:((ae=R.class_assignments)==null?void 0:ae.map(F=>({...F,class_details:F.class_details||null})))||[]}});t(V)}}catch(b){console.error("Error loading users:",b),y(b.message||"Failed to load users")}finally{v(!1)}},$=f.useMemo(()=>e.filter(b=>{var R,ae,F;const P=((R=b.username)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))||((ae=b.email)==null?void 0:ae.toLowerCase().includes(c.toLowerCase()))||((F=b.full_name)==null?void 0:F.toLowerCase().includes(c.toLowerCase())),T=u==="all"||b.role===u,V=m?b.role==="pending":b.role!=="pending";return P&&T&&V}),[e,c,u,m]),O=async b=>{try{const{data:P,error:T}=await D.from("classes").select("id").eq("id",b).single();if(T||!P)throw new Error("Invalid class selected");return!0}catch(P){return console.error("Class validation error:",P),!1}},H=async b=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone.")){v(!0);try{const{error:P}=await D.from("profiles").delete().eq("id",b);if(P)throw P;const{error:T}=await D.from("class_assignments").delete().eq("user_id",b);if(T)throw T;const{error:V}=await D.rpc("delete_user",{user_id:b});if(V)throw V;C("User deleted successfully!"),setTimeout(()=>C(null),3e3),J()}catch(P){console.error("Error deleting user:",P),y(P.message||"Failed to delete user")}finally{v(!1)}}},U=async(b,P)=>{v(!0);try{const{error:T}=await D.from("profiles").update({role:P}).eq("id",b);if(T)throw T;if(P==="admin"||P==="teacher"||P==="ultra_admin"){const V=r.map(R=>R.id);if(V.length>0){await D.from("class_assignments").delete().eq("user_id",b);const R=V.map(F=>({user_id:b,class_id:F})),{error:ae}=await D.from("class_assignments").insert(R);ae&&console.error("Error assigning classes:",ae)}}C(`User role updated to ${P}!${P==="admin"||P==="teacher"||P==="ultra_admin"?" All classes have been assigned.":""}`),setTimeout(()=>C(null),3e3),J()}catch(T){console.error("Error updating user role:",T),y(T.message||"Failed to update user role")}finally{v(!1)}},X=async(b,P)=>{v(!0);try{const{error:T}=await D.from("profiles").update({role:P}).eq("id",b);if(T)throw T;if(P==="admin"||P==="teacher"||P==="ultra_admin"){const V=r.map(R=>R.id);if(V.length>0){await D.from("class_assignments").delete().eq("user_id",b);const R=V.map(F=>({user_id:b,class_id:F})),{error:ae}=await D.from("class_assignments").insert(R);ae&&console.error("Error assigning classes:",ae)}}C(`User approved and role set to ${P}!${P==="admin"||P==="teacher"||P==="ultra_admin"?" All classes have been assigned.":""}`),setTimeout(()=>C(null),3e3),J()}catch(T){console.error("Error approving user:",T),y(T.message||"Failed to approve user")}finally{v(!1)}},ue=async(b,P)=>{Y(!0);try{for(const V of P)if(!await O(V))throw new Error(`Invalid class ID: ${V}`);const{error:T}=await D.from("class_assignments").delete().eq("user_id",b);if(T)throw T;if(P.length>0){const V=P.map(ae=>({user_id:b,class_id:ae})),{error:R}=await D.from("class_assignments").insert(V);if(R)throw R}C("User classes updated successfully!"),setTimeout(()=>C(null),3e3),J(),B([])}catch(T){console.error("Error updating user classes:",T),y(T.message||"Failed to update user classes")}finally{Y(!1)}},ge=b=>!b.class_assignments||b.class_assignments.length===0?"No classes assigned":(b.role==="admin"||b.role==="teacher"||b.role==="ultra_admin")&&b.class_assignments.length===r.length?"All classes assigned":b.class_assignments.map(P=>{const T=P.class_details;return T?`Grade ${T.grade}-${T.section}`:"Unknown Class"}).join(", "),de=b=>{switch(b){case"ultra_admin":return s.jsx(Shield,{className:"w-4 h-4 text-purple-600"});case"admin":return s.jsx(e4,{className:"w-4 h-4 text-red-600"});case"teacher":return s.jsx(cr,{className:"w-4 h-4 text-blue-600"});case"student":return s.jsx(qt,{className:"w-4 h-4 text-green-600"});case"pending":return s.jsx(Bt,{className:"w-4 h-4 text-yellow-600"});default:return s.jsx(qt,{className:"w-4 h-4 text-gray-600"})}},me=b=>{switch(b){case"ultra_admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"student":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},_e=e.filter(b=>b.role==="pending");return e.filter(b=>b.role!=="pending"),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Manage Google OAuth users and their access permissions"})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-gray-800 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx(ft,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.length," total users"]})]})})]})}),_e.length>0&&s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-800 rounded-2xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 dark:from-yellow-500 dark:to-orange-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(Bt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:"Pending Approvals"}),s.jsxs("p",{className:"text-yellow-700 dark:text-yellow-300",children:[_e.length," user",_e.length!==1?"s":""," awaiting approval"]})]})]}),s.jsxs("button",{onClick:()=>x(!m),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-yellow-700 dark:text-yellow-300 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl hover:bg-white dark:hover:bg-gray-800 transition-all duration-200 shadow-sm border border-yellow-200/50 dark:border-yellow-800/50",children:[m?"Hide":"Show"," Pending",m?s.jsx(SN,{className:"w-4 h-4"}):s.jsx(Wt,{className:"w-4 h-4"})]})]}),m&&s.jsx("div",{className:"space-y-4",children:_e.map(b=>s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl p-6 border border-yellow-200/50 dark:border-yellow-800/50 shadow-sm hover:shadow-md transition-all duration-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/40 dark:to-orange-900/40 rounded-xl flex items-center justify-center shadow-sm",children:s.jsx(qt,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:b.full_name||b.username}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.email}),s.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-medium",children:["Joined ",new Date(b.created_at).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-yellow-500 focus:border-transparent shadow-sm",onChange:P=>X(b.id,P.target.value),defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Select Role"}),s.jsx("option",{value:"student",children:"Student"}),s.jsx("option",{value:"teacher",children:"Teacher"}),s.jsx("option",{value:"admin",children:"Admin"})]}),s.jsx("button",{onClick:()=>H(b.id),className:"p-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-all duration-200 hover:scale-105",title:"Delete user",children:s.jsx(pe,{className:"w-4 h-4"})})]})]})},b.id))})]})}),s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-sm border border-gray-200/50 dark:border-gray-700/50 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(xi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search users by name, email, or username...",value:c,onChange:b=>d(b.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("select",{value:u,onChange:b=>h(b.target.value),className:"px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"teacher",children:"Teacher"}),s.jsx("option",{value:"student",children:"Student"})]})})]})}),s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl shadow-sm border border-gray-200/50 dark:border-gray-700/50 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50/80 dark:bg-gray-700/80 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Classes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Joined"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:p?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(De,{className:"w-5 h-5 animate-spin text-gray-500"}),s.jsx("span",{className:"ml-2 text-gray-500",children:"Loading users..."})]})})}):$.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):$.map(b=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:s.jsx(qt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:b.full_name||b.username}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:b.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[de(b.role),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${me(b.role)}`,children:b.role})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ge(b)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(b.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2 relative dropdown-container",children:[s.jsx("button",{onClick:()=>W(M===b.id?null:b.id),className:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400 p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(UN,{className:"w-4 h-4"})}),M===b.id&&s.jsxs("div",{className:"absolute right-0 top-8 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 min-w-[200px]",children:[s.jsxs("div",{className:"px-4 py-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Change Role"}),s.jsxs("select",{value:b.role,onChange:P=>U(b.id,P.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"student",children:"Student"}),s.jsx("option",{value:"teacher",children:"Teacher"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"ultra_admin",children:"Ultra Admin"})]})]}),s.jsxs("button",{onClick:()=>B([...se,b.id]),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(Go,{className:"w-4 h-4"}),"Edit Classes"]}),s.jsxs("button",{onClick:()=>H(b.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 flex items-center gap-2",children:[s.jsx(pe,{className:"w-4 h-4"}),"Delete User"]})]})]})})]},b.id))})]})})}),se.length>0&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Edit User Classes"}),s.jsx("button",{onClick:()=>B([]),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ce,{className:"w-5 h-5"})})]}),se.map(b=>{var V;const P=e.find(R=>R.id===b);if(!P)return null;const T=((V=P.class_assignments)==null?void 0:V.map(R=>R.class_id))||[];return s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:P.full_name||P.username}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Assign Classes"}),s.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2",children:r.map(R=>s.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[s.jsx("input",{type:"checkbox",checked:T.includes(R.id),onChange:ae=>{const F=ae.target.checked?[...T,R.id]:T.filter(ve=>ve!==R.id),ee=e.map(ve=>ve.id===b?{...ve,class_assignments:F.map(Le=>({id:"",user_id:b,class_id:Le,created_at:new Date().toISOString(),class_details:r.find(K=>K.id===Le)||null}))}:ve);t(ee)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:["Grade ",R.grade,"-",R.section]})]},R.id))})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{onClick:()=>B(se.filter(R=>R!==b)),className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),s.jsx("button",{onClick:()=>{var ae;const R=e.find(F=>F.id===b);if(R){const F=((ae=R.class_assignments)==null?void 0:ae.map(ee=>ee.class_id))||[];ue(b,F),B(se.filter(ee=>ee!==b))}},disabled:ye,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:ye?"Saving...":"Save Changes"})]})]},b)})]})})}),s.jsxs(fe,{children:[_&&s.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx(TN,{className:"w-5 h-5"}),_]}),S&&s.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx(Ir,{className:"w-5 h-5"}),S]})]})]})})}function x6(){const{user:e}=Je(),[t,r]=f.useState((e==null?void 0:e.username)||""),[a,n]=f.useState((e==null?void 0:e.photo_url)||""),[i,o]=f.useState(null),[l,c]=f.useState(!1),d=f.useRef(null),u=(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="teacher",h=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="teacher",[m,x]=f.useState([]),[k,j]=f.useState(!1),[N,g]=f.useState(""),[p,v]=f.useState(null),[S,y]=f.useState(""),[_,C]=f.useState(null),M=f.useRef({}),W=async Y=>{if(Y.preventDefault(),!!e)try{await nN(e.id,{username:t,photo_url:a||null})&&o({type:"success",text:"Profile updated successfully!"})}catch(te){o({type:"error",text:te.message})}},q=async Y=>{var te;if(!(!((te=Y.target.files)!=null&&te.length)||!e)){c(!0);try{const J=Y.target.files[0],$=J.name.split(".").pop(),O=`${e.id}-${Date.now()}.${$}`,{data:H,error:U}=await D.storage.from("profile-photos").upload(O,J);if(U)throw U;const{data:{publicUrl:X}}=D.storage.from("profile-photos").getPublicUrl(O),{data:ue,error:ge}=await D.from("profiles").update({photo_url:X}).eq("id",e.id).select().single();if(ge)throw ge;n(X),o({type:"success",text:"Profile photo updated successfully!"})}catch(J){console.error("Error uploading photo:",J),o({type:"error",text:"Failed to upload profile photo"})}finally{c(!1)}}},Z=async()=>{if(h){j(!0);try{const{data:Y,error:te}=await D.from("profiles").select("*").eq("role","student").order("username");if(te)throw te;x(Y||[])}catch(Y){console.error("Error loading students:",Y),o({type:"error",text:"Failed to load students"})}finally{j(!1)}}},se=async Y=>{if(S.trim())try{const{error:te}=await D.from("profiles").update({username:S.trim()}).eq("id",Y);if(te)throw te;x(m.map(J=>J.id===Y?{...J,username:S.trim()}:J)),v(null),y(""),o({type:"success",text:"Student username updated successfully!"})}catch(te){console.error("Error updating student username:",te),o({type:"error",text:"Failed to update student username"})}},B=async(Y,te)=>{var J;if((J=te.target.files)!=null&&J.length){C(Y);try{const $=te.target.files[0],O=$.name.split(".").pop(),H=`${Y}-${Date.now()}.${O}`,{data:U,error:X}=await D.storage.from("profile-photos").upload(H,$);if(X)throw X;const{data:{publicUrl:ue}}=D.storage.from("profile-photos").getPublicUrl(H),{error:ge}=await D.from("profiles").update({photo_url:ue}).eq("id",Y);if(ge)throw ge;x(m.map(de=>de.id===Y?{...de,photo_url:ue}:de)),o({type:"success",text:"Student photo updated successfully!"})}catch($){console.error("Error uploading student photo:",$),o({type:"error",text:"Failed to upload student photo"})}finally{C(null)}}},ye=async Y=>{C(Y);try{const{error:te}=await D.from("profiles").update({photo_url:null}).eq("id",Y);if(te)throw te;x(m.map(J=>J.id===Y?{...J,photo_url:null}:J)),o({type:"success",text:"Student photo removed successfully!"})}catch(te){console.error("Error removing student photo:",te),o({type:"error",text:"Failed to remove student photo"})}finally{C(null)}};return f.useEffect(()=>{h&&Z()},[h]),s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-red-600 to-red-700 flex items-center justify-center text-white font-semibold",children:e==null?void 0:e.username.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e==null?void 0:e.username}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:e==null?void 0:e.role})]})]})]}),i&&s.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-4 rounded-xl flex items-center gap-3 ${i.type==="success"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:[i.type==="success"?s.jsx(Nr,{className:"w-5 h-5"}):s.jsx(Ir,{className:"w-5 h-5"}),s.jsx("span",{children:i.text})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 rounded-xl bg-red-100 dark:bg-red-900/30",children:s.jsx(qt,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Profile Settings"})]}),s.jsxs("form",{onSubmit:W,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),s.jsx("input",{type:"text",value:t,onChange:Y=>r(Y.target.value),className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",disabled:!u&&(e==null?void 0:e.role)==="student"}),!u&&(e==null?void 0:e.role)==="student"&&s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can change usernames."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Profile Photo"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[a?s.jsx("img",{src:a,alt:"Profile",className:"w-20 h-20 rounded-xl object-cover",onError:Y=>{Y.currentTarget.src="https://via.placeholder.com/200?text=No+Image"}}):s.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:s.jsx(qt,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),a&&s.jsx("button",{type:"button",onClick:()=>n(""),className:"absolute -top-2 -right-2 p-1 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-800/50 transition-colors",children:s.jsx(ce,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"file",ref:d,onChange:q,accept:"image/*",className:"hidden"}),s.jsx("button",{type:"button",onClick:()=>{var Y;return(Y=d.current)==null?void 0:Y.click()},disabled:l||!u&&(e==null?void 0:e.role)==="student",className:"w-full px-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-600/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Uploading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ld,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Photo"})]})}),!u&&(e==null?void 0:e.role)==="student"&&s.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Only administrators can change profile photos."})]})]})]}),(u||(e==null?void 0:e.role)!=="student")&&s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full px-4 py-2 rounded-xl bg-gradient-to-r from-red-600 to-red-700 text-white font-medium hover:from-red-700 hover:to-red-800 transition-all",children:"Update Profile"})]})]})}),h&&s.jsx(w.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 rounded-xl bg-red-100 dark:bg-red-900/30",children:s.jsx(ft,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Student Profile Management"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:N,onChange:Y=>g(Y.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all"})]})}),k?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(De,{className:"w-8 h-8 animate-spin text-red-600 dark:text-red-400"})}):s.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[m.filter(Y=>Y.username.toLowerCase().includes(N.toLowerCase())).map(Y=>s.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-4 p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:[s.jsxs("div",{className:"relative",children:[Y.photo_url?s.jsx("img",{src:Y.photo_url,alt:Y.username,className:"w-12 h-12 rounded-full object-cover",onError:te=>{te.currentTarget.src="https://via.placeholder.com/48?text=No+Image"}}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:s.jsx(qt,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})}),s.jsx("input",{type:"file",ref:te=>M.current[Y.id]=te,onChange:te=>B(Y.id,te),accept:"image/*",className:"hidden"}),s.jsx("button",{type:"button",onClick:()=>{var te;return(te=M.current[Y.id])==null?void 0:te.click()},disabled:_===Y.id,className:"absolute -bottom-1 -right-1 p-1 rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50",title:"Change photo",children:_===Y.id?s.jsx(De,{className:"w-3 h-3 animate-spin"}):s.jsx(Ld,{className:"w-3 h-3"})}),Y.photo_url&&s.jsx("button",{type:"button",onClick:()=>ye(Y.id),disabled:_===Y.id,className:"absolute -top-1 -right-1 p-1 rounded-full bg-gray-500 text-white hover:bg-gray-600 transition-colors disabled:opacity-50",title:"Remove photo",children:_===Y.id?s.jsx(De,{className:"w-3 h-3 animate-spin"}):s.jsx(ce,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex-1",children:[p===Y.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:S,onChange:te=>y(te.target.value),className:"flex-1 px-3 py-1 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>se(Y.id),className:"p-1 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors",title:"Save",children:s.jsx(R4,{className:"w-4 h-4"})}),s.jsx("button",{type:"button",onClick:()=>{v(null),y("")},className:"p-1 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition-colors",title:"Cancel",children:s.jsx(ce,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Y.username}),s.jsx("button",{type:"button",onClick:()=>{v(Y.id),y(Y.username)},className:"p-1 rounded-lg bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",title:"Edit username",children:s.jsx(yi,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Student  ",Y.email||"No email"]})]})]},Y.id)),m.filter(Y=>Y.username.toLowerCase().includes(N.toLowerCase())).length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:N?"No students found matching your search.":"No students available."})]})]})})]})]})})}const Ec={standard:[{id:"1",title:"Welcome",body:"Welcome to your new page! This is a standard layout. Start adding your content here.",docs:[]}],grid:[{id:"1",title:"Grid Item 1",body:"This is the first grid item. Add your content here.",docs:[]},{id:"2",title:"Grid Item 2",body:"This is the second grid item. Add your content here.",docs:[]},{id:"3",title:"Grid Item 3",body:"This is the third grid item. Add your content here.",docs:[]},{id:"4",title:"Grid Item 4",body:"This is the fourth grid item. Add your content here.",docs:[]}],list:[{id:"1",title:"List Item 1",body:"This is the first list item. Add your content here.",docs:[]},{id:"2",title:"List Item 2",body:"This is the second list item. Add your content here.",docs:[]},{id:"3",title:"List Item 3",body:"This is the third list item. Add your content here.",docs:[]}],"columns-2":[{id:"1",title:"Left Column",body:"This is the left column content. Add your content here.",docs:[]},{id:"2",title:"Right Column",body:"This is the right column content. Add your content here.",docs:[]}],"columns-3":[{id:"1",title:"Column 1",body:"This is the first column content. Add your content here.",docs:[]},{id:"2",title:"Column 2",body:"This is the second column content. Add your content here.",docs:[]},{id:"3",title:"Column 3",body:"This is the third column content. Add your content here.",docs:[]}],"left-sidebar":[{id:"1",title:"Sidebar",body:"This is the sidebar content. Add navigation or quick links here.",docs:[]},{id:"2",title:"Main Content",body:"This is the main content area. Add your primary content here.",docs:[]}],"right-sidebar":[{id:"1",title:"Main Content",body:"This is the main content area. Add your primary content here.",docs:[]},{id:"2",title:"Sidebar",body:"This is the sidebar content. Add navigation or quick links here.",docs:[]}],hero:[{id:"1",title:"Hero Section",body:"This is your hero section. Add a compelling headline and description here to grab attention.",docs:[]},{id:"2",title:"Content Section",body:"This is the main content section. Add your detailed content here.",docs:[]}],masonry:[{id:"1",title:"Masonry Block 1",body:"This is the first masonry block. Add your content here.",docs:[]},{id:"2",title:"Masonry Block 2",body:"This is the second masonry block. Add your content here.",docs:[]},{id:"3",title:"Masonry Block 3",body:"This is the third masonry block. Add your content here.",docs:[]}]},sg=[{id:"standard",name:"Standard",icon:s.jsx(Ts,{className:"w-5 h-5"}),preview:s.jsx("div",{className:"h-10 w-16 bg-gradient-to-br from-gray-200 to-gray-400 rounded-lg mx-auto"})},{id:"grid",name:"Grid",icon:s.jsx(n4,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"grid grid-cols-2 gap-1 h-10 w-16",children:[s.jsx("div",{className:"bg-gray-300 rounded"}),s.jsx("div",{className:"bg-gray-400 rounded"}),s.jsx("div",{className:"bg-gray-200 rounded"}),s.jsx("div",{className:"bg-gray-400 rounded"})]})},{id:"list",name:"List",icon:s.jsx(o4,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"flex flex-col gap-1 h-10 w-16",children:[s.jsx("div",{className:"bg-gray-300 h-2 rounded"}),s.jsx("div",{className:"bg-gray-400 h-2 rounded"}),s.jsx("div",{className:"bg-gray-200 h-2 rounded"})]})},{id:"columns-2",name:"2 Columns",icon:s.jsx($N,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"flex h-10 w-16",children:[s.jsx("div",{className:"bg-gray-300 w-1/2 h-full rounded-l"}),s.jsx("div",{className:"bg-gray-400 w-1/2 h-full rounded-r"})]})},{id:"columns-3",name:"3 Columns",icon:s.jsx(KN,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"grid grid-cols-3 gap-1 h-10 w-16",children:[s.jsx("div",{className:"bg-gray-300 rounded"}),s.jsx("div",{className:"bg-gray-400 rounded"}),s.jsx("div",{className:"bg-gray-200 rounded"})]})},{id:"left-sidebar",name:"Left Sidebar",icon:s.jsx(N4,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"flex h-10 w-16",children:[s.jsx("div",{className:"bg-gray-400 w-1/4 h-full rounded-l"}),s.jsx("div",{className:"bg-gray-200 w-3/4 h-full rounded-r"})]})},{id:"right-sidebar",name:"Right Sidebar",icon:s.jsx(S4,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"flex h-10 w-16",children:[s.jsx("div",{className:"bg-gray-200 w-3/4 h-full rounded-l"}),s.jsx("div",{className:"bg-gray-400 w-1/4 h-full rounded-r"})]})},{id:"hero",name:"Hero",icon:s.jsx(E4,{className:"w-5 h-5"}),preview:s.jsx("div",{className:"h-10 w-16 bg-gradient-to-t from-gray-400 to-gray-200 rounded-lg mx-auto"})},{id:"masonry",name:"Masonry",icon:s.jsx(M4,{className:"w-5 h-5"}),preview:s.jsxs("div",{className:"grid grid-cols-2 gap-1 h-10 w-16",children:[s.jsx("div",{className:"bg-gray-300 h-6 rounded"}),s.jsx("div",{className:"bg-gray-400 h-3 rounded"}),s.jsx("div",{className:"bg-gray-200 h-3 rounded col-span-2"})]})}];function y6(){var T,V;const{user:e}=Je();Ga();const t=Qt(),{currentClass:r,classes:a}=zr(),[n,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(null),[u,h]=f.useState(null),[m,x]=f.useState(!1),[k,j]=f.useState(!1),[N,g]=f.useState(null),[p,v]=f.useState({title:"",path:"",class_id:"",layout:"standard",content:Ec.standard}),[S,y]=f.useState(""),[_,C]=f.useState("updated_at"),[M,W]=f.useState("desc"),[q,Z]=f.useState("all"),[se,B]=f.useState(null),[ye,Y]=f.useState(!1),[te,J]=f.useState(!1),[$,O]=f.useState("standard"),[H,U]=f.useState(!1),X=f.useRef(null);f.useEffect(()=>{if((e==null?void 0:e.role)!=="ultra_admin"&&(e==null?void 0:e.role)!=="admin")return;(async()=>{l(!0),d(null);try{const{data:ae,error:F}=await D.from("custom_pages").select("*").order(_,{ascending:M==="asc"});if(F)throw F;i(ae||[])}catch(ae){d(ae.message)}finally{l(!1)}})()},[e==null?void 0:e.role,_,M]);const ue=n.filter(R=>{const ae=R.title.toLowerCase().includes(S.toLowerCase())||R.path.toLowerCase().includes(S.toLowerCase()),F=q==="all"||q==="class"&&R.class_id===(r==null?void 0:r.id);return ae&&F}),ge=R=>{v(ae=>({...ae,title:R,path:R.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}))},de=async()=>{if(e){if(!p.title.trim()){d("Title is required");return}if(!p.path.trim()){d("Path is required");return}Y(!0),d(null);try{const{data:R,error:ae}=await D.from("custom_pages").insert([{title:p.title.trim(),path:p.path.trim(),class_id:p.class_id||null,content:JSON.stringify(p.content||[]),config:{layout:p.layout,theme:"default"}}]).select().single();if(ae)throw ae;i([...n,R]),x(!1),v({title:"",path:"",class_id:"",layout:"standard",content:Ec.standard}),h("Page created successfully!"),setTimeout(()=>h(null),3e3),t(`/custom/${R.path}`)}catch(R){d(R.message)}finally{Y(!1)}}},me=async()=>{if(N){J(!0),d(null);try{const{error:R}=await D.from("custom_pages").delete().eq("id",N.id);if(R)throw R;i(n.filter(ae=>ae.id!==N.id)),j(!1),g(null),h("Page deleted successfully!"),setTimeout(()=>h(null),3e3)}catch(R){d(R.message)}finally{J(!1)}}},_e=R=>{_===R?W(M==="asc"?"desc":"asc"):(C(R),W("asc"))},b={initial:{opacity:0,y:40,rotateY:-10},animate:{opacity:1,y:0,rotateY:0,transition:{type:"spring",stiffness:80,damping:18}},whileHover:{scale:1.04,rotateY:8,boxShadow:"0 12px 32px rgba(0,0,0,0.18)"}};return f.useEffect(()=>{function R(ae){X.current&&!X.current.contains(ae.target)&&U(!1)}if(H)return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[H]),(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="admin"?s.jsx("div",{className:"min-h-screen bg-white dark:bg-[#181929] flex items-center justify-center py-4 px-1 sm:py-6 sm:px-2 transition-colors duration-300",children:s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-7xl bg-gradient-to-br from-red-700 to-red-900 rounded-[32px] sm:rounded-[40px] md:rounded-[48px] shadow-2xl p-2 sm:p-4 md:p-8 lg:p-12 overflow-hidden",children:[s.jsx(w.div,{initial:{scale:.95,opacity:0,y:-40},animate:{scale:1,opacity:1,y:0},transition:{duration:.7,type:"spring",stiffness:80},className:"relative z-10",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 pt-16 pb-10",children:s.jsxs(w.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.7},className:"backdrop-blur-xl bg-white/20 dark:bg-gray-900/30 rounded-3xl shadow-2xl p-10 flex flex-col items-center border border-white/30 dark:border-gray-800/40 relative overflow-hidden",children:[s.jsx(w.div,{animate:{rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:8,ease:"linear"},className:"absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br from-red-400/40 to-red-800/40 rounded-full blur-2xl z-0"}),s.jsx(w.div,{animate:{rotate:[0,-8,8,0]},transition:{repeat:1/0,duration:10,ease:"linear"},className:"absolute -bottom-10 -left-10 w-40 h-40 bg-gradient-to-br from-red-200/40 to-red-700/40 rounded-full blur-2xl z-0"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx(qo,{className:"w-14 h-14 text-white drop-shadow-lg mb-4"}),s.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white text-center mb-3 drop-shadow-lg",children:"Customize Pages"}),r&&s.jsxs("div",{className:"text-lg text-white/90 text-center font-semibold mb-2",children:["Grade ",r.grade," - ",r.section]}),s.jsx("p",{className:"text-lg text-white/80 text-center max-w-2xl mb-6",children:"Create beautiful, interactive custom pages for your LMS. Assign them to all classes or specific classes, and choose from a variety of layouts and themes. All with stunning 3D and animated effects."}),s.jsxs(w.button,{whileHover:{scale:1.07,rotate:2},whileTap:{scale:.97},onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-8 py-4 bg-white/90 text-red-700 rounded-2xl font-bold text-lg shadow-lg hover:bg-white/100 transition-all",children:[s.jsx($e,{className:"w-6 h-6"})," Create New Page"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[s.jsxs(w.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mb-8 flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("input",{type:"text",placeholder:"Search pages...",value:S,onChange:R=>y(R.target.value),className:"w-full sm:w-80 px-4 py-3 pl-10 rounded-xl border border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200","aria-label":"Search pages"}),s.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400 dark:text-gray-500 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:()=>_e("title"),className:`px-4 py-2 rounded-xl border transition-colors ${_==="title"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Title"})," ",_==="title"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${M==="desc"?"rotate-180":""}`})," "]}),s.jsxs("button",{onClick:()=>_e("updated_at"),className:`px-4 py-2 rounded-xl border transition-colors ${_==="updated_at"?"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-white/80 dark:bg-gray-800/80 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"}`,children:[" ",s.jsx("span",{children:"Updated"})," ",_==="updated_at"&&s.jsx(Wt,{className:`w-4 h-4 transition-transform ${M==="desc"?"rotate-180":""}`})," "]})]})]}),s.jsxs(fe,{children:[c&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-200 flex items-center gap-3",children:[s.jsx(Ir,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:c}),s.jsx("button",{onClick:()=>d(null),className:"ml-auto p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]}),u&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-800 dark:text-green-200 flex items-center gap-3",children:[s.jsx(Nr,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{children:u}),s.jsx("button",{onClick:()=>h(null),className:"ml-auto p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-800/50",children:s.jsx(ce,{className:"w-4 h-4"})})]})]}),o?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx(w.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"inline-block",children:s.jsx(Ts,{className:"w-12 h-12 text-red-600 mx-auto mb-4 animate-spin"})}),s.jsx("p",{className:"text-gray-100 dark:text-gray-300",children:"Loading pages..."})]})}):ue.length===0?s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center py-20 bg-white/80 dark:bg-gray-800/80 rounded-2xl shadow-md",children:[s.jsx(Ts,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No pages found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:S?"No pages match your search criteria.":"Create your first custom page to get started."}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-colors",children:[s.jsx($e,{className:"w-5 h-5"}),"Create New Page"]})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:ue.map((R,ae)=>{var F,ee,ve;return s.jsxs(w.div,{variants:b,initial:"initial",whileInView:"animate",whileHover:"whileHover",viewport:{once:!0,amount:.3},transition:{delay:ae*.06},className:"group relative bg-white/90 dark:bg-gray-900/80 rounded-3xl shadow-xl overflow-hidden border border-white/30 dark:border-gray-800/40 transition-all duration-300 hover:shadow-2xl cursor-pointer",tabIndex:0,"aria-label":`View or edit page ${R.title}`,children:[" ",s.jsxs("div",{className:"h-24 bg-gradient-to-r from-red-500 to-red-700 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:s.jsx(Ts,{className:"w-5 h-5 text-white"})}),s.jsx("h3",{className:"text-lg font-semibold text-white truncate max-w-[150px]",children:R.title})]}),s.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:(()=>{var re;const Le=((re=R.config)==null?void 0:re.layout)||"standard",K=sg.find(ke=>ke.id===Le);return(K==null?void 0:K.icon)||s.jsx(Ts,{className:"w-5 h-5 text-white"})})()})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Path"}),s.jsx("div",{className:"text-gray-900 dark:text-white font-medium flex items-center",children:s.jsxs("span",{className:"truncate",children:["/custom/",R.path]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Class"}),s.jsx("div",{className:"text-gray-900 dark:text-white",children:R.class_id?a.find(Le=>Le.id===R.class_id)?`Grade ${(F=a.find(Le=>Le.id===R.class_id))==null?void 0:F.grade}-${(ee=a.find(Le=>Le.id===R.class_id))==null?void 0:ee.section}`:"Unknown Class":"All Classes"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{children:["Updated ",new Date(R.updated_at).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ts,{className:"w-4 h-4"}),s.jsx("span",{className:"capitalize",children:((ve=R.config)==null?void 0:ve.theme)||"Default"})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-white/30 dark:border-gray-800/40 flex justify-between",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/custom/${R.path}`),className:"px-4 py-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-2",children:[s.jsx(nh,{className:"w-4 h-4"}),s.jsx("span",{children:"View"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{g(R),j(!0)},className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",children:s.jsx(pe,{className:"w-4 h-4"})}),s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(`/custom/${R.path}`),className:"p-2 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors",children:s.jsx(yi,{className:"w-4 h-4"})})]})]}),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:se===R.id?.08:0},className:"absolute inset-0 bg-white dark:bg-black pointer-events-none"})]},R.id)})})]}),s.jsx(fe,{children:m&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-6 w-full max-w-lg relative border border-white/30 dark:border-gray-800/40 max-h-[90vh] overflow-y-auto",children:[s.jsx("button",{onClick:()=>x(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white text-center",children:"Create Custom Page"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Title"}),s.jsx("input",{type:"text",value:p.title,onChange:R=>ge(R.target.value),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Page title","aria-label":"Page title"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Path"}),s.jsx("input",{type:"text",value:p.path,onChange:R=>v({...p,path:R.target.value}),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"custom-page-path","aria-label":"Page path"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Class"}),s.jsxs("div",{className:"relative",ref:X,children:[s.jsxs("button",{type:"button",onClick:()=>U(R=>!R),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white flex items-center justify-between focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all","aria-haspopup":"listbox","aria-expanded":H,"aria-label":"Select class",children:[p.class_id?a.find(R=>R.id===p.class_id)?`Grade ${(T=a.find(R=>R.id===p.class_id))==null?void 0:T.grade}-${(V=a.find(R=>R.id===p.class_id))==null?void 0:V.section}`:"Unknown Class":"All Classes",s.jsx(Wt,{className:"w-4 h-4 ml-2"})]}),s.jsx(fe,{children:H&&s.jsxs(w.ul,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute z-10 mt-2 w-full bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 max-h-48 overflow-y-auto",role:"listbox",children:[s.jsx("li",{onClick:()=>{v({...p,class_id:""}),U(!1)},className:"px-3 py-2 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-900 dark:text-white",role:"option","aria-selected":!p.class_id,children:"All Classes"}),a.map(R=>s.jsx("li",{onClick:()=>{v({...p,class_id:R.id}),U(!1)},className:"px-3 py-2 cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/30 text-gray-900 dark:text-white",role:"option","aria-selected":p.class_id===R.id,children:`Grade ${R.grade}-${R.section}`},R.id))]})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Layout"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:sg.map(R=>s.jsxs(w.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.97},onClick:()=>{v(ae=>({...ae,layout:R.id,content:Ec[R.id]||[]})),O(R.id)},className:`flex flex-col items-center gap-1 p-2 rounded-xl border-2 transition-all ${p.layout===R.id?"border-red-500 bg-red-50 dark:bg-red-900/30":"border-transparent bg-white/80 dark:bg-gray-800/80"}`,"aria-pressed":p.layout===R.id,"aria-label":R.name,children:[R.icon,s.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:R.name}),s.jsx(w.div,{initial:{opacity:0,scale:.8},animate:{opacity:p.layout===R.id?1:.5,scale:p.layout===R.id?1.1:.9},className:"mt-1",children:R.preview}),s.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:v6(R.id)})]},R.id))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-200 font-medium mb-1",children:"Live Preview"}),s.jsx("div",{className:"border rounded-xl p-4 bg-gray-50 dark:bg-gray-800 min-h-[120px] max-h-[200px] overflow-y-auto",children:Array.isArray(p.content)?s.jsx("div",{className:"space-y-2",children:p.content.map((R,ae)=>s.jsxs("div",{className:"p-2 bg-white dark:bg-gray-700 rounded border",children:[s.jsx("div",{className:"font-medium text-sm",children:R.title}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:R.body})]},ae))}):s.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No preview available"})})]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:de,disabled:ye,className:"w-full mt-4 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold text-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[ye?s.jsx(w.span,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:s.jsx(Ts,{className:"w-5 h-5 animate-spin"})}):s.jsx($e,{className:"w-5 h-5"})," Create Page"]})]})]})})}),s.jsx(fe,{children:k&&N&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:180,damping:18},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl p-8 w-full max-w-md relative border border-white/30 dark:border-gray-800/40",children:[s.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white text-center",children:"Delete Page"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-200 mb-6 text-center",children:["Are you sure you want to delete ",s.jsx("span",{className:"font-bold",children:N.title}),"? This action cannot be undone."]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:me,disabled:te,className:"px-6 py-3 rounded-xl bg-red-600 hover:bg-red-700 text-white font-bold transition-colors disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",children:[te?s.jsx(w.span,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:s.jsx(pe,{className:"w-5 h-5 animate-spin"})}):s.jsx(pe,{className:"w-5 h-5"})," Delete"]}),s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(!1),className:"px-6 py-3 rounded-xl bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white font-bold transition-colors flex items-center gap-2",children:[s.jsx(ce,{className:"w-5 h-5"}),"Cancel"]})]})]})})})]})}):s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:20},className:"text-center p-8 rounded-2xl shadow-lg bg-white dark:bg-gray-800 max-w-md",children:[s.jsx(w.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"mx-auto mb-6 p-4 rounded-full bg-red-100 dark:bg-red-900/30 w-20 h-20 flex items-center justify-center",children:s.jsx(qo,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),s.jsx(w.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Access Denied"}),s.jsx(w.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-gray-600 dark:text-gray-300",children:"Only administrators can customize the system."})]})})}function v6(e){switch(e){case"standard":return"A simple, flexible page.";case"grid":return"A grid of content blocks.";case"list":return"A vertical list of items.";case"columns-2":return"Two side-by-side columns.";case"columns-3":return"Three columns for more content.";case"left-sidebar":return"Sidebar on the left, content on the right.";case"right-sidebar":return"Content on the left, sidebar on the right.";case"hero":return"A large hero section at the top.";case"masonry":return"Masonry-style blocks.";default:return""}}const w6={initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.02,boxShadow:"0 20px 40px rgba(0,0,0,0.15)",y:-5},whileTap:{scale:.98}},b6={initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10}},k6=({title:e,body:t,docs:r,onUpload:a,editable:n,onEdit:i,onDeleteDoc:o})=>{const l=f.useRef(null);return s.jsxs(w.div,{variants:w6,initial:"initial",animate:"animate",whileHover:"whileHover",whileTap:"whileTap",className:"relative group bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 rounded-3xl shadow-lg p-6 border border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 overflow-hidden",children:[s.jsx(w.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-pink-500/5 pointer-events-none"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:e}),s.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-red-500 to-pink-500 rounded-full"})]}),n&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",title:"Edit block",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),s.jsx("div",{className:"text-gray-700 dark:text-gray-200 mb-6 leading-relaxed whitespace-pre-line",children:t}),s.jsxs("div",{className:"space-y-3",children:[r.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-2",children:[s.jsx(Pe,{className:"w-4 h-4"}),"Documents (",r.length,")"]}),s.jsx("div",{className:"space-y-2",children:s.jsx(fe,{children:r.map((c,d)=>s.jsxs(w.div,{variants:b6,initial:"initial",animate:"animate",exit:"exit",className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(Pe,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:c.name}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Click to download"})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(w.a,{whileHover:{scale:1.1},whileTap:{scale:.9},href:c.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Download document",children:s.jsx(Nl,{className:"w-4 h-4"})}),o&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(d),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete document",children:s.jsx(ce,{className:"w-4 h-4"})})]})]},d))})})]}),a&&s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"pt-2",children:[s.jsx("input",{type:"file",ref:l,style:{display:"none"},onChange:c=>{c.target.files&&c.target.files[0]&&a(c.target.files[0])},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif"}),s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var c;return(c=l.current)==null?void 0:c.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-xl font-medium hover:from-red-600 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(ah,{className:"w-4 h-4"}),"Add Document"]})]})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-red-500/10 to-pink-500/10 rounded-bl-full pointer-events-none"})]})},j6={initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.01,boxShadow:"0 25px 50px rgba(0,0,0,0.2)",y:-8},whileTap:{scale:.99}},N6={initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10}},ag=({title:e,body:t,docs:r,onUpload:a,editable:n,onEdit:i,onDeleteDoc:o})=>{const l=f.useRef(null);return s.jsxs(w.div,{variants:j6,initial:"initial",animate:"animate",whileHover:"whileHover",whileTap:"whileTap",className:"relative group bg-gradient-to-br from-white via-gray-50 to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 rounded-3xl shadow-xl p-8 border border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 overflow-hidden min-h-[300px]",children:[s.jsx(w.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-gradient-to-br from-red-500/8 to-pink-500/8 pointer-events-none"}),s.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:e}),s.jsx("div",{className:"w-16 h-2 bg-gradient-to-r from-red-500 to-pink-500 rounded-full"})]}),n&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:"p-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",title:"Edit block",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),s.jsx("div",{className:"text-lg text-gray-700 dark:text-gray-200 mb-8 leading-relaxed whitespace-pre-line flex-1",children:t}),s.jsxs("div",{className:"space-y-4 mt-auto",children:[r.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-base font-semibold text-gray-600 dark:text-gray-400 mb-3 flex items-center gap-2",children:[s.jsx(Pe,{className:"w-5 h-5"}),"Documents (",r.length,")"]}),s.jsx("div",{className:"space-y-3",children:s.jsx(fe,{children:r.map((c,d)=>s.jsxs(w.div,{variants:N6,initial:"initial",animate:"animate",exit:"exit",className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx(Pe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white truncate",children:c.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:"Click to download"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w.a,{whileHover:{scale:1.1},whileTap:{scale:.9},href:c.url,target:"_blank",rel:"noopener noreferrer",className:"p-3 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl transition-colors",title:"Download document",children:s.jsx(Nl,{className:"w-5 h-5"})}),o&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(d),className:"p-3 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",title:"Delete document",children:s.jsx(ce,{className:"w-5 h-5"})})]})]},d))})})]}),a&&s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"pt-3",children:[s.jsx("input",{type:"file",ref:l,style:{display:"none"},onChange:c=>{c.target.files&&c.target.files[0]&&a(c.target.files[0])},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif"}),s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var c;return(c=l.current)==null?void 0:c.click()},className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-xl font-medium text-lg hover:from-red-600 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(ah,{className:"w-5 h-5"}),"Add Document"]})]})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-red-500/10 to-pink-500/10 rounded-bl-full pointer-events-none"})]})},_6={initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.02,boxShadow:"0 15px 35px rgba(0,0,0,0.15)",y:-3},whileTap:{scale:.98}},S6={initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10}},C6=({title:e,body:t,docs:r,onUpload:a,editable:n,onEdit:i,onDeleteDoc:o})=>{const l=f.useRef(null);return s.jsxs(w.div,{variants:_6,initial:"initial",animate:"animate",whileHover:"whileHover",whileTap:"whileTap",className:"relative group bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200/50 dark:border-gray-700/50 transition-all duration-300 overflow-hidden min-h-[400px] flex flex-col",children:[s.jsx(w.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-gradient-to-b from-red-500/5 to-pink-500/5 pointer-events-none"}),s.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-start justify-between mb-5",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:e}),s.jsx("div",{className:"w-10 h-1 bg-gradient-to-r from-red-500 to-pink-500 rounded-full"})]}),n&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Edit column",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),s.jsx("div",{className:"text-gray-700 dark:text-gray-200 mb-6 leading-relaxed whitespace-pre-line flex-1",children:t}),s.jsxs("div",{className:"space-y-3 mt-auto",children:[r.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-2",children:[s.jsx(Pe,{className:"w-4 h-4"}),"Documents (",r.length,")"]}),s.jsx("div",{className:"space-y-2",children:s.jsx(fe,{children:r.map((c,d)=>s.jsxs(w.div,{variants:S6,initial:"initial",animate:"animate",exit:"exit",className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(Pe,{className:"w-3 h-3 text-red-600 dark:text-red-400"})}),s.jsx("div",{className:"min-w-0 flex-1",children:s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:c.name})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(w.a,{whileHover:{scale:1.1},whileTap:{scale:.9},href:c.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Download document",children:s.jsx(Nl,{className:"w-4 h-4"})}),o&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(d),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete document",children:s.jsx(ce,{className:"w-4 h-4"})})]})]},d))})})]}),a&&s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"pt-2",children:[s.jsx("input",{type:"file",ref:l,style:{display:"none"},onChange:c=>{c.target.files&&c.target.files[0]&&a(c.target.files[0])},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif"}),s.jsxs(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var c;return(c=l.current)==null?void 0:c.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg font-medium hover:from-red-600 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(ah,{className:"w-4 h-4"}),"Add Document"]})]})]})]}),s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-bl from-red-500/10 to-pink-500/10 rounded-bl-full pointer-events-none"})]})},E6=({layout:e,blocks:t,onUploadDoc:r,editable:a,onEditCard:n,onDeleteCard:i,onDeleteDoc:o})=>{let l="",c="";switch(e){case"grid":l="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",c="max-w-7xl mx-auto";break;case"columns-2":l="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",c="max-w-6xl mx-auto";break;case"columns-3":l="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"list":l="flex flex-col gap-6 lg:gap-8",c="max-w-4xl mx-auto";break;case"left-sidebar":l="grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"right-sidebar":l="grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"hero":l="flex flex-col gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"masonry":l="columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-6 [column-fill:_balance]",c="max-w-7xl mx-auto";break;case"featured":l="flex flex-col gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"magazine":l="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8",c="max-w-7xl mx-auto";break;case"dashboard":l="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6",c="max-w-7xl mx-auto";break;case"timeline":l="flex flex-col gap-6 lg:gap-8",c="max-w-4xl mx-auto";break;default:l="flex flex-col gap-6 lg:gap-8",c="max-w-4xl mx-auto"}const d=(h,m,x)=>{if(x)return x;switch(h){case"hero":return m===0?"block":"card";case"featured":return m===0?"block":m<3?"column":"card";case"magazine":return m===0?"block":m<4?"column":"card";case"dashboard":return"card";case"timeline":return m%2===0?"block":"column";case"columns-2":case"columns-3":return"column";case"left-sidebar":case"right-sidebar":return m===0||h==="right-sidebar"&&m===t.length-1?"column":"block";case"grid":return"card";case"list":return"block";case"masonry":return m%4===0?"block":m%3===0?"column":"card";default:return"block"}},u=(h,m)=>{const x=d(e,m,h.type),k={...h,editable:a,onEdit:()=>n==null?void 0:n(m),onUpload:r?j=>r(m,j):void 0,onDeleteDoc:o?j=>o(m,j):void 0};switch(x){case"block":return s.jsx(ag,{...k});case"column":return s.jsx(C6,{...k});case"card":return s.jsx(k6,{...k});default:return s.jsx(ag,{...k})}};return e==="featured"&&t.length>0?s.jsx("div",{className:c,children:s.jsxs("div",{className:l,children:[s.jsxs("div",{className:"relative",children:[u(t[0],0),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(0),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]}),t.slice(1,3).map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m+1),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+1),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+1)),t.slice(3).length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 col-span-full",children:t.slice(3).map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m+3),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+3),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+3))})]})}):e==="magazine"&&t.length>0?s.jsx("div",{className:c,children:s.jsxs("div",{className:l,children:[s.jsxs("div",{className:"lg:col-span-8 relative",children:[u(t[0],0),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(0),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]}),t.slice(1,4).map((h,m)=>s.jsxs("div",{className:"lg:col-span-4 relative",children:[u(h,m+1),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+1),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+1)),t.slice(4).length>0&&s.jsxs(s.Fragment,{children:[t.slice(4,7).map((h,m)=>s.jsxs("div",{className:"lg:col-span-4 relative",children:[u(h,m+4),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+4),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+4)),t.slice(7).map((h,m)=>s.jsxs("div",{className:"lg:col-span-3 relative",children:[u(h,m+7),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+7),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+7))]})]})}):e==="timeline"&&t.length>0?s.jsx("div",{className:c,children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-red-500 to-pink-500 rounded-full"}),s.jsx("div",{className:"space-y-8",children:t.map((h,m)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-6 top-8 w-4 h-4 bg-red-500 rounded-full border-4 border-white dark:border-gray-800 shadow-lg"}),s.jsxs("div",{className:"ml-16 relative",children:[u(h,m),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]})]},m))})]})}):e==="left-sidebar"&&t.length>1?s.jsx("div",{className:c,children:s.jsxs("div",{className:l,children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"relative",children:[u(t[0],0),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(0),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"lg:col-span-3 flex flex-col gap-6",children:t.slice(1).map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m+1),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+1),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+1))})]})}):e==="right-sidebar"&&t.length>1?s.jsx("div",{className:c,children:s.jsxs("div",{className:l,children:[s.jsx("div",{className:"lg:col-span-3 flex flex-col gap-6",children:t.slice(0,-1).map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m))}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"relative",children:[u(t[t.length-1],t.length-1),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(t.length-1),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]})})]})}):e==="hero"&&t.length>0?s.jsx("div",{className:c,children:s.jsxs("div",{className:"flex flex-col gap-6 lg:gap-8",children:[s.jsxs("div",{className:"relative",children:[u(t[0],0),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(0),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.slice(1).map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m+1),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m+1),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m+1))})]})}):e==="masonry"?s.jsx("div",{className:c,children:s.jsx("div",{className:l,children:t.map((h,m)=>s.jsxs("div",{className:"relative break-inside-avoid mb-6",children:[u(h,m),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m))})}):s.jsx("div",{className:c,children:s.jsx("div",{className:l,children:t.map((h,m)=>s.jsxs("div",{className:"relative",children:[u(h,m),a&&i&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(m),className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full shadow-lg hover:bg-red-600 transition-colors z-10",title:"Delete block",children:s.jsx(pe,{className:"w-4 h-4"})})]},m))})})};function T6(){var ae;const{path:e}=Sx(),{currentClass:t}=zr(),[r,a]=f.useState(null),[n,i]=f.useState([]),[o,l]=f.useState(null),[c,d]=f.useState({title:"",body:"",docs:[]}),[u,h]=f.useState(!0),[m,x]=f.useState(null),[k,j]=f.useState(null),[N,g]=f.useState(null),[p,v]=f.useState(!1),[S,y]=f.useState(!1),[_,C]=f.useState(!1),[M,W]=f.useState(!1),[q,Z]=f.useState(!1),[se,B]=f.useState([]),[ye,Y]=f.useState([]),[te,J]=f.useState(!1),{user:$}=Je(),O=($==null?void 0:$.role)==="ultra_admin"||($==null?void 0:$.role)==="admin";f.useEffect(()=>{H()},[e]),f.useEffect(()=>{r&&U(r.id)},[r]);const H=async()=>{if(!e){console.log("No path provided");return}console.log("Loading page with path:",e),h(!0);try{let{data:F,error:ee}=await D.from("custom_pages").select("*").eq("path",e).single();if(ee&&ee.code==="PGRST116"){console.log("Page not found by path, trying by ID:",e);const{data:ve,error:Le}=await D.from("custom_pages").select("*").eq("id",e).single();F=ve,ee=Le}if(console.log("Query result:",{data:F,error:ee}),ee)throw ee;if(F){a(F);try{const ve=JSON.parse(F.content||"[]");i(Array.isArray(ve)?ve:[])}catch{i([])}t&&U(F.id)}}catch(F){console.error("Error loading page:",F),x(F.message),setTimeout(()=>x(null),3e3)}finally{h(!1)}},U=async F=>{try{const{data:ee,error:ve}=await D.from("sidebar_pages").select("*").eq("page_id",F);if(ve){console.error("Error checking sidebar status:",ve);return}C(ee&&ee.length>0)}catch(ee){console.error("Error checking sidebar status:",ee)}},X=async()=>{try{const{data:F,error:ee}=await D.from("classes").select("*").order("grade").order("section");if(ee)throw ee;Y(F||[])}catch(F){console.error("Error loading classes:",F)}},ue=async()=>{if(!(!r||M))if(_){W(!0);try{const{error:F}=await D.from("sidebar_pages").delete().eq("page_id",r.id);if(F)throw F;C(!1),j("Page removed from all sidebars!")}catch(F){console.error("Sidebar toggle error:",F),x(F.message)}finally{W(!1),setTimeout(()=>j(null),3e3),setTimeout(()=>x(null),3e3)}}else await X(),Z(!0)},ge=async()=>{if(!(!r||se.length===0)){J(!0);try{const F=se.map(ve=>({page_id:r.id,class_id:ve,title:r.title,order_index:999})),{error:ee}=await D.from("sidebar_pages").insert(F);if(ee)throw ee;C(!0),Z(!1),B([]),j(`Page added to ${se.length} class${se.length>1?"es":""}!`)}catch(F){console.error("Error adding to sidebar:",F),x(F.message)}finally{J(!1),setTimeout(()=>j(null),3e3),setTimeout(()=>x(null),3e3)}}},de=async()=>{if(r){v(!0);try{const{error:F}=await D.from("custom_pages").update({content:JSON.stringify(n)}).eq("id",r.id);if(F)throw F;a({...r,content:JSON.stringify(n)}),j("Changes saved successfully!"),setTimeout(()=>j(null),3e3)}catch(F){console.error("Error saving page:",F),x(F.message),setTimeout(()=>x(null),3e3)}finally{v(!1)}}},me=()=>{y(!0)},_e=F=>{const ee={title:`New ${F.charAt(0).toUpperCase()+F.slice(1)}`,body:"Add your content here...",docs:[],type:F};i([...n,ee]),y(!1),setTimeout(()=>de(),100)},b=F=>{l(F),d(n[F])},P=()=>{if(o!==null){const F=[...n];F[o]=c,i(F),l(null),d({title:"",body:"",docs:[]}),setTimeout(()=>de(),100)}},T=F=>{i(n.filter((ee,ve)=>ve!==F)),setTimeout(()=>de(),100)},V=(F,ee)=>{const ve=[...n];ve[F].docs.splice(ee,1),i(ve),setTimeout(()=>de(),100)},R=async(F,ee)=>{g(F);try{if(ee.size>52428800)throw new Error("File size must be less than 50MB");if(!["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png","image/gif","image/webp"].includes(ee.type))throw new Error("File type not supported. Please upload PDF, Word documents, text files, or images.");const Le=`${Date.now()}-${ee.name}`,{data:K,error:re}=await D.storage.from("custom-page-docs").upload(Le,ee);if(re)throw re.message.includes("Bucket not found")?new Error("Storage bucket not configured. Please contact an administrator."):re;const{data:{publicUrl:ke}}=D.storage.from("custom-page-docs").getPublicUrl(Le),He=[...n];He[F].docs.push({name:ee.name,url:ke}),i(He),await de(),j("Document uploaded successfully!"),setTimeout(()=>j(null),3e3)}catch(ve){console.error("Upload error:",ve),x("Failed to upload document: "+ve.message),setTimeout(()=>x(null),5e3)}finally{g(null)}};return u?s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs(w.div,{initial:{scale:.9},animate:{scale:1},className:"text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[s.jsx(De,{className:"w-12 h-12 text-primary animate-spin mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading page..."})]})}):r?s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-8 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:s.jsxs("div",{className:"p-6 sm:p-8",children:[s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r.title}),_&&s.jsxs(w.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-sm font-medium",children:[s.jsx(Im,{className:"w-4 h-4"}),"In Sidebar"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[O&&s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ue,disabled:M,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${_?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"} ${M?"opacity-50 cursor-not-allowed":""}`,title:_?"Remove from sidebar":"Add to sidebar",children:[M?s.jsx(De,{className:"w-4 h-4 animate-spin"}):_?s.jsx(Im,{className:"w-4 h-4"}):s.jsx(ms,{className:"w-4 h-4"}),M?"Updating...":_?"Remove from Sidebar":"Add to Sidebar"]}),O&&s.jsxs(w.button,{onClick:me,className:"btn btn-primary gap-2 rounded-xl",children:[s.jsx($e,{className:"w-5 h-5"})," Add Block"]})]})]}),s.jsxs(fe,{mode:"wait",children:[m&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"alert alert-error rounded-xl mb-6",children:[s.jsx(Ir,{className:"w-5 h-5"}),s.jsx("span",{children:m})]}),k&&s.jsxs(w.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"alert alert-success rounded-xl mb-6",children:[s.jsx(Nr,{className:"w-5 h-5"}),s.jsx("span",{children:k})]})]}),s.jsx(fe,{children:o!==null&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Edit Content Block"}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(null),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:s.jsx(ce,{className:"w-6 h-6"})})]}),s.jsx("p",{className:"text-red-100 mt-2",children:"Update the title and content for this block"})]}),s.jsxs("div",{className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Block Title"}),s.jsx("input",{type:"text",value:c.title,onChange:F=>d({...c,title:F.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 text-lg",placeholder:"Enter block title..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Content"}),s.jsx("textarea",{value:c.body,onChange:F=>d({...c,body:F.target.value}),rows:8,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 resize-none",placeholder:"Enter your content here..."}),s.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:"Use line breaks to create paragraphs"}),s.jsxs("span",{children:[c.body.length," characters"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Live Preview"}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 min-h-[100px] max-h-[200px] overflow-y-auto",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-2",children:c.title||"Untitled Block"}),s.jsx("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line",children:c.body||"No content yet..."})]})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 flex gap-3 flex-shrink-0",children:[s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(null),className:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsx(w.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-xl font-semibold hover:from-red-600 hover:to-pink-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Save Changes"})]})]})})}),s.jsx(fe,{children:S&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Choose Block Type"}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>y(!1),className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:s.jsx(ce,{className:"w-6 h-6"})})]}),s.jsx("p",{className:"text-red-100 mt-2",children:"Select the type of content block you want to add"})]}),s.jsxs("div",{className:"p-6 space-y-4 flex-1 overflow-y-auto",children:[s.jsx(w.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>_e("block"),className:"w-full p-6 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl border-2 border-gray-200 dark:border-gray-600 hover:border-red-300 dark:hover:border-red-500 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:"Content Block"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Large, prominent section for main content"})]})]})}),s.jsx(w.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>_e("column"),className:"w-full p-6 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl border-2 border-gray-200 dark:border-gray-600 hover:border-red-300 dark:hover:border-red-500 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:"Column"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Tall, narrow section for sidebar content"})]})]})}),s.jsx(w.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>_e("card"),className:"w-full p-6 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl border-2 border-gray-200 dark:border-gray-600 hover:border-red-300 dark:hover:border-red-500 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:s.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-400 transition-colors",children:"Card"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Compact component for grid layouts"})]})]})})]})]})})}),s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pe,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"No content yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This page doesn't have any content blocks yet."}),O&&s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:me,className:"btn btn-primary gap-2",children:[s.jsx($e,{className:"w-5 h-5"}),"Add Your First Block"]})]}):s.jsx(E6,{layout:((ae=r.config)==null?void 0:ae.layout)||"standard",blocks:n,onUploadDoc:O?R:void 0,editable:O,onEditCard:O?b:void 0,onDeleteCard:O?T:void 0,onDeleteDoc:O?V:void 0})}),p&&s.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx(De,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Saving..."})]}),s.jsx(fe,{children:q&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.8,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.8,y:40,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Add to Sidebar"}),s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{Z(!1),B([])},className:"p-2 hover:bg-white/20 rounded-xl transition-colors",children:s.jsx(ce,{className:"w-6 h-6"})})]}),s.jsx("p",{className:"text-red-100 mt-2",children:"Select which classes should see this page in their sidebar"})]}),s.jsxs("div",{className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[s.jsx("input",{type:"checkbox",id:"select-all",checked:se.length===ye.length&&ye.length>0,onChange:F=>{F.target.checked?B(ye.map(ee=>ee.id)):B([])},className:"w-5 h-5 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"select-all",className:"text-lg font-semibold text-gray-900 dark:text-white cursor-pointer",children:"Add to All Classes"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Or select specific classes:"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:ye.map(F=>s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",checked:se.includes(F.id),onChange:ee=>{ee.target.checked?B([...se,F.id]):B(se.filter(ve=>ve!==F.id))},className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),s.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:["Grade ",F.grade,"-",F.section]})]},F.id))})]})]}),s.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800 flex justify-end gap-3",children:[s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Z(!1),B([])},className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ge,disabled:se.length===0||te,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:te?s.jsxs(s.Fragment,{children:[s.jsx(De,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):s.jsxs(s.Fragment,{children:["Add to ",se.length," Class",se.length!==1?"es":""]})})]})]})})})]})})})}):s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:s.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg",children:[s.jsx(Ir,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"The requested page could not be found."})]})})}function P6(){const{user:e}=Je(),[t,r]=f.useState("results"),[a,n]=f.useState([]),[i,o]=f.useState(""),[l,c]=f.useState([]),[d,u]=f.useState([]),[h,m]=f.useState(!1),[x,k]=f.useState([]),[j,N]=f.useState([]),[g,p]=f.useState([]),[v,S]=f.useState(new Date().toISOString().split("T")[0]),[y,_]=f.useState(null),[C,M]=f.useState({student_id:"",subject_id:"",grade:"",marks:"",total_marks:"",test_date:new Date().toISOString().split("T")[0],test_name:""}),[W,q]=f.useState({testName:"",marks:"",totalMarks:"",reason:""}),[Z,se]=f.useState({student_id:"",warning_count:"1",reason:"",date:new Date().toISOString().split("T")[0]}),B=(e==null?void 0:e.role)==="ultra_admin"||(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="teacher";f.useEffect(()=>{B?(ye(),Y()):J()},[B,e]),f.useEffect(()=>{i&&B&&(te(),$())},[i,B]),f.useEffect(()=>{i&&B&&$()},[t,i,B]);const ye=async()=>{m(!0);try{const{classes:b,error:P}=await Tl();if(P)_({type:"error",text:P});else{const T=b.map(V=>({id:V.id,grade:V.grade,section:V.section,subject_id:"",subject_name:""}));n(T)}}catch(b){console.error("Error loading classes:",b),_({type:"error",text:"Failed to load classes"})}finally{m(!1)}},Y=async()=>{try{const{data:b}=await D.from("subjects").select("*").order("name");b&&u(b)}catch(b){console.error("Error loading subjects:",b)}},te=async()=>{if(i){m(!0);try{const{data:b,error:P}=await D.from("class_assignments").select(`
          id,
          class_id,
          profiles:user_id (
            id,
            username,
            email,
            photo_url
          )
        `).eq("class_id",i);if(P)throw P;if(b){const T=b.map(V=>({id:V.id,class_id:V.class_id,profiles:V.profiles?[V.profiles]:[]}));c(T.map(V=>V.profiles).flat())}}catch(b){console.error("Error loading students:",b),_({type:"error",text:"Failed to load students"})}finally{m(!1)}}},J=async()=>{if(e){m(!0);try{const{data:b}=await D.from("results").select(`
          *,
          subjects(name)
        `).eq("student_id",e.id).order("test_date",{ascending:!1});b&&k(b);const{data:P}=await D.from("attendance").select("*").eq("student_id",e.id).order("date",{ascending:!1});P&&N(P);const{data:T}=await D.from("discipline").select("*").eq("student_id",e.id).order("date",{ascending:!1});T&&p(T)}catch(b){console.error("Error loading student data:",b),_({type:"error",text:"Failed to load student data"})}finally{m(!1)}}},$=async()=>{if(i){m(!0);try{if(console.log("Loading records for:",{activeTab:t,selectedClass:i}),t==="results"){const{data:b,error:P}=await D.from("results").select(`
            *,
            profiles:student_id (username),
            subjects(name)
          `).eq("class_id",i).order("test_date",{ascending:!1});if(P)throw P;console.log("Loaded results:",(b==null?void 0:b.length)||0),b&&k(b)}else if(t==="schoolAttendance"){const{data:b,error:P}=await D.from("attendance").select(`
            *,
            profiles:student_id (username)
          `).eq("class_id",i).eq("type","school").order("date",{ascending:!1});if(P)throw P;console.log("Loaded attendance:",(b==null?void 0:b.length)||0),b&&N(b)}else if(t==="discipline"){const{data:b,error:P}=await D.from("discipline").select(`
            *,
            profiles:student_id (username)
          `).eq("class_id",i).order("date",{ascending:!1});if(P)throw P;console.log("Loaded discipline:",(b==null?void 0:b.length)||0),b&&p(b)}}catch(b){console.error("Error loading records:",b),_({type:"error",text:"Failed to load records"})}finally{m(!1)}}},O=async b=>{if(b.preventDefault(),!i||!C.student_id||!C.subject_id||!C.test_name){_({type:"error",text:"Please fill all required fields"});return}try{const{data:P,error:T}=await D.from("results").insert([{student_id:C.student_id,subject_id:C.subject_id,class_id:i,grade:C.grade,marks:parseInt(C.marks)||0,total_marks:parseInt(C.total_marks)||100,test_date:C.test_date,test_name:C.test_name}]).select(`
          *,
          profiles:student_id (username),
          subjects(name)
        `).single();if(T)throw T;P&&(k([P,...x]),M({student_id:"",subject_id:"",grade:"",marks:"",total_marks:"",test_date:new Date().toISOString().split("T")[0],test_name:""}),_({type:"success",text:"Result added successfully"}),setTimeout(()=>{i&&B&&$()},1e3))}catch(P){_({type:"error",text:P.message})}},H=async(b,P)=>{if(!i||!v)return;const T="school";try{const{data:V}=await D.from("attendance").select("*").eq("student_id",b).eq("class_id",i).eq("date",v).eq("type",T).single();let R;if(V){const{data:ae,error:F}=await D.from("attendance").update({status:P}).eq("id",V.id).select(`
            *,
            profiles:student_id (username)
          `).single();if(F)throw F;R=ae}else{const{data:ae,error:F}=await D.from("attendance").insert([{student_id:b,class_id:i,date:v,status:P,type:T}]).select(`
            *,
            profiles:student_id (username)
          `).single();if(F)throw F;R=ae}if(R){const ae=j.findIndex(F=>F.student_id===b&&F.date===v&&F.type===T);if(ae!==-1){const F=[...j];F[ae]=R,N(F)}else N([R,...j]);_({type:"success",text:"Attendance updated"}),setTimeout(()=>{i&&B&&$()},1e3)}}catch(V){_({type:"error",text:V.message})}},U=async b=>{if(b.preventDefault(),!i||!Z.student_id||!Z.reason){_({type:"error",text:"Please fill all required fields"});return}try{const{data:P,error:T}=await D.from("discipline").insert([{student_id:Z.student_id,class_id:i,warning_count:parseInt(Z.warning_count)||1,reason:Z.reason,date:Z.date}]).select(`
          *,
          profiles:student_id (username)
        `).single();if(T)throw T;P&&(p([P,...g]),se({student_id:"",warning_count:"1",reason:"",date:new Date().toISOString().split("T")[0]}),_({type:"success",text:"Discipline record added successfully"}),setTimeout(()=>{i&&B&&$()},1e3))}catch(P){_({type:"error",text:P.message})}},X=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 rounded-2xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Your Academic Results"}),s.jsx("p",{className:"text-red-100 mt-1",children:"Track your performance across all subjects"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:x.length}),s.jsx("div",{className:"text-red-100 text-sm",children:"Total Tests"})]})})]})}),x.length>0?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(b=>{var P;return s.jsxs("div",{className:"group bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-bold text-lg",children:((P=b.subjects)==null?void 0:P.name)||"Unknown Subject"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold",children:b.grade}),s.jsx("div",{className:"text-blue-100 text-xs",children:"Grade"})]})]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Test Name"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.test_name})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Date"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(b.test_date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Score"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:[b.marks,"/",b.total_marks]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Math.round(b.marks/b.total_marks*100),"%"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-2 rounded-full transition-all duration-300",style:{width:`${b.marks/b.total_marks*100}%`}})})]})]},b.id)})}):s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(Pe,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Results Yet"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your academic results will appear here once they are added by your teachers."})]})})]}),ue=()=>{const b="school",P=j.filter(ee=>ee.type===b),T=P.length,V=P.filter(ee=>ee.status==="present").length,R=P.filter(ee=>ee.status==="absent").length,ae=P.filter(ee=>ee.status==="leave").length,F=T>0?Math.round(V/T*100):0;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold",children:"School Attendance"}),s.jsx("p",{className:"text-green-100 mt-1",children:"Track your daily attendance record"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-3xl font-bold",children:[F,"%"]}),s.jsx("div",{className:"text-green-100 text-sm",children:"Attendance Rate"})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(ra,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Present"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(ce,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Absent"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:R})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(lr,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Leave"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ae})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(cr,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Days"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:T})]})]})})]}),P.length>0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Attendance"})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:P.slice(0,10).map(ee=>s.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${ee.status==="present"?"bg-green-500":ee.status==="absent"?"bg-red-500":"bg-blue-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(ee.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(ee.date).toLocaleDateString()})]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ee.status==="present"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":ee.status==="absent"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"}`,children:ee.status.charAt(0).toUpperCase()+ee.status.slice(1)})]})},ee.id))})]}):s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(ra,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Attendance Records"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your attendance records will appear here once they are marked by your teachers."})]})})]})},ge=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold",children:"Discipline Records"}),s.jsx("p",{className:"text-orange-100 mt-1",children:"Track your behavioral records and warnings"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl font-bold",children:g.length}),s.jsx("div",{className:"text-orange-100 text-sm",children:"Total Records"})]})})]})}),g.length>0?s.jsx("div",{className:"space-y-4",children:g.map(b=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all duration-300",children:[s.jsx("div",{className:`px-6 py-4 ${b.warning_count>=3?"bg-red-500 text-white":b.warning_count===2?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ds,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:b.warning_count===3?"Serious Warning":b.warning_count===2?"Moderate Warning":"Minor Warning"}),s.jsx("p",{className:"text-sm opacity-90",children:new Date(b.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold",children:b.warning_count}),s.jsx("div",{className:"text-xs opacity-90",children:"Warnings"})]})]})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Reason"}),s.jsx("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:b.reason})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${b.warning_count>=3?"bg-red-500":b.warning_count===2?"bg-yellow-500":"bg-blue-500"}`}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${b.warning_count>=3?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200":b.warning_count===2?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"}`,children:b.warning_count===3?"B Grade":b.warning_count===2?"A Grade":"Tardy"})]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(b.date).toLocaleDateString()})]})]})})]},b.id))}):s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:[s.jsx(Ds,{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-600 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Discipline Records"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Great job! You have no discipline records. Keep up the good behavior."})]})})]}),de=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Student Results"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Manage and track student academic performance"})]}),s.jsxs("button",{onClick:()=>{var b;return(b=document.getElementById("addResultForm"))==null?void 0:b.scrollIntoView({behavior:"smooth"})},className:"inline-flex items-center justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[s.jsx($e,{className:"mr-2 h-4 w-4"})," Add New Result"]})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Student"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Subject"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Test"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Marks"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Grade"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:x.length>0?x.map(b=>{var P,T,V;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:(P=b.profiles)!=null&&P.photo_url?s.jsx("img",{src:b.profiles.photo_url,alt:"",className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400",children:s.jsx(ra,{className:"h-5 w-5"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:((T=b.profiles)==null?void 0:T.username)||"Unknown Student"})})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:((V=b.subjects)==null?void 0:V.name)||"Unknown Subject"}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:b.test_name}),s.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:[s.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.marks}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[" / ",b.total_marks]})]}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${b.grade==="A+"||b.grade==="A"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":b.grade==="B+"||b.grade==="B"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200":b.grade==="C+"||b.grade==="C"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"}`,children:b.grade})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:new Date(b.test_date).toLocaleDateString()}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:s.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this result?")){const{error:R}=await D.from("results").delete().eq("id",b.id);R?alert("Failed to delete result: "+R.message):k(x.filter(ae=>ae.id!==b.id))}},className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})})]},b.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[s.jsx(Pe,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"}),s.jsx("p",{children:"No results found. Add a new result below."})]})})})})]})})}),s.jsxs("div",{id:"addResultForm",className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[s.jsx("div",{className:"mb-6 flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Add New Result"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter the student's test results"})]})}),s.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{htmlFor:"student",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Student"}),s.jsxs("select",{id:"student",value:C.student_id,onChange:b=>M(P=>({...P,student_id:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",children:[s.jsx("option",{value:"",children:"Select Student"}),l.map(b=>s.jsx("option",{value:b.id,children:b.username},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subject"}),s.jsxs("select",{id:"subject",value:C.subject_id,onChange:b=>M(P=>({...P,subject_id:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",children:[s.jsx("option",{value:"",children:"Select Subject"}),d.map(b=>s.jsx("option",{value:b.id,children:b.name},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"testName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Test Name"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",id:"testName",value:C.test_name,onChange:b=>{M(P=>({...P,test_name:b.target.value})),q(P=>({...P,testName:b.target.value}))},onKeyDown:b=>{b.key==="Enter"&&b.preventDefault()},className:"flex-1 rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"Midterm, Final, Quiz, etc."}),s.jsx("button",{type:"button",onClick:async()=>{try{const b=await navigator.clipboard.readText();M(P=>({...P,test_name:b})),q(P=>({...P,testName:b}))}catch(b){console.error("Failed to read clipboard:",b)}},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Paste"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"marks",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Marks Obtained"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",id:"marks",value:C.marks,onChange:b=>{const P=b.target.value;(P===""||/^\d*$/.test(P))&&(M(T=>({...T,marks:P})),q(T=>({...T,marks:P})))},onKeyDown:b=>{b.key==="Enter"&&b.preventDefault()},className:"flex-1 rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"85"}),s.jsx("button",{type:"button",onClick:async()=>{try{const b=await navigator.clipboard.readText();(b===""||/^\d*$/.test(b))&&(M(P=>({...P,marks:b})),q(P=>({...P,marks:b})))}catch(b){console.error("Failed to read clipboard:",b)}},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Paste"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"totalMarks",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Marks"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",id:"totalMarks",value:C.total_marks,onChange:b=>{const P=b.target.value;(P===""||/^\d*$/.test(P))&&(M(T=>({...T,total_marks:P})),q(T=>({...T,totalMarks:P})))},onKeyDown:b=>{b.key==="Enter"&&b.preventDefault()},className:"flex-1 rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"100"}),s.jsx("button",{type:"button",onClick:async()=>{try{const b=await navigator.clipboard.readText();(b===""||/^\d*$/.test(b))&&(M(P=>({...P,total_marks:b})),q(P=>({...P,totalMarks:b})))}catch(b){console.error("Failed to read clipboard:",b)}},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Paste"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Grade"}),s.jsxs("select",{id:"grade",value:C.grade,onChange:b=>M(P=>({...P,grade:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",children:[s.jsx("option",{value:"",children:"Select Grade"}),s.jsx("option",{value:"A+",children:"A+"}),s.jsx("option",{value:"A",children:"A"}),s.jsx("option",{value:"B+",children:"B+"}),s.jsx("option",{value:"B",children:"B"}),s.jsx("option",{value:"C+",children:"C+"}),s.jsx("option",{value:"C",children:"C"}),s.jsx("option",{value:"D",children:"D"}),s.jsx("option",{value:"F",children:"F"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"testDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Test Date"}),s.jsx("input",{type:"date",id:"testDate",value:C.test_date,onChange:b=>M(P=>({...P,test_date:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"})]}),s.jsx("div",{className:"sm:col-span-2",children:s.jsx("button",{type:"button",onClick:O,disabled:!C.student_id||!C.subject_id||!C.test_name||!C.marks||!C.total_marks||!C.grade,className:"inline-flex w-full justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Add Result"})})]})]})]}),me=()=>{const b="school";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"School Attendance"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Track student attendance in physical classes"})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"date",value:v,onChange:P=>S(P.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"}),s.jsx(lr,{className:"pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"})]})})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Student"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:l.length>0?l.map(P=>{const T=j.find(V=>V.student_id===P.id&&V.date===v&&V.type===b);return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:P.photo_url?s.jsx("img",{src:P.photo_url,alt:"",className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400",children:s.jsx(ra,{className:"h-5 w-5"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:P.username})})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:T?s.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${T.status==="present"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":T.status==="absent"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200"}`,children:T.status.charAt(0).toUpperCase()+T.status.slice(1)}):s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Not marked"})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>H(P.id,"present"),className:`rounded-lg p-2 transition-colors ${(T==null?void 0:T.status)==="present"?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 hover:bg-green-100 hover:text-green-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-green-900/30 dark:hover:text-green-400"}`,title:"Present",children:s.jsx(Nr,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>H(P.id,"absent"),className:`rounded-lg p-2 transition-colors ${(T==null?void 0:T.status)==="absent"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-red-900/30 dark:hover:text-red-400"}`,title:"Absent",children:s.jsx(ce,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>H(P.id,"leave"),className:`rounded-lg p-2 transition-colors ${(T==null?void 0:T.status)==="leave"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-600 hover:bg-yellow-100 hover:text-yellow-600 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-yellow-900/30 dark:hover:text-yellow-400"}`,title:"Leave",children:s.jsx(lr,{className:"h-5 w-5"})})]})})]},P.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[s.jsx(ft,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"}),s.jsx("p",{children:"No students found in this class"})]})})})})]})})})]})},_e=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Discipline Records"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Track and manage student discipline"})]}),s.jsxs("button",{onClick:()=>{var b;return(b=document.getElementById("addDisciplineForm"))==null?void 0:b.scrollIntoView({behavior:"smooth"})},className:"inline-flex items-center justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[s.jsx($e,{className:"mr-2 h-4 w-4"})," Add New Record"]})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Student"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Warnings"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Reason"}),s.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white",children:"Date"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800",children:g.length>0?g.map(b=>{var P,T;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 flex-shrink-0 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:(P=b.profiles)!=null&&P.photo_url?s.jsx("img",{src:b.profiles.photo_url,alt:"",className:"h-full w-full object-cover"}):s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400",children:s.jsx(ra,{className:"h-5 w-5"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:((T=b.profiles)==null?void 0:T.username)||"Unknown Student"})})]})}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:s.jsx("span",{className:`inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium ${b.warning_count>=3?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200":b.warning_count===2?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"}`,children:b.warning_count===3?"B Grade":b.warning_count===2?"A Grade":"Tardy"})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:b.reason}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-700 dark:text-gray-300",children:new Date(b.date).toLocaleDateString()}),s.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:s.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this discipline record?")){const{error:V}=await D.from("discipline").delete().eq("id",b.id);V?alert("Failed to delete discipline record: "+V.message):p(g.filter(R=>R.id!==b.id))}},className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})})]},b.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[s.jsx(Ds,{className:"h-12 w-12 text-gray-400 dark:text-gray-600"}),s.jsx("p",{children:"No discipline records found. Add a new record below."})]})})})})]})})}),s.jsxs("div",{id:"addDisciplineForm",className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[s.jsx("div",{className:"mb-6 flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Add New Discipline Record"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Record student discipline incidents"})]})}),s.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{htmlFor:"disciplineStudent",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Student"}),s.jsxs("select",{id:"disciplineStudent",value:Z.student_id,onChange:b=>se(P=>({...P,student_id:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",children:[s.jsx("option",{value:"",children:"Select Student"}),l.map(b=>s.jsx("option",{value:b.id,children:b.username},b.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"warningCount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Warning Count"}),s.jsxs("select",{id:"warningCount",value:Z.warning_count,onChange:b=>se(P=>({...P,warning_count:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",children:[s.jsx("option",{value:"1",children:"1 - Tardy"}),s.jsx("option",{value:"2",children:"2 - A Grade"}),s.jsx("option",{value:"3",children:"3 - B Grade"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),s.jsx("input",{type:"date",id:"date",value:Z.date,onChange:b=>se(P=>({...P,date:b.target.value})),className:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm"})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{id:"reason",value:Z.reason,onChange:b=>{se(P=>({...P,reason:b.target.value})),q(P=>({...P,reason:b.target.value}))},onKeyDown:b=>{b.key==="Enter"&&b.preventDefault()},rows:3,className:"flex-1 rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"Describe the incident..."}),s.jsx("button",{type:"button",onClick:async()=>{try{const b=await navigator.clipboard.readText();se(P=>({...P,reason:b})),q(P=>({...P,reason:b}))}catch(b){console.error("Failed to read clipboard:",b)}},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 self-start",children:"Paste"})]})]}),s.jsx("div",{className:"sm:col-span-2",children:s.jsx("button",{type:"button",onClick:U,disabled:!Z.student_id||!Z.reason.trim(),className:"inline-flex w-full justify-center rounded-lg bg-red-600 px-4 py-2.5 text-sm font-medium text-white shadow-sm transition-colors hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:"Add Discipline Record"})})]})]})]});return h?s.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx(De,{className:"mx-auto h-12 w-12 animate-spin text-red-600"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-2 sm:p-6",children:s.jsxs("div",{className:"mx-auto max-w-7xl",children:[s.jsxs("div",{className:"mb-4 sm:mb-8",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"Record Room"}),s.jsx("p",{className:"mt-1 sm:mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-300",children:"Manage student records, attendance, and academic performance"})]}),y&&s.jsx("div",{className:`mb-3 sm:mb-4 rounded-lg p-3 sm:p-4 ${y.type==="success"?"bg-green-50 text-green-800 dark:bg-green-900/50 dark:text-green-200":"bg-red-50 text-red-800 dark:bg-red-900/50 dark:text-red-200"}`,children:s.jsxs("p",{className:"flex items-center text-sm sm:text-base",children:[y.type==="success"?s.jsx(Nr,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}):s.jsx(Ds,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),y.text]})}),s.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col space-y-3 sm:space-y-0 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"flex space-x-1 sm:space-x-2 overflow-x-auto rounded-lg bg-white p-1 shadow-sm dark:bg-gray-800",children:[s.jsxs("button",{onClick:()=>r("results"),className:`flex items-center rounded-md px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium transition-colors ${t==="results"?"bg-red-600 text-white":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(Pe,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"Results"]}),s.jsxs("button",{onClick:()=>r("schoolAttendance"),className:`flex items-center rounded-md px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium transition-colors ${t==="schoolAttendance"?"bg-red-600 text-white":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(ra,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"School"]}),s.jsxs("button",{onClick:()=>r("discipline"),className:`flex items-center rounded-md px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium transition-colors ${t==="discipline"?"bg-red-600 text-white":"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[s.jsx(Ds,{className:"mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4"}),"Discipline"]})]}),B&&s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsxs("select",{value:i,onChange:b=>o(b.target.value),className:"w-full sm:w-auto appearance-none rounded-lg border border-gray-300 bg-white pl-3 pr-10 py-1.5 sm:py-2 text-sm text-gray-700 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200",children:[s.jsx("option",{value:"",children:"Select class"}),a.map(b=>s.jsxs("option",{value:b.id,children:["Grade ",b.grade," - Section ",b.section]},b.id))]}),s.jsx(Wt,{className:"pointer-events-none absolute right-3 top-1/2 h-3 w-3 sm:h-4 sm:w-4 -translate-y-1/2 text-gray-400"})]}),t==="schoolAttendance"?s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("input",{type:"date",value:v,onChange:b=>S(b.target.value),className:"w-full sm:w-auto rounded-lg border border-gray-300 bg-white px-3 py-1.5 sm:py-2 text-sm text-gray-700 shadow-sm focus:border-red-500 focus:outline-none focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}),s.jsx(lr,{className:"pointer-events-none absolute right-3 top-1/2 h-3 w-3 sm:h-4 sm:w-4 -translate-y-1/2 text-gray-400"})]}):null]})]}),s.jsx("div",{className:"rounded-xl bg-white p-3 sm:p-6 shadow-sm dark:bg-gray-800",children:B?s.jsx(s.Fragment,{children:i?s.jsxs(s.Fragment,{children:[t==="results"&&s.jsx(de,{}),t==="schoolAttendance"&&s.jsx(me,{}),t==="discipline"&&s.jsx(_e,{})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(cr,{className:"h-16 w-16 text-gray-400 dark:text-gray-600"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:"No Class Selected"}),s.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:"Please select a class to view and manage records"})]})}):s.jsxs(s.Fragment,{children:[t==="results"&&s.jsx(X,{}),t==="schoolAttendance"&&s.jsx(ue,{}),t==="discipline"&&s.jsx(ge,{})]})})]})})}const ng={Sports:s.jsx(cy,{className:"h-6 w-6"}),Arts:s.jsx(oy,{className:"h-6 w-6"}),Science:s.jsx(ms,{className:"h-6 w-6"}),"AI Clubs":s.jsx(RN,{className:"h-6 w-6"}),Music:s.jsx(w4,{className:"h-6 w-6"}),Languages:s.jsx(r4,{className:"h-6 w-6"}),Leadership:s.jsx(hN,{className:"h-6 w-6"}),Community:s.jsx(XN,{className:"h-6 w-6"})},A6={present:"bg-green-100 text-green-800 border-green-200",absent:"bg-red-100 text-red-800 border-red-200",late:"bg-yellow-100 text-yellow-800 border-yellow-200",leave:"bg-blue-100 text-blue-800 border-blue-200"};function D6(){var I;const[e,t]=f.useState([]),[r,a]=f.useState([]),[n,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState([]),[u,h]=f.useState([]),[m,x]=f.useState([]),[k,j]=f.useState([]),[N,g]=f.useState(null),[p,v]=f.useState([]),[S,y]=f.useState(()=>new Date().toISOString().split("T")[0]),[_,C]=f.useState(null),[M,W]=f.useState(!1),[q,Z]=f.useState(!1),[se,B]=f.useState(!1),[ye,Y]=f.useState(!1),[te,J]=f.useState([]),[$,O]=f.useState([]),[H,U]=f.useState(""),[X,ue]=f.useState({name:"",description:"",sector_id:"",max_capacity:30}),[ge,de]=f.useState({name:"",description:""});f.useEffect(()=>{async function A(){var be;W(!0);const{data:z}=await D.from("sectors").select("*");t(z||[]),i(((be=z==null?void 0:z[0])==null?void 0:be.id)||null);const{data:le}=await D.from("clubs").select("*");a(le||[]),await T(),await V();const{data:{user:we}}=await D.auth.getUser();if(we){const{data:Se}=await D.from("profiles").select("*").eq("id",we.id).single();l(Se||we),(Se||we)&&await P()}else l(null);W(!1)}A()},[]),f.useEffect(()=>{S&&V()},[S]);const me=(o==null?void 0:o.role)==="admin"||(o==null?void 0:o.role)==="ultra_admin"||(o==null?void 0:o.role)==="teacher",_e=o&&!me;console.log("User:",o),console.log("User role:",o==null?void 0:o.role),console.log("isAdminOrTeacher:",me),console.log("isStudent:",_e);async function b(A){const{data:z}=await D.from("club_members").select("*, profiles:user_id (id, username, photo_url)").eq("club_id",A);d(z||[])}async function P(){if(!(o!=null&&o.id))return;console.log("Loading user club memberships for user ID:",o.id);const{data:A,error:z}=await D.from("club_members").select("club_id").eq("user_id",o.id);console.log("User club memberships query result:",{data:A,error:z}),h(A||[])}async function T(){const{data:A}=await D.from("club_members").select("*, profiles:user_id (id, username, photo_url), clubs:club_id (id, name)");if(x(A||[]),console.log("All club members loaded:",A),o!=null&&o.id){const z=(A==null?void 0:A.filter(le=>le.user_id===o.id))||[];console.log("Current user memberships in allClubMembers:",z)}}async function V(){const{data:A}=await D.from("club_attendance").select("*, profiles:user_id (id, username), clubs:club_id (id, name)").eq("date",S);j(A||[])}async function R(A,z){const{data:le}=await D.from("club_attendance").select("*, profiles:user_id (id, username)").eq("club_id",A).eq("date",z);v(le||[])}async function ae(A,z,le){await D.from("club_attendance").upsert({club_id:A,user_id:z,date:S,status:le,marked_by:o.id}),await R(A,S),await V(),C({type:"success",text:"Attendance marked successfully!"})}async function F(){if(!X.name||!X.sector_id){C({type:"error",text:"Please fill in all required fields"});return}const{data:A,error:z}=await D.from("clubs").insert([{...X,created_by:o.id}]).select().single();if(z){C({type:"error",text:z.message});return}a([...r,A]),Z(!1),ue({name:"",description:"",sector_id:"",max_capacity:30}),C({type:"success",text:"Club created successfully!"})}async function ee(){if(!ge.name){C({type:"error",text:"Please enter a sector name"});return}const{data:A,error:z}=await D.from("sectors").insert([{name:ge.name,description:ge.description}]).select().single();if(z){C({type:"error",text:z.message});return}t([...e,A]),Y(!1),de({name:"",description:""}),C({type:"success",text:"Sector created successfully!"})}async function ve(A){var le;const{error:z}=await D.from("sectors").delete().eq("id",A);if(z){C({type:"error",text:z.message});return}t(e.filter(we=>we.id!==A)),n===A&&i(((le=e[0])==null?void 0:le.id)||null),C({type:"success",text:"Sector deleted successfully!"})}async function Le(A){const{error:z}=await D.from("clubs").delete().eq("id",A);if(z){C({type:"error",text:z.message});return}a(r.filter(le=>le.id!==A)),(N==null?void 0:N.id)===A&&g(null),C({type:"success",text:"Club deleted successfully!"})}async function K(A){if(!N)return;const{error:z}=await D.from("club_members").insert([{club_id:N.id,user_id:A}]);if(z){C({type:"error",text:z.message});return}await b(N.id),await T(),A===(o==null?void 0:o.id)&&await P(),B(!1),C({type:"success",text:"Student added successfully!"})}async function re(){console.log("Loading available students...");const{data:A,error:z}=await D.from("profiles").select("*");if(console.log("All profiles:",A),console.log("Profiles error:",z),z){console.error("Error loading profiles:",z),C({type:"error",text:"Error loading students: "+z.message});return}const le=(A==null?void 0:A.filter(Se=>{var Br;return console.log("Checking profile:",Se),!!(Se.role==="student"||((Br=Se.role)==null?void 0:Br.toLowerCase())==="student"||Se.role&&!["admin","ultra_admin","teacher"].includes(Se.role.toLowerCase())||!Se.role||Se.username&&!Se.role)}))||[];console.log("Students found:",le);const we=m.map(Se=>Se.user_id);console.log("Enrolled student IDs:",we);const be=(A==null?void 0:A.filter(Se=>!we.includes(Se.id)))||[];console.log("Available students (including LGS):",be),J(be),O(be),be.length===0&&(C({type:"info",text:"No available students found. All students may already be enrolled or no students exist."}),(A==null?void 0:A.length)===0&&C({type:"info",text:"No users found in the database."}))}const ke=_e?r.filter(A=>{if(A.sector_id!==n)return!1;const z=u.some(we=>we.club_id===A.id),le=m.some(we=>we.club_id===A.id&&we.user_id===(o==null?void 0:o.id));return z||le}):r.filter(A=>A.sector_id===n);if(_e){console.log("Student view debugging:"),console.log("User ID:",o==null?void 0:o.id),console.log("User club memberships:",u),console.log("All clubs:",r),console.log("Active sector:",n);const A=r.filter(le=>le.sector_id===n);console.log("Clubs in active sector:",A);const z=r.filter(le=>{const we=u.some(Se=>Se.club_id===le.id),be=m.some(Se=>Se.club_id===le.id&&Se.user_id===(o==null?void 0:o.id));return we||be});console.log("User enrolled clubs (all sectors):",z),console.log("Visible clubs:",ke)}const He={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Nt={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},yt={hidden:{scale:.8,opacity:0},visible:{scale:1,opacity:1,transition:{duration:.3}},hover:{scale:1.05,y:-5,transition:{duration:.2}}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[s.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx(w.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-4xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Afternoon Clubs"}),s.jsx(w.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-gray-600 dark:text-gray-400 text-center",children:"Explore and manage extracurricular activities"})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sectors"}),me&&s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsx($e,{className:"h-4 w-4"}),"Add Sector"]})]}),s.jsx(w.div,{variants:He,initial:"hidden",animate:"visible",className:"flex flex-wrap justify-center gap-4 mb-12",children:e.map((A,z)=>s.jsxs(w.div,{variants:Nt,className:"flex items-center gap-2",children:[s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`flex items-center gap-3 px-6 py-3 rounded-full font-semibold transition-all duration-200 shadow-lg ${n===A.id?"bg-gradient-to-r from-red-600 to-pink-600 text-white shadow-xl":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:shadow-xl border border-gray-200 dark:border-gray-700"}`,onClick:()=>i(A.id),children:[ng[A.name]||s.jsx(Ko,{className:"h-6 w-6"}),s.jsx("span",{children:A.name})]}),me&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>ve(A.id),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",title:"Delete sector",children:s.jsx(pe,{className:"h-4 w-4"})})]},A.id))}),M?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(w.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full"})}):s.jsx(w.div,{layout:!0,className:"grid grid-cols-1 gap-8",children:s.jsx(fe,{mode:"popLayout",children:ke.map((A,z)=>{var le,we;return s.jsxs(w.div,{variants:yt,initial:"hidden",animate:"visible",whileHover:"hover",layout:!0,className:"group relative bg-white dark:bg-gray-800 rounded-3xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-3xl transition-all duration-500 hover:scale-[1.02]",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-red-500 via-pink-500 to-red-600 p-4 sm:p-6 text-white",children:[s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:ng[(le=e.find(be=>be.id===A.sector_id))==null?void 0:le.name]||s.jsx(Ko,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold mb-1",children:A.name}),s.jsx("p",{className:"text-white/80 text-sm sm:text-base font-medium",children:((we=e.find(be=>be.id===A.sector_id))==null?void 0:we.name)||"Unknown Sector"})]})]})}),me&&s.jsx(w.button,{whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},onClick:()=>Le(A.id),className:"p-1.5 sm:p-2 bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 rounded-xl transition-all duration-300 opacity-0 group-hover:opacity-100",title:"Delete club",children:s.jsx(pe,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),s.jsx("p",{className:"text-white/90 text-sm sm:text-base leading-relaxed mb-3 sm:mb-4 line-clamp-2",children:A.description||"No description available."}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 text-white/80",children:[s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:s.jsx(ft,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"})}),s.jsxs("span",{className:"font-semibold text-xs sm:text-sm",children:[m.filter(be=>be.club_id===A.id).length," members"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:s.jsx(lr,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"})}),s.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:new Date(A.created_at).toLocaleDateString()})]})]}),s.jsxs(w.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-white/20 backdrop-blur-sm text-white rounded-xl font-bold shadow-2xl hover:shadow-3xl hover:bg-white/30 transition-all duration-300 flex items-center gap-2 border border-white/30 text-sm sm:text-base",onClick:async()=>{g(A),await b(A.id),await R(A.id,S)},children:[s.jsx(ft,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden xs:inline",children:"View Details"}),s.jsx("span",{className:"xs:hidden",children:"Details"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-600 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:s.jsx(ft,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Capacity"}),s.jsxs("div",{className:"text-sm sm:text-lg font-bold text-gray-900 dark:text-white",children:[m.filter(be=>be.club_id===A.id).length,"/",A.max_capacity||30]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1.5",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-1.5 rounded-full transition-all duration-500",style:{width:`${Math.min(m.filter(be=>be.club_id===A.id).length/(A.max_capacity||30)*100,100)}%`}})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl p-3 sm:p-4 border border-gray-200 dark:border-gray-600 shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:s.jsx(lr,{className:"h-3 w-3 sm:h-4 sm:w-4 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Attendance Today"}),s.jsx("div",{className:"text-sm sm:text-lg font-bold text-gray-900 dark:text-white",children:k.filter(be=>be.club_id===A.id&&be.status==="present").length})]})]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:k.filter(be=>be.club_id===A.id).length>0?`${Math.round(k.filter(be=>be.club_id===A.id&&be.status==="present").length/k.filter(be=>be.club_id===A.id).length*100)}% present`:"No attendance marked"})]})]})})]},A.id)})})}),!M&&ke.length===0&&s.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:s.jsx(ft,{className:"h-16 w-16 mx-auto"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No clubs found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:_e?"You are not enrolled in any clubs in this sector.":"No clubs have been created in this sector yet."})]})]}),me&&s.jsx(w.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},className:"fixed bottom-8 right-8 w-16 h-16 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-full shadow-2xl flex items-center justify-center z-50",onClick:()=>Z(!0),children:s.jsx($e,{className:"h-8 w-8"})}),s.jsx(fe,{children:N&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto",children:s.jsxs("div",{className:"p-4 sm:p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:N.name}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:[(I=e.find(A=>A.id===N.sector_id))==null?void 0:I.name,"  ",c.length," members"]})]}),s.jsx("button",{onClick:()=>g(null),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:s.jsx(ce,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-3 sm:gap-0",children:[s.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:["Enrolled Students (",c.length,")"]}),me&&s.jsxs(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{B(!0),re()},className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all duration-200 text-sm sm:text-base",children:[s.jsx(J4,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Add Student"]})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:c.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ft,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No students enrolled yet"})]}):c.map(A=>{var z,le,we;return s.jsxs(w.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center text-white font-semibold text-sm sm:text-lg",children:((le=(z=A.profiles)==null?void 0:z.username)==null?void 0:le.charAt(0))||"U"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm sm:text-base",children:((we=A.profiles)==null?void 0:we.username)||"Unknown"}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["Joined ",new Date(A.joined_at).toLocaleDateString()]})]})]}),me&&s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:async()=>{await D.from("club_members").delete().eq("id",A.id),await b(N.id)},className:"p-1.5 sm:p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",title:"Remove student",children:s.jsx(pe,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]},A.id)})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 gap-3 sm:gap-0",children:[s.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:["Attendance (",S,")"]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[s.jsx("input",{type:"date",value:S,onChange:A=>{y(A.target.value),R(N.id,A.target.value)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"}),me&&s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{c.forEach(A=>{ae(N.id,A.user_id,"present")})},className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Mark All Present"})]})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:c.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ft,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No students to mark attendance for"})]}):c.map(A=>{var le,we,be;const z=p.find(Se=>Se.user_id===A.user_id);return _e&&A.user_id!==o.id?null:s.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center text-white font-semibold text-sm sm:text-lg",children:((we=(le=A.profiles)==null?void 0:le.username)==null?void 0:we.charAt(0))||"U"}),s.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm sm:text-base",children:((be=A.profiles)==null?void 0:be.username)||"Unknown"})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("span",{className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm font-medium border ${A6[z==null?void 0:z.status]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:(z==null?void 0:z.status)||"Not marked"}),me&&s.jsx("div",{className:"flex gap-1",children:["present","absent","late","leave"].map(Se=>s.jsx(w.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`px-2 sm:px-3 py-1 rounded-lg text-xs font-medium transition-colors ${(z==null?void 0:z.status)===Se?"bg-red-600 text-white shadow-lg":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,onClick:()=>ae(N.id,A.user_id,Se),children:Se},Se))})]})]},A.user_id)})})]})]})]})})})}),s.jsx(fe,{children:q&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create New Club"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Club Name *"}),s.jsx("input",{type:"text",value:X.name,onChange:A=>ue({...X,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter club name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sector *"}),s.jsxs("select",{value:X.sector_id,onChange:A=>ue({...X,sector_id:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a sector"}),e.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),s.jsx("textarea",{value:X.description,onChange:A=>ue({...X,description:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter club description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Capacity"}),s.jsx("input",{type:"number",value:X.max_capacity,onChange:A=>ue({...X,max_capacity:parseInt(A.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:F,className:"flex-1 px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all duration-200",children:"Create Club"})]})]})})})}),s.jsx(fe,{children:se&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Add Users to ",N==null?void 0:N.name]}),s.jsx("button",{onClick:()=>B(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:s.jsx(ce,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:H,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",onChange:A=>{const z=A.target.value;U(z);const le=te.filter(we=>{var be,Se;return((be=we.username)==null?void 0:be.toLowerCase().includes(z.toLowerCase()))||((Se=we.email)==null?void 0:Se.toLowerCase().includes(z.toLowerCase()))});O(le)}}),s.jsx(xi,{className:"absolute right-3 top-3 h-5 w-5 text-gray-400"})]})]}),s.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:$.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(ft,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:H?"No students found matching your search":"No available students found"}),s.jsx("p",{className:"text-sm",children:H?"Try a different search term":"All students are already enrolled in this club"})]}):s.jsx("div",{className:"space-y-3",children:$.map(A=>{var z;return s.jsxs(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:((z=A.username)==null?void 0:z.charAt(0))||"S"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.username}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.email})]})]}),s.jsx(w.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>K(A.id),className:"px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all duration-200 font-medium",children:"Add"})]},A.id)})})})]})})}),s.jsx(fe,{children:ye&&s.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx(w.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create New Sector"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sector Name *"}),s.jsx("input",{type:"text",value:ge.name,onChange:A=>de({...ge,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter sector name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),s.jsx("textarea",{value:ge.description,onChange:A=>de({...ge,description:A.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter sector description"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>Y(!1),className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:shadow-lg transition-all duration-200",children:"Create Sector"})]})]})})})}),s.jsx(fe,{children:_&&s.jsx(w.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${_.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:_.text})})]})}function M6(){const{user:e}=Je(),[t,r]=f.useState(null),[a,n]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{const{data:o,error:l}=await D.from("profiles").select("*").limit(10);if(l)throw l;r(o)}catch(o){console.error("Error fetching data:",o)}finally{n(!1)}})()},[]),a?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Other Page"}),s.jsxs("p",{children:["Welcome, ",(e==null?void 0:e.username)||"User","!"]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Sample Data:"}),s.jsx("pre",{className:"bg-gray-100 p-4 rounded",children:JSON.stringify(t,null,2)})]})]})}function Bv(){const{user:e}=Je(),t=async()=>{try{await D.auth.signOut()}catch(r){console.error("Error signing out:",r)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-amber-50 dark:from-yellow-900/10 dark:via-orange-900/10 dark:to-amber-900/10 flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-yellow-200/30 dark:bg-yellow-800/20 rounded-full blur-2xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-orange-200/30 dark:bg-orange-800/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-amber-200/20 dark:bg-amber-800/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}})]}),s.jsxs("div",{className:"max-w-md w-full bg-white/90 dark:bg-gray-800/95 backdrop-blur-lg rounded-3xl shadow-2xl border border-yellow-200/50 dark:border-yellow-800/30 p-8 text-center relative z-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 dark:from-yellow-500 dark:to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:s.jsx(Bt,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3",children:"Access Pending"}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:"Your account is awaiting approval from an administrator."})]}),s.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 rounded-2xl p-6 mb-8 border border-yellow-200/50 dark:border-yellow-800/30",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center",children:s.jsx(Ds,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2 text-lg",children:"What happens next?"}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 leading-relaxed",children:"An administrator will review your account and assign you the appropriate role and permissions. You'll be notified once your access is granted."})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Email:"})," ",(e==null?void 0:e.email)||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Username:"})," ",e==null?void 0:e.username]})]})}),s.jsx("button",{onClick:t,className:"w-full px-6 py-3 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:from-gray-200 hover:to-gray-300 dark:hover:from-gray-600 dark:hover:to-gray-500 transition-all duration-200 font-medium shadow-sm hover:shadow-md",children:"Sign Out"})]})]})]})}function Tc({children:e,requiredRole:t}){const{user:r,loading:a}=Je();return a?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):r?r.role==="pending"?s.jsx(Bv,{}):t&&!t.includes(r.role)?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ds,{className:"w-8 h-8 text-red-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."})]})}):s.jsx(s.Fragment,{children:e}):s.jsx(Sk,{to:"/login",replace:!0})}function L6(){const{user:e,loading:t}=Je(),[r,a]=f.useState([]),[n,i]=f.useState(null);return f.useEffect(()=>{(async()=>{try{const{classes:l,error:c}=await Tl();if(c){console.error("Error loading classes:",c);return}l&&a(l)}catch(l){console.error("Error in loadClassesData:",l)}})()},[]),f.useEffect(()=>{const o=localStorage.getItem("selectedClassId");if(o&&r.length>0){const l=r.find(c=>c.id===o);l&&i(l)}},[r]),t?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e?(e==null?void 0:e.role)==="pending"?s.jsx(Bv,{}):s.jsx(s.Fragment,{children:s.jsxs(Tk,{children:[s.jsx(Qe,{path:"/class-select",element:s.jsx(tg,{})}),s.jsx(Qe,{path:"/select-class",element:s.jsx(tg,{})}),s.jsxs(Qe,{path:"/",element:s.jsx(QC,{}),children:[s.jsx(Qe,{index:!0,element:s.jsx(i6,{})}),s.jsx(Qe,{path:"dashboard",element:s.jsx(o6,{})}),s.jsx(Qe,{path:"classes",element:s.jsx(l6,{})}),s.jsx(Qe,{path:"subjects",element:s.jsx(d6,{})}),s.jsx(Qe,{path:"subjects/:id",element:s.jsx(h6,{})}),s.jsx(Qe,{path:"assignments",element:s.jsx(m6,{})}),s.jsx(Qe,{path:"announcements",element:s.jsx(f6,{})}),s.jsx(Qe,{path:"library",element:s.jsx(g6,{})}),s.jsx(Qe,{path:"users",element:s.jsx(Tc,{requiredRole:["admin","ultra_admin"],children:s.jsx(p6,{})})}),s.jsx(Qe,{path:"settings",element:s.jsx(x6,{})}),s.jsx(Qe,{path:"customize",element:s.jsx(Tc,{requiredRole:["admin","ultra_admin"],children:s.jsx(y6,{})})}),s.jsx(Qe,{path:"custom/:path",element:s.jsx(T6,{})}),s.jsx(Qe,{path:"record-room",element:s.jsx(Tc,{requiredRole:["admin","ultra_admin","teacher","student"],children:s.jsx(P6,{})})}),s.jsx(Qe,{path:"afternoon-clubs",element:s.jsx(D6,{})}),s.jsx(Qe,{path:"other",element:s.jsx(M6,{})})]})]})}):s.jsx(s6,{})}function R6(){return s.jsx(iN,{children:s.jsx(L6,{})})}yx(document.getElementById("root")).render(s.jsx(f.StrictMode,{children:s.jsx(Ok,{children:s.jsx(R6,{})})}));
